/*! For license information please see tus.min.js.LICENSE.txt */
"use strict";(this.webpackChunkBetterMessages=this.webpackChunkBetterMessages||[]).push([["uppy-tus"],{244:(e,t,r)=>{var o=r(89990);r(76918),r(28706),r(25276),r(48598),r(8921),r(44114),r(34782),r(54554),r(13609),r(23288),r(26099),r(27495),r(90906),r(38781),r(25440),r(43359),r(88267),r(13611);var n=r(59067),i=r(48892),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,u=/[\n\r\t]/g,l=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,f=/^[a-zA-Z]:/;function trimLeft(e){return(e||"").toString().replace(a,"")}var p=[["#","hash"],["?","query"],function sanitize(e,t){return isSpecial(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function lolcation(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},i={},a=o(e=e||n);if("blob:"===e.protocol)i=new Url(unescape(e.pathname),{});else if("string"===a)for(t in i=new Url(e,{}),h)delete i[t];else if("object"===a){for(t in e)t in h||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=l.test(e.href))}return i}function isSpecial(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function extractProtocol(e,t){e=(e=trimLeft(e)).replace(u,""),t=t||{};var r,o=c.exec(e),n=o[1]?o[1].toLowerCase():"",i=!!o[2],a=!!o[3],l=0;return i?a?(r=o[2]+o[3]+o[4],l=o[2].length+o[3].length):(r=o[2]+o[4],l=o[2].length):a?(r=o[3]+o[4],l=o[3].length):r=o[4],"file:"===n?l>=2&&(r=r.slice(2)):isSpecial(n)?r=o[4]:n?i&&(r=r.slice(2)):l>=2&&isSpecial(t.protocol)&&(r=o[4]),{protocol:n,slashes:i||isSpecial(n),slashesCount:l,rest:r}}function Url(e,t,r){if(e=(e=trimLeft(e)).replace(u,""),!(this instanceof Url))return new Url(e,t,r);var a,l,s,c,h,d,y=p.slice(),v=o(t),m=this,_=0;for("object"!==v&&"string"!==v&&(r=t,t=null),r&&"function"!=typeof r&&(r=i.parse),a=!(l=extractProtocol(e||"",t=lolcation(t))).protocol&&!l.slashes,m.slashes=l.slashes||a&&t.slashes,m.protocol=l.protocol||t.protocol||"",e=l.rest,("file:"===l.protocol&&(2!==l.slashesCount||f.test(e))||!l.slashes&&(l.protocol||l.slashesCount<2||!isSpecial(m.protocol)))&&(y[3]=[/(.*)/,"pathname"]);_<y.length;_++)"function"!=typeof(c=y[_])?(s=c[0],d=c[1],s!=s?m[d]=e:"string"==typeof s?~(h="@"===s?e.lastIndexOf(s):e.indexOf(s))&&("number"==typeof c[2]?(m[d]=e.slice(0,h),e=e.slice(h+c[2])):(m[d]=e.slice(h),e=e.slice(0,h))):(h=s.exec(e))&&(m[d]=h[1],e=e.slice(0,h.index)),m[d]=m[d]||a&&c[3]&&t[d]||"",c[4]&&(m[d]=m[d].toLowerCase())):e=c(e,m);r&&(m.query=r(m.query)),a&&t.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==t.pathname)&&(m.pathname=function resolve(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=r.length,n=r[o-1],i=!1,a=0;o--;)"."===r[o]?r.splice(o,1):".."===r[o]?(r.splice(o,1),a++):a&&(0===o&&(i=!0),r.splice(o,1),a--);return i&&r.unshift(""),"."!==n&&".."!==n||r.push(""),r.join("/")}(m.pathname,t.pathname)),"/"!==m.pathname.charAt(0)&&isSpecial(m.protocol)&&(m.pathname="/"+m.pathname),n(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(~(h=m.auth.indexOf(":"))?(m.username=m.auth.slice(0,h),m.username=encodeURIComponent(decodeURIComponent(m.username)),m.password=m.auth.slice(h+1),m.password=encodeURIComponent(decodeURIComponent(m.password))):m.username=encodeURIComponent(decodeURIComponent(m.auth)),m.auth=m.password?m.username+":"+m.password:m.username),m.origin="file:"!==m.protocol&&isSpecial(m.protocol)&&m.host?m.protocol+"//"+m.host:"null",m.href=m.toString()}Url.prototype={set:function set(e,t,r){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,n(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,s.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var u=t.indexOf(":");~u?(o.username=t.slice(0,u),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(u+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var c=p[l];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&isSpecial(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function toString(e){e&&"function"==typeof e||(e=i.stringify);var t,r=this,n=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var u=a+(r.protocol&&r.slashes||isSpecial(r.protocol)?"//":"");return r.username?(u+=r.username,r.password&&(u+=":"+r.password),u+="@"):r.password?(u+=":"+r.password,u+="@"):"file:"!==r.protocol&&isSpecial(r.protocol)&&!n&&"/"!==r.pathname&&(u+="@"),(":"===n[n.length-1]||s.test(r.hostname)&&!r.port)&&(n+=":"),u+=n+r.pathname,(t="object"===o(r.query)?e(r.query):r.query)&&(u+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(u+=r.hash),u}},Url.extractProtocol=extractProtocol,Url.location=lolcation,Url.trimLeft=trimLeft,Url.qs=i,e.exports=Url},33111:(e,t,r)=>{r.r(t),r.d(t,{DefaultHttpStack:()=>O,DetailedError:()=>v,Upload:()=>I,canStoreURLs:()=>k,defaultOptions:()=>A,enableDebugLog:()=>enableDebugLog,isSupported:()=>H});r(52675),r(89463),r(2259),r(45700),r(16280),r(76918),r(2008),r(51629),r(23792),r(44114),r(34782),r(89572),r(94170),r(2892),r(59904),r(67945),r(84185),r(83851),r(81278),r(40875),r(79432),r(63548),r(10287),r(26099),r(60825),r(15472),r(47764),r(98992),r(54520),r(3949),r(23500),r(62953),r(28706),r(23418),r(64346),r(48598),r(62062),r(94490),r(23288),r(62010),r(40150),r(5506),r(58940),r(3362),r(27495),r(90906),r(38781),r(81454),r(76031);const o="function"==typeof btoa,n="function"==typeof Buffer,i=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),a=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),u=((e=>{let t={};e.forEach((e,r)=>t[e]=r)})(a),String.fromCharCode.bind(String)),l=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_")),btoaPolyfill=e=>{let t,r,o,n,i="";const u=e.length%3;for(let u=0;u<e.length;){if((r=e.charCodeAt(u++))>255||(o=e.charCodeAt(u++))>255||(n=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=r<<16|o<<8|n,i+=a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}return u?i.slice(0,u-3)+"===".substring(u):i},s=o?e=>btoa(e):n?e=>Buffer.from(e,"binary").toString("base64"):btoaPolyfill,c=n?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,o=e.length;r<o;r+=4096)t.push(u.apply(null,e.subarray(r,r+4096)));return s(t.join(""))},cb_utob=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},f=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=e=>e.replace(f,cb_utob),p=n?e=>Buffer.from(e,"utf8").toString("base64"):i?e=>c(i.encode(e)):e=>s(utob(e)),encode=(e,t=!1)=>t?l(p(e)):p(e),h=encode;var d=r(244),y=r.n(d);r(25276),r(36033);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(e){if(null===e||!function _isNativeFunction(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)},_wrapNativeSuper(e)}function _construct(e,t,r){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(e,t,r){var o=[null];o.push.apply(o,t);var n=new(Function.bind.apply(e,o));return r&&_setPrototypeOf(n,r.prototype),n},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}const v=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(DetailedError,e);var t=_createSuper(DetailedError);function DetailedError(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DetailedError),(r=t.call(this,e)).originalRequest=n,r.originalResponse=i,r.causingError=o,null!=o&&(e+=", caused by ".concat(o.toString())),null!=n){var a=n.getHeader("X-Request-ID")||"n/a",u=n.getMethod(),l=n.getURL(),s=i?i.getStatus():"n/a",c=i?i.getBody()||"":"n/a";e+=", originated from request (method: ".concat(u,", url: ").concat(l,", response code: ").concat(s,", response text: ").concat(c,", request id: ").concat(a,")")}return r.message=e,r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(DetailedError)}(_wrapNativeSuper(Error));var m=!1;function enableDebugLog(){m=!0}function log(e){m&&console.log(e)}r(25440);function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function define(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function define(e,t,r){return e[t]=r}}function wrap(e,t,r,o){var i=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(i.prototype),u=new Context(o||[]);return n(a,"_invoke",{value:makeInvokeMethod(e,r,u)}),a}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=wrap;var s="suspendedStart",c="suspendedYield",f="executing",p="completed",h={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,a,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(values([])));v&&v!==r&&o.call(v,a)&&(d=v);var m=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){define(e,t,function(e){return this._invoke(t,e)})})}function AsyncIterator(e,t){function invoke(r,n,i,a){var u=tryCatch(e[r],e,n);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==upload_typeof(s)&&o.call(s,"__await")?t.resolve(s.__await).then(function(e){invoke("next",e,i,a)},function(e){invoke("throw",e,i,a)}):t.resolve(s).then(function(e){l.value=e,i(l)},function(e){return invoke("throw",e,i,a)})}a(u.arg)}var r;n(this,"_invoke",{value:function value(e,o){function callInvokeWithMethodAndArg(){return new t(function(t,r){invoke(e,o,t,r)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,o){var n=s;return function(i,a){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var u=o.delegate;if(u){var l=maybeInvokeDelegate(u,o);if(l){if(l===h)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===s)throw n=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=f;var d=tryCatch(t,r,o);if("normal"===d.type){if(n=o.done?p:c,d.arg===h)continue;return{value:d.arg,done:o.done}}"throw"===d.type&&(n=p,o.method="throw",o.arg=d.arg)}}}function maybeInvokeDelegate(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),h;var i=tryCatch(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function next(){for(;++n<t.length;)if(o.call(t,n))return next.value=t[n],next.done=!1,next;return next.value=e,next.done=!0,next};return i.next=i}}throw new TypeError(upload_typeof(t)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,n(m,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),n(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},t.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,function(){return this}),t.AsyncIterator=AsyncIterator,t.async=function(e,r,o,n,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(e,r,o,n),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},defineIteratorMethods(m),define(m,l,"Generator"),define(m,a,function(){return this}),define(m,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function next(){for(;r.length;){var e=r.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(o,n){return a.type="throw",a.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),h}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;resetTryEntry(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,o){return this.delegate={iterator:values(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),h}},t}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(o,n)}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i,a,u=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(o=i.call(r)).done)&&(u.push(o.value),u.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw n}}return u}}(e,t)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function upload_typeof(e){return upload_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},upload_typeof(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return(t=upload_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function upload_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,upload_toPropertyKey(o.key),o)}}function upload_toPropertyKey(e){var t=function upload_toPrimitive(e,t){if("object"!==upload_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==upload_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===upload_typeof(t)?t:String(t)}var _={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:defaultOnShouldRetry,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},g=function(){function BaseUpload(e,t){!function upload_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseUpload),"resume"in t&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=t,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return function upload_createClass(e,t,r){return t&&upload_defineProperties(e.prototype,t),r&&upload_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BaseUpload,[{key:"findPreviousUploads",value:function findPreviousUploads(){var e=this;return this.options.fingerprint(this.file,this.options).then(function(t){return e._urlStorage.findUploadsByFingerprint(t)})}},{key:"resumeFromPreviousUpload",value:function resumeFromPreviousUpload(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function start(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl||this.url){var r=this.options.retryDelays;if(null==r||"[object Array]"===Object.prototype.toString.call(r)){if(this.options.parallelUploads>1)for(var o=0,n=["uploadUrl","uploadSize","uploadLengthDeferred"];o<n.length;o++){var i=n[o];if(this.options[i])return void this._emitError(new Error("tus: cannot use the ".concat(i," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then(function(r){return log(null==r?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(r)),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)}).then(function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()}).catch(function(t){e._emitError(t)})}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function _startParallelUpload(){var e,t=this,r=this._size,o=0;this._parallelUploads=[];var n=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,i=null!==(e=this.options.parallelUploadBoundaries)&&void 0!==e?e:function splitSizeIntoParts(e,t){for(var r=Math.floor(e/t),o=[],n=0;n<t;n++)o.push({start:r*n,end:r*(n+1)});return o[t-1].end=e,o}(this._source.size,n);this._parallelUploadUrls&&i.forEach(function(e,r){e.uploadUrl=t._parallelUploadUrls[r]||null}),this._parallelUploadUrls=new Array(i.length);var a,u=i.map(function(e,n){var a=0;return t._source.slice(e.start,e.end).then(function(u){var l=u.value;return new Promise(function(u,s){var c=_objectSpread(_objectSpread({},t.options),{},{uploadUrl:e.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:_objectSpread(_objectSpread({},t.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:s,onProgress:function onProgress(e){o=o-a+e,a=e,t._emitProgress(o,r)},onUploadUrlAvailable:function onUploadUrlAvailable(){t._parallelUploadUrls[n]=f.url,t._parallelUploadUrls.filter(function(e){return Boolean(e)}).length===i.length&&t._saveUploadInUrlStorage()}}),f=new BaseUpload(l,c);f.start(),t._parallelUploads.push(f)})})});Promise.all(u).then(function(){(a=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=encodeMetadata(t.options.metadata);return""!==e&&a.setHeader("Upload-Metadata",e),t._sendRequest(a,null)}).then(function(e){if(inStatusCategory(e.getStatus(),200)){var r=e.getHeader("Location");null!=r?(t.url=resolveUrl(t.options.endpoint,r),log("Created upload at ".concat(t.url)),t._emitSuccess()):t._emitHttpError(a,e,"tus: invalid or missing Location header")}else t._emitHttpError(a,e,"tus: unexpected response while creating upload")}).catch(function(e){t._emitError(e)})}},{key:"_startSingleUpload",value:function _startSingleUpload(){return this._aborted=!1,null!=this.url?(log("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(log("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(log("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function abort(e){var t=this;return null!=this._parallelUploads&&this._parallelUploads.forEach(function(t){t.abort(e)}),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),e&&null!=this.url?BaseUpload.terminate(this.url,this.options).then(function(){return t._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function _emitHttpError(e,t,r,o){this._emitError(new v(r,o,e,t))}},{key:"_emitError",value:function _emitError(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays)if(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),shouldRetry(e,this._retryAttempt,this.options)){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout(function(){t.start()},r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function _emitSuccess(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function _emitProgress(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function _emitChunkComplete(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function _createUpload(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var r,o=encodeMetadata(this.options.metadata);""!==o&&t.setHeader("Upload-Metadata",o),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):r=this._sendRequest(t,null),r.then(function(r){if(inStatusCategory(r.getStatus(),200)){var o=r.getHeader("Location");if(null!=o){if(e.url=resolveUrl(e.options.endpoint,o),log("Created upload at ".concat(e.url)),"function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage().then(function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())})}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")}).catch(function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)})}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function _resumeUpload(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then(function(r){var o=r.getStatus();if(!inStatusCategory(o,200))return 423===o?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):(inStatusCategory(o,400)&&e._removeFromUrlStorage(),e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var n=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(n))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var i=parseInt(r.getHeader("Upload-Length"),10);!Number.isNaN(i)||e.options.uploadLengthDeferred?("function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),e._saveUploadInUrlStorage().then(function(){if(n===i)return e._emitProgress(i,i),void e._emitSuccess();e._offset=n,e._performUpload()})):e._emitHttpError(t,r,"tus: invalid or missing length value")}}).catch(function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)})}},{key:"_performUpload",value:function _performUpload(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then(function(r){inStatusCategory(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")}).catch(function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),r)}))}},{key:"_addChunkToRequest",value:function _addChunkToRequest(e){var t=this,r=this._offset,o=this._offset+this.options.chunkSize;return e.setProgressHandler(function(e){t._emitProgress(r+e,t._size)}),e.setHeader("Content-Type","application/offset+octet-stream"),(o===1/0||o>this._size)&&!this.options.uploadLengthDeferred&&(o=this._size),this._source.slice(r,o).then(function(r){var o=r.value,n=r.done,i=o&&o.size?o.size:0;t.options.uploadLengthDeferred&&n&&(t._size=t._offset+i,e.setHeader("Upload-Length",t._size));var a=t._offset+i;return!t.options.uploadLengthDeferred&&n&&a!==t._size?Promise.reject(new Error("upload was configured with a size of ".concat(t._size," bytes, but the source is done after ").concat(a," bytes"))):null===o?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,o))})}},{key:"_handleUploadResponse",value:function _handleUploadResponse(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function _openRequest(e,t){var r=openRequest(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function _removeFromUrlStorage(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(t){e._emitError(t)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function _saveUploadInUrlStorage(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then(function(t){e._urlStorageKey=t})}},{key:"_sendRequest",value:function _sendRequest(e){return sendRequest(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],[{key:"terminate",value:function terminate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=openRequest("DELETE",e,t);return sendRequest(r,null,t).then(function(e){if(204!==e.getStatus())throw new v("tus: unexpected response while terminating upload",null,r,e)}).catch(function(o){if(o instanceof v||(o=new v("tus: failed to terminate upload",o,r,null)),!shouldRetry(o,0,t))throw o;var n=t.retryDelays[0],i=t.retryDelays.slice(1),a=_objectSpread(_objectSpread({},t),{},{retryDelays:i});return new Promise(function(e){return setTimeout(e,n)}).then(function(){return BaseUpload.terminate(e,a)})})}}]),BaseUpload}();function encodeMetadata(e){return Object.entries(e).map(function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];return"".concat(r," ").concat(h(String(o)))}).join(",")}function inStatusCategory(e,t){return e>=t&&e<t+100}function openRequest(e,t,r){var o=r.httpStack.createRequest(e,t);o.setHeader("Tus-Resumable","1.0.0");var n=r.headers||{};if(Object.entries(n).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1];o.setHeader(r,n)}),r.addRequestId){var i=function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}();o.setHeader("X-Request-ID",i)}return o}function sendRequest(_x,e,t){return _sendRequest2.apply(this,arguments)}function _sendRequest2(){return _sendRequest2=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)})}}(_regeneratorRuntime().mark(function _callee(e,t,r){var o;return _regeneratorRuntime().wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if("function"!=typeof r.onBeforeRequest){n.next=3;break}return n.next=3,r.onBeforeRequest(e);case 3:return n.next=5,e.send(t);case 5:if(o=n.sent,"function"!=typeof r.onAfterResponse){n.next=9;break}return n.next=9,r.onAfterResponse(e,o);case 9:return n.abrupt("return",o);case 10:case"end":return n.stop()}},_callee)})),_sendRequest2.apply(this,arguments)}function shouldRetry(e,t,r){return!(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)&&(r&&"function"==typeof r.onShouldRetry?r.onShouldRetry(e,t,r):defaultOnShouldRetry(e))}function defaultOnShouldRetry(e){var t=e.originalResponse?e.originalResponse.getStatus():0;return(!inStatusCategory(t,400)||409===t||423===t)&&function isOnline(){var e=!0;return"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(e=!1),e}()}function resolveUrl(e,t){return new(y())(t,e).toString()}g.defaultOptions=_;const b=g;function noopUrlStorage_typeof(e){return noopUrlStorage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},noopUrlStorage_typeof(e)}function noopUrlStorage_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,noopUrlStorage_toPropertyKey(o.key),o)}}function noopUrlStorage_toPropertyKey(e){var t=function noopUrlStorage_toPrimitive(e,t){if("object"!==noopUrlStorage_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==noopUrlStorage_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===noopUrlStorage_typeof(t)?t:String(t)}var w=function(){function NoopUrlStorage(){!function noopUrlStorage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,NoopUrlStorage)}return function noopUrlStorage_createClass(e,t,r){return t&&noopUrlStorage_defineProperties(e.prototype,t),r&&noopUrlStorage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(NoopUrlStorage,[{key:"listAllUploads",value:function listAllUploads(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function findUploadsByFingerprint(e){return Promise.resolve([])}},{key:"removeUpload",value:function removeUpload(e){return Promise.resolve()}},{key:"addUpload",value:function addUpload(e,t){return Promise.resolve(null)}}]),NoopUrlStorage}();r(60739),r(33110);function urlStorage_typeof(e){return urlStorage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},urlStorage_typeof(e)}function urlStorage_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,urlStorage_toPropertyKey(o.key),o)}}function urlStorage_toPropertyKey(e){var t=function urlStorage_toPrimitive(e,t){if("object"!==urlStorage_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==urlStorage_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===urlStorage_typeof(t)?t:String(t)}var S=!1;try{S="localStorage"in window;var P="tusSupport",U=localStorage.getItem(P);localStorage.setItem(P,U),null===U&&localStorage.removeItem(P)}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;S=!1}var k=S,x=function(){function WebStorageUrlStorage(){!function urlStorage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WebStorageUrlStorage)}return function urlStorage_createClass(e,t,r){return t&&urlStorage_defineProperties(e.prototype,t),r&&urlStorage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(WebStorageUrlStorage,[{key:"findAllUploads",value:function findAllUploads(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function findUploadsByFingerprint(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function removeUpload(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function addUpload(e,t){var r=Math.round(1e12*Math.random()),o="tus::".concat(e,"::").concat(r);return localStorage.setItem(o,JSON.stringify(t)),Promise.resolve(o)}},{key:"_findEntries",value:function _findEntries(e){for(var t=[],r=0;r<localStorage.length;r++){var o=localStorage.key(r);if(0===o.indexOf(e))try{var n=JSON.parse(localStorage.getItem(o));n.urlStorageKey=o,t.push(n)}catch(e){}}return t}}]),WebStorageUrlStorage}();function httpStack_typeof(e){return httpStack_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},httpStack_typeof(e)}function httpStack_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function httpStack_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,httpStack_toPropertyKey(o.key),o)}}function httpStack_createClass(e,t,r){return t&&httpStack_defineProperties(e.prototype,t),r&&httpStack_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function httpStack_toPropertyKey(e){var t=function httpStack_toPrimitive(e,t){if("object"!==httpStack_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==httpStack_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===httpStack_typeof(t)?t:String(t)}var O=function(){function XHRHttpStack(){httpStack_classCallCheck(this,XHRHttpStack)}return httpStack_createClass(XHRHttpStack,[{key:"createRequest",value:function createRequest(e,t){return new R(e,t)}},{key:"getName",value:function getName(){return"XHRHttpStack"}}]),XHRHttpStack}(),R=function(){function Request(e,t){httpStack_classCallCheck(this,Request),this._xhr=new XMLHttpRequest,this._xhr.open(e,t,!0),this._method=e,this._url=t,this._headers={}}return httpStack_createClass(Request,[{key:"getMethod",value:function getMethod(){return this._method}},{key:"getURL",value:function getURL(){return this._url}},{key:"setHeader",value:function setHeader(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function getHeader(e){return this._headers[e]}},{key:"setProgressHandler",value:function setProgressHandler(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function send(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(r,o){e._xhr.onload=function(){r(new E(e._xhr))},e._xhr.onerror=function(e){o(e)},e._xhr.send(t)})}},{key:"abort",value:function abort(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function getUnderlyingObject(){return this._xhr}}]),Request}(),E=function(){function Response(e){httpStack_classCallCheck(this,Response),this._xhr=e}return httpStack_createClass(Response,[{key:"getStatus",value:function getStatus(){return this._xhr.status}},{key:"getHeader",value:function getHeader(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function getBody(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function getUnderlyingObject(){return this._xhr}}]),Response}();r(25428);const j=function isReactNative(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function uriToBlob(e){return new Promise(function(t,r){var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var e=o.response;t(e)},o.onerror=function(e){r(e)},o.open("GET",e),o.send()})}const C=function isCordova(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};r(54743),r(11745),r(38309),r(21489),r(48140),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(21903),r(91134),r(33206),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684),r(43250),r(10149),r(24082);function FileSource_typeof(e){return FileSource_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FileSource_typeof(e)}function FileSource_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,FileSource_toPropertyKey(o.key),o)}}function FileSource_toPropertyKey(e){var t=function FileSource_toPrimitive(e,t){if("object"!==FileSource_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==FileSource_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===FileSource_typeof(t)?t:String(t)}var L=function(){function FileSource(e){!function FileSource_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FileSource),this._file=e,this.size=e.size}return function FileSource_createClass(e,t,r){return t&&FileSource_defineProperties(e.prototype,t),r&&FileSource_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(FileSource,[{key:"slice",value:function slice(e,t){if(C())return function readAsByteArray(e){return new Promise(function(t,r){var o=new FileReader;o.onload=function(){var e=new Uint8Array(o.result);t({value:e})},o.onerror=function(e){r(e)},o.readAsArrayBuffer(e)})}(this._file.slice(e,t));var r=this._file.slice(e,t),o=t>=this.size;return Promise.resolve({value:r,done:o})}},{key:"close",value:function close(){}}]),FileSource}();function StreamSource_typeof(e){return StreamSource_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},StreamSource_typeof(e)}function StreamSource_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,StreamSource_toPropertyKey(o.key),o)}}function StreamSource_toPropertyKey(e){var t=function StreamSource_toPrimitive(e,t){if("object"!==StreamSource_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==StreamSource_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===StreamSource_typeof(t)?t:String(t)}function len(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var F=function(){function StreamSource(e){!function StreamSource_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,StreamSource),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return function StreamSource_createClass(e,t,r){return t&&StreamSource_defineProperties(e.prototype,t),r&&StreamSource_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(StreamSource,[{key:"slice",value:function slice(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function _readUntilEnoughDataOrDone(e,t){var r=this,o=t<=this._bufferOffset+len(this._buffer);if(this._done||o){var n=this._getDataFromBuffer(e,t),i=null==n&&this._done;return Promise.resolve({value:n,done:i})}return this._reader.read().then(function(o){var n=o.value;return o.done?r._done=!0:void 0===r._buffer?r._buffer=n:r._buffer=function concat(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,n),r._readUntilEnoughDataOrDone(e,t)})}},{key:"_getDataFromBuffer",value:function _getDataFromBuffer(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===len(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function close(){this._reader.cancel&&this._reader.cancel()}}]),StreamSource}();function fileReader_typeof(e){return fileReader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fileReader_typeof(e)}function fileReader_regeneratorRuntime(){fileReader_regeneratorRuntime=function _regeneratorRuntime(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function define(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function define(e,t,r){return e[t]=r}}function wrap(e,t,r,o){var i=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(i.prototype),u=new Context(o||[]);return n(a,"_invoke",{value:makeInvokeMethod(e,r,u)}),a}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=wrap;var s="suspendedStart",c="suspendedYield",f="executing",p="completed",h={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,a,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(values([])));v&&v!==r&&o.call(v,a)&&(d=v);var m=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){define(e,t,function(e){return this._invoke(t,e)})})}function AsyncIterator(e,t){function invoke(r,n,i,a){var u=tryCatch(e[r],e,n);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==fileReader_typeof(s)&&o.call(s,"__await")?t.resolve(s.__await).then(function(e){invoke("next",e,i,a)},function(e){invoke("throw",e,i,a)}):t.resolve(s).then(function(e){l.value=e,i(l)},function(e){return invoke("throw",e,i,a)})}a(u.arg)}var r;n(this,"_invoke",{value:function value(e,o){function callInvokeWithMethodAndArg(){return new t(function(t,r){invoke(e,o,t,r)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,o){var n=s;return function(i,a){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var u=o.delegate;if(u){var l=maybeInvokeDelegate(u,o);if(l){if(l===h)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===s)throw n=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=f;var d=tryCatch(t,r,o);if("normal"===d.type){if(n=o.done?p:c,d.arg===h)continue;return{value:d.arg,done:o.done}}"throw"===d.type&&(n=p,o.method="throw",o.arg=d.arg)}}}function maybeInvokeDelegate(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),h;var i=tryCatch(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function next(){for(;++n<t.length;)if(o.call(t,n))return next.value=t[n],next.done=!1,next;return next.value=e,next.done=!0,next};return i.next=i}}throw new TypeError(fileReader_typeof(t)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,n(m,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),n(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},t.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,function(){return this}),t.AsyncIterator=AsyncIterator,t.async=function(e,r,o,n,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(e,r,o,n),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},defineIteratorMethods(m),define(m,l,"Generator"),define(m,a,function(){return this}),define(m,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function next(){for(;r.length;){var e=r.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(o,n){return a.type="throw",a.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),h}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;resetTryEntry(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,o){return this.delegate={iterator:values(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),h}},t}function fileReader_asyncGeneratorStep(e,t,r,o,n,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(o,n)}function fileReader_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,fileReader_toPropertyKey(o.key),o)}}function fileReader_toPropertyKey(e){var t=function fileReader_toPrimitive(e,t){if("object"!==fileReader_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==fileReader_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fileReader_typeof(t)?t:String(t)}var T=function(){function FileReader(){!function fileReader_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FileReader)}var e;return function fileReader_createClass(e,t,r){return t&&fileReader_defineProperties(e.prototype,t),r&&fileReader_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(FileReader,[{key:"openFile",value:(e=function fileReader_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function _next(e){fileReader_asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){fileReader_asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)})}}(fileReader_regeneratorRuntime().mark(function _callee(e,t){var r;return fileReader_regeneratorRuntime().wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(!j()||!e||void 0===e.uri){o.next=11;break}return o.prev=1,o.next=4,uriToBlob(e.uri);case 4:return r=o.sent,o.abrupt("return",new L(r));case 8:throw o.prev=8,o.t0=o.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(o.t0));case 11:if("function"!=typeof e.slice||void 0===e.size){o.next=13;break}return o.abrupt("return",Promise.resolve(new L(e)));case 13:if("function"!=typeof e.read){o.next=18;break}if(t=Number(t),Number.isFinite(t)){o.next=17;break}return o.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return o.abrupt("return",Promise.resolve(new F(e,t)));case 18:return o.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return o.stop()}},_callee,null,[[1,8]])})),function openFile(_x,t){return e.apply(this,arguments)})}]),FileReader}();function browser_typeof(e){return browser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},browser_typeof(e)}function browser_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,browser_toPropertyKey(o.key),o)}}function browser_setPrototypeOf(e,t){return browser_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},browser_setPrototypeOf(e,t)}function browser_createSuper(e){var t=function browser_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=browser_getPrototypeOf(e);if(t){var n=browser_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function browser_possibleConstructorReturn(e,t){if(t&&("object"===browser_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function browser_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function browser_getPrototypeOf(e){return browser_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},browser_getPrototypeOf(e)}function browser_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function browser_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?browser_ownKeys(Object(r),!0).forEach(function(t){browser_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):browser_ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function browser_defineProperty(e,t,r){return(t=browser_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function browser_toPropertyKey(e){var t=function browser_toPrimitive(e,t){if("object"!==browser_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==browser_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===browser_typeof(t)?t:String(t)}var A=browser_objectSpread(browser_objectSpread({},b.defaultOptions),{},{httpStack:new O,fileReader:new T,urlStorage:k?new x:new w,fingerprint:function fingerprint(e,t){return j()?Promise.resolve(function reactNativeFingerprint(e,t){var r=e.exif?function hashCode(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),I=function(e){!function browser_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&browser_setPrototypeOf(e,t)}(Upload,e);var t=browser_createSuper(Upload);function Upload(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function browser_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Upload),r=browser_objectSpread(browser_objectSpread({},A),r),t.call(this,e,r)}return function browser_createClass(e,t,r){return t&&browser_defineProperties(e.prototype,t),r&&browser_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Upload,null,[{key:"terminate",value:function terminate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=browser_objectSpread(browser_objectSpread({},A),t),b.terminate(e,t)}}]),Upload}(b),D=window,N=D.XMLHttpRequest,q=D.Blob,H=N&&q&&"function"==typeof q.prototype.slice},48892:(e,t,r)=>{r(48598),r(44114),r(27495),r(25440);var o=Object.prototype.hasOwnProperty;function decode(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function encode(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function querystringify(e,t){t=t||"";var r,n,i=[];for(n in"string"!=typeof t&&(t="?"),e)if(o.call(e,n)){if((r=e[n])||null!=r&&!isNaN(r)||(r=""),n=encode(n),r=encode(r),null===n||null===r)continue;i.push(n+"="+r)}return i.length?t+i.join("&"):""},t.parse=function querystring(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var n=decode(t[1]),i=decode(t[2]);null===n||null===i||n in o||(o[n]=i)}return o}},59067:e=>{e.exports=function required(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}}}]);
/*! For license information please see tus.min.js.LICENSE.txt */
"use strict";(this.webpackChunkBetterMessages=this.webpackChunkBetterMessages||[]).push([["uppy-tus"],{244:(t,r,o)=>{var i=o(89990);o(76918),o(28706),o(25276),o(48598),o(8921),o(44114),o(34782),o(54554),o(13609),o(23288),o(26099),o(27495),o(90906),o(38781),o(25440),o(43359),o(88267),o(13611);var a=o(59067),u=o(48892),l=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,c=/[\n\r\t]/g,p=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,d=/:\d+$/,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,y=/^[a-zA-Z]:/;function trimLeft(t){return(t||"").toString().replace(l,"")}var v=[["#","hash"],["?","query"],function sanitize(t,r){return isSpecial(r.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],m={hash:1,query:1};function lolcation(t){var r,a=("undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:{}).location||{},u={},l=i(t=t||a);if("blob:"===t.protocol)u=new Url(unescape(t.pathname),{});else if("string"===l)for(r in u=new Url(t,{}),m)delete u[r];else if("object"===l){for(r in t)r in m||(u[r]=t[r]);void 0===u.slashes&&(u.slashes=p.test(t.href))}return u}function isSpecial(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function extractProtocol(t,r){t=(t=trimLeft(t)).replace(c,""),r=r||{};var o,i=h.exec(t),a=i[1]?i[1].toLowerCase():"",u=!!i[2],l=!!i[3],p=0;return u?l?(o=i[2]+i[3]+i[4],p=i[2].length+i[3].length):(o=i[2]+i[4],p=i[2].length):l?(o=i[3]+i[4],p=i[3].length):o=i[4],"file:"===a?p>=2&&(o=o.slice(2)):isSpecial(a)?o=i[4]:a?u&&(o=o.slice(2)):p>=2&&isSpecial(r.protocol)&&(o=i[4]),{protocol:a,slashes:u||isSpecial(a),slashesCount:p,rest:o}}function Url(t,r,o){if(t=(t=trimLeft(t)).replace(c,""),!(this instanceof Url))return new Url(t,r,o);var l,p,d,h,m,_,b=v.slice(),g=i(r),w=this,S=0;for("object"!==g&&"string"!==g&&(o=r,r=null),o&&"function"!=typeof o&&(o=u.parse),l=!(p=extractProtocol(t||"",r=lolcation(r))).protocol&&!p.slashes,w.slashes=p.slashes||l&&r.slashes,w.protocol=p.protocol||r.protocol||"",t=p.rest,("file:"===p.protocol&&(2!==p.slashesCount||y.test(t))||!p.slashes&&(p.protocol||p.slashesCount<2||!isSpecial(w.protocol)))&&(b[3]=[/(.*)/,"pathname"]);S<b.length;S++)"function"!=typeof(h=b[S])?(d=h[0],_=h[1],d!=d?w[_]=t:"string"==typeof d?~(m="@"===d?t.lastIndexOf(d):t.indexOf(d))&&("number"==typeof h[2]?(w[_]=t.slice(0,m),t=t.slice(m+h[2])):(w[_]=t.slice(m),t=t.slice(0,m))):(m=d.exec(t))&&(w[_]=m[1],t=t.slice(0,m.index)),w[_]=w[_]||l&&h[3]&&r[_]||"",h[4]&&(w[_]=w[_].toLowerCase())):t=h(t,w);o&&(w.query=o(w.query)),l&&r.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==r.pathname)&&(w.pathname=function resolve(t,r){if(""===t)return r;for(var o=(r||"/").split("/").slice(0,-1).concat(t.split("/")),i=o.length,a=o[i-1],u=!1,l=0;i--;)"."===o[i]?o.splice(i,1):".."===o[i]?(o.splice(i,1),l++):l&&(0===i&&(u=!0),o.splice(i,1),l--);return u&&o.unshift(""),"."!==a&&".."!==a||o.push(""),o.join("/")}(w.pathname,r.pathname)),"/"!==w.pathname.charAt(0)&&isSpecial(w.protocol)&&(w.pathname="/"+w.pathname),a(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(m=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,m),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(m+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&isSpecial(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}Url.prototype={set:function set(t,r,o){var i=this;switch(t){case"query":"string"==typeof r&&r.length&&(r=(o||u.parse)(r)),i[t]=r;break;case"port":i[t]=r,a(r,i.protocol)?r&&(i.host=i.hostname+":"+r):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=r,i.port&&(r+=":"+i.port),i.host=r;break;case"host":i[t]=r,d.test(r)?(r=r.split(":"),i.port=r.pop(),i.hostname=r.join(":")):(i.hostname=r,i.port="");break;case"protocol":i.protocol=r.toLowerCase(),i.slashes=!o;break;case"pathname":case"hash":if(r){var l="pathname"===t?"/":"#";i[t]=r.charAt(0)!==l?l+r:r}else i[t]=r;break;case"username":case"password":i[t]=encodeURIComponent(r);break;case"auth":var c=r.indexOf(":");~c?(i.username=r.slice(0,c),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=r.slice(c+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(r))}for(var p=0;p<v.length;p++){var h=v[p];h[4]&&(i[h[1]]=i[h[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&isSpecial(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function toString(t){t&&"function"==typeof t||(t=u.stringify);var r,o=this,a=o.host,l=o.protocol;l&&":"!==l.charAt(l.length-1)&&(l+=":");var c=l+(o.protocol&&o.slashes||isSpecial(o.protocol)?"//":"");return o.username?(c+=o.username,o.password&&(c+=":"+o.password),c+="@"):o.password?(c+=":"+o.password,c+="@"):"file:"!==o.protocol&&isSpecial(o.protocol)&&!a&&"/"!==o.pathname&&(c+="@"),(":"===a[a.length-1]||d.test(o.hostname)&&!o.port)&&(a+=":"),c+=a+o.pathname,(r="object"===i(o.query)?t(o.query):o.query)&&(c+="?"!==r.charAt(0)?"?"+r:r),o.hash&&(c+=o.hash),c}},Url.extractProtocol=extractProtocol,Url.location=lolcation,Url.trimLeft=trimLeft,Url.qs=u,t.exports=Url},18420:(t,r,o)=>{o.r(r),o.d(r,{"default":()=>J});var i=o(35754),a=o(18443),u=o(51531),l=o(58237),c=o(84285),p=o(68119),d=o(36858),h=o(31061),y=o(61792),v=(o(16280),o(52675),o(76918),o(2008),o(44114),o(67945),o(83851),o(81278),o(60825),o(54520),o(28706),o(51629),o(64346),o(23792),o(62062),o(94170),o(62010),o(69085),o(59904),o(84185),o(79432),o(26099),o(3362),o(96167),o(47764),o(98992),o(3949),o(81454),o(23500),o(62953),o(32744)),m=o(33111),_=o(80241);o(89463),o(2259),o(23418),o(54554),o(34782),o(23288),o(27495),o(90906),o(38781);function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var _n=0,i=function F(){};return{s:i,n:function n(){return _n>=t.length?{done:!0}:{done:!1,value:t[_n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return u=t.done,t},e:function e(t){l=!0,a=t},f:function f(){try{u||null==o.return||o.return()}finally{if(l)throw a}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=Array(r);o<r;o++)i[o]=t[o];return i}function _classPrivateFieldLooseBase(t,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw new TypeError("attempted to use private field on non-instance");return t}var b=0;function _classPrivateFieldLooseKey(t){return"__private_"+b+++"_"+t}var g=_classPrivateFieldLooseKey("uppy"),w=_classPrivateFieldLooseKey("events"),S=function(){return(0,c.A)(function EventManager(t){(0,l.A)(this,EventManager),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:[]}),_classPrivateFieldLooseBase(this,g)[g]=t},[{key:"on",value:function on(t,r){return _classPrivateFieldLooseBase(this,w)[w].push([t,r]),_classPrivateFieldLooseBase(this,g)[g].on(t,r)}},{key:"remove",value:function remove(){var t,r=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,w)[w].splice(0));try{for(r.s();!(t=r.n()).done;){var o=(0,_.A)(t.value,2),i=o[0],a=o[1];_classPrivateFieldLooseBase(this,g)[g].off(i,a)}}catch(t){r.e(t)}finally{r.f()}}},{key:"onFilePause",value:function onFilePause(t,r){this.on("upload-pause",function(o,i){t===o&&r(i)})}},{key:"onFileRemove",value:function onFileRemove(t,r){this.on("file-removed",function(o){t===o.id&&r(o.id)})}},{key:"onPause",value:function onPause(t,r){this.on("upload-pause",function(o,i){t===o&&r(i)})}},{key:"onRetry",value:function onRetry(t,r){this.on("upload-retry",function(o){t===o&&r()})}},{key:"onRetryAll",value:function onRetryAll(t,r){var o=this;this.on("retry-all",function(){_classPrivateFieldLooseBase(o,g)[g].getFile(t)&&r()})}},{key:"onPauseAll",value:function onPauseAll(t,r){var o=this;this.on("pause-all",function(){_classPrivateFieldLooseBase(o,g)[g].getFile(t)&&r()})}},{key:"onCancelAll",value:function onCancelAll(t,r){var o=this;this.on("cancel-all",function(){_classPrivateFieldLooseBase(o,g)[g].getFile(t)&&r.apply(void 0,arguments)})}},{key:"onResumeAll",value:function onResumeAll(t,r){var o=this;this.on("resume-all",function(){_classPrivateFieldLooseBase(o,g)[g].getFile(t)&&r()})}}])}();function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}const P=function(t){function NetworkError(t,r){var o;return(0,l.A)(this,NetworkError),void 0===r&&(r=null),(o=function _callSuper(t,r,o){return r=(0,d.A)(r),(0,p.A)(t,_isNativeReflectConstruct()?Reflect.construct(r,o||[],(0,d.A)(t).constructor):r.apply(t,o))}(this,NetworkError,["This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."])).cause=t,o.isNetworkError=!0,o.request=r,o}return(0,h.A)(NetworkError,t),(0,c.A)(NetworkError)}((0,o(81700).A)(Error));const R=function isNetworkError(t){return!!t&&(0!==t.readyState&&4!==t.readyState||0===t.status)};o(48980),o(25276),o(25428),o(122),o(76031);function RateLimitedQueue_classPrivateFieldLooseBase(t,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw new TypeError("attempted to use private field on non-instance");return t}var L=0;function RateLimitedQueue_classPrivateFieldLooseKey(t){return"__private_"+L+++"_"+t}function abortOn(t){var r=this;if(null!=t){var o,i=function abortPromise(){return r.abort(t.reason)};t.addEventListener("abort",i,{once:!0});var a=function removeAbortListener(){t.removeEventListener("abort",i)};null==(o=this.then)||o.call(this,a,a)}return this}var O=RateLimitedQueue_classPrivateFieldLooseKey("activeRequests"),U=RateLimitedQueue_classPrivateFieldLooseKey("queuedHandlers"),k=RateLimitedQueue_classPrivateFieldLooseKey("paused"),j=RateLimitedQueue_classPrivateFieldLooseKey("pauseTimer"),E=RateLimitedQueue_classPrivateFieldLooseKey("downLimit"),x=RateLimitedQueue_classPrivateFieldLooseKey("upperLimit"),C=RateLimitedQueue_classPrivateFieldLooseKey("rateLimitingTimer"),A=RateLimitedQueue_classPrivateFieldLooseKey("call"),B=RateLimitedQueue_classPrivateFieldLooseKey("queueNext"),T=RateLimitedQueue_classPrivateFieldLooseKey("next"),q=RateLimitedQueue_classPrivateFieldLooseKey("queue"),I=RateLimitedQueue_classPrivateFieldLooseKey("dequeue"),D=RateLimitedQueue_classPrivateFieldLooseKey("resume"),N=RateLimitedQueue_classPrivateFieldLooseKey("increaseLimit"),K=function(){return(0,c.A)(function RateLimitedQueue(t){var r=this;(0,l.A)(this,RateLimitedQueue),Object.defineProperty(this,I,{value:_dequeue2}),Object.defineProperty(this,q,{value:_queue2}),Object.defineProperty(this,T,{value:_next2}),Object.defineProperty(this,B,{value:_queueNext2}),Object.defineProperty(this,A,{value:_call2}),Object.defineProperty(this,O,{writable:!0,value:0}),Object.defineProperty(this,U,{writable:!0,value:[]}),Object.defineProperty(this,k,{writable:!0,value:!1}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:1}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:function value(){return r.resume()}}),Object.defineProperty(this,N,{writable:!0,value:function value(){if(RateLimitedQueue_classPrivateFieldLooseBase(r,k)[k])RateLimitedQueue_classPrivateFieldLooseBase(r,C)[C]=setTimeout(RateLimitedQueue_classPrivateFieldLooseBase(r,N)[N],0);else{RateLimitedQueue_classPrivateFieldLooseBase(r,E)[E]=r.limit,r.limit=Math.ceil((RateLimitedQueue_classPrivateFieldLooseBase(r,x)[x]+RateLimitedQueue_classPrivateFieldLooseBase(r,E)[E])/2);for(var t=RateLimitedQueue_classPrivateFieldLooseBase(r,E)[E];t<=r.limit;t++)RateLimitedQueue_classPrivateFieldLooseBase(r,B)[B]();RateLimitedQueue_classPrivateFieldLooseBase(r,x)[x]-RateLimitedQueue_classPrivateFieldLooseBase(r,E)[E]>3?RateLimitedQueue_classPrivateFieldLooseBase(r,C)[C]=setTimeout(RateLimitedQueue_classPrivateFieldLooseBase(r,N)[N],2e3):RateLimitedQueue_classPrivateFieldLooseBase(r,E)[E]=Math.floor(RateLimitedQueue_classPrivateFieldLooseBase(r,E)[E]/2)}}}),this.limit="number"!=typeof t||0===t?1/0:t},[{key:"run",value:function run(t,r){return!RateLimitedQueue_classPrivateFieldLooseBase(this,k)[k]&&RateLimitedQueue_classPrivateFieldLooseBase(this,O)[O]<this.limit?RateLimitedQueue_classPrivateFieldLooseBase(this,A)[A](t):RateLimitedQueue_classPrivateFieldLooseBase(this,q)[q](t,r)}},{key:"wrapSyncFunction",value:function wrapSyncFunction(t,r){var o=this;return function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];var l=o.run(function(){return t.apply(void 0,a),queueMicrotask(function(){return l.done()}),function(){}},r);return{abortOn,abort:function abort(){l.abort()}}}}},{key:"wrapPromiseFunction",value:function wrapPromiseFunction(t,r){var o=this;return function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];var l,c=new Promise(function(i,u){l=o.run(function(){var r,o;try{o=Promise.resolve(t.apply(void 0,a))}catch(t){o=Promise.reject(t)}return o.then(function(t){r?u(r):(l.done(),i(t))},function(t){r?u(r):(l.done(),u(t))}),function(t){r=function createCancelError(t){return new Error("Cancelled",{cause:t})}(t)}},r)});return c.abort=function(t){l.abort(t)},c.abortOn=abortOn,c}}},{key:"resume",value:function resume(){RateLimitedQueue_classPrivateFieldLooseBase(this,k)[k]=!1,clearTimeout(RateLimitedQueue_classPrivateFieldLooseBase(this,j)[j]);for(var t=0;t<this.limit;t++)RateLimitedQueue_classPrivateFieldLooseBase(this,B)[B]()}},{key:"pause",value:function pause(t){void 0===t&&(t=null),RateLimitedQueue_classPrivateFieldLooseBase(this,k)[k]=!0,clearTimeout(RateLimitedQueue_classPrivateFieldLooseBase(this,j)[j]),null!=t&&(RateLimitedQueue_classPrivateFieldLooseBase(this,j)[j]=setTimeout(RateLimitedQueue_classPrivateFieldLooseBase(this,D)[D],t))}},{key:"rateLimit",value:function rateLimit(t){clearTimeout(RateLimitedQueue_classPrivateFieldLooseBase(this,C)[C]),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&(RateLimitedQueue_classPrivateFieldLooseBase(this,x)[x]=this.limit-1,this.limit=RateLimitedQueue_classPrivateFieldLooseBase(this,E)[E],RateLimitedQueue_classPrivateFieldLooseBase(this,C)[C]=setTimeout(RateLimitedQueue_classPrivateFieldLooseBase(this,N)[N],t))}},{key:"isPaused",get:function get(){return RateLimitedQueue_classPrivateFieldLooseBase(this,k)[k]}}])}();function _call2(t){var r=this;RateLimitedQueue_classPrivateFieldLooseBase(this,O)[O]+=1;var o,i=!1;try{o=t()}catch(t){throw RateLimitedQueue_classPrivateFieldLooseBase(this,O)[O]-=1,t}return{abort:function abort(t){i||(i=!0,RateLimitedQueue_classPrivateFieldLooseBase(r,O)[O]-=1,null==o||o(t),RateLimitedQueue_classPrivateFieldLooseBase(r,B)[B]())},done:function done(){i||(i=!0,RateLimitedQueue_classPrivateFieldLooseBase(r,O)[O]-=1,RateLimitedQueue_classPrivateFieldLooseBase(r,B)[B]())}}}function _queueNext2(){var t=this;queueMicrotask(function(){return RateLimitedQueue_classPrivateFieldLooseBase(t,T)[T]()})}function _next2(){if(!(RateLimitedQueue_classPrivateFieldLooseBase(this,k)[k]||RateLimitedQueue_classPrivateFieldLooseBase(this,O)[O]>=this.limit)&&0!==RateLimitedQueue_classPrivateFieldLooseBase(this,U)[U].length){var t=RateLimitedQueue_classPrivateFieldLooseBase(this,U)[U].shift();if(null==t)throw new Error("Invariant violation: next is null");var r=RateLimitedQueue_classPrivateFieldLooseBase(this,A)[A](t.fn);t.abort=r.abort,t.done=r.done}}function _queue2(t,r){var o=this,i={fn:t,priority:(null==r?void 0:r.priority)||0,abort:function abort(){RateLimitedQueue_classPrivateFieldLooseBase(o,I)[I](i)},done:function done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")}},a=RateLimitedQueue_classPrivateFieldLooseBase(this,U)[U].findIndex(function(t){return i.priority>t.priority});return-1===a?RateLimitedQueue_classPrivateFieldLooseBase(this,U)[U].push(i):RateLimitedQueue_classPrivateFieldLooseBase(this,U)[U].splice(a,0,i),i}function _dequeue2(t){var r=RateLimitedQueue_classPrivateFieldLooseBase(this,U)[U].indexOf(t);-1!==r&&RateLimitedQueue_classPrivateFieldLooseBase(this,U)[U].splice(r,1)}Symbol("__queue");function has(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function filterNonFailedFiles(t){return t.filter(function(t){return!function hasError(t){return"error"in t&&!!t.error}(t)})}function filterFilesToEmitUploadStarted(t){return t.filter(function(t){var r;return!(null!=(r=t.progress)&&r.uploadStarted&&t.isRestored)})}o(48598);function getFingerprint(t){return function(r,o){if(function isCordova(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}()||function isReactNative(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}())return m.defaultOptions.fingerprint(r,o);var i=["tus",t.id,o.endpoint].join("-");return Promise.resolve(i)}}var Q=["onShouldRetry","onBeforeRequest"];function ownKeys(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(o),!0).forEach(function(r){(0,u.A)(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}function lib_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(lib_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function lib_classPrivateFieldLooseBase(t,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw new TypeError("attempted to use private field on non-instance");return t}var z=0;function lib_classPrivateFieldLooseKey(t){return"__private_"+z+++"_"+t}var H={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},G={limit:20,retryDelays:H.retryDelays,withCredentials:!1},M=lib_classPrivateFieldLooseKey("retryDelayIterator"),W=lib_classPrivateFieldLooseKey("uploadLocalFile"),X=lib_classPrivateFieldLooseKey("getCompanionClientArgs"),$=lib_classPrivateFieldLooseKey("uploadFiles"),Y=lib_classPrivateFieldLooseKey("handleUpload"),J=function(t){function Tus(t,r){var o,i,u,c;if((0,l.A)(this,Tus),o=function lib_callSuper(t,r,o){return r=(0,d.A)(r),(0,p.A)(t,lib_isNativeReflectConstruct()?Reflect.construct(r,o||[],(0,d.A)(t).constructor):r.apply(t,o))}(this,Tus,[t,_objectSpread(_objectSpread({},G),r)]),Object.defineProperty(o,$,{value:_uploadFiles2}),Object.defineProperty(o,X,{value:_getCompanionClientArgs2}),Object.defineProperty(o,W,{value:_uploadLocalFile2}),Object.defineProperty(o,M,{writable:!0,value:void 0}),Object.defineProperty(o,Y,{writable:!0,value:(c=(0,a.A)(y.mark(function _callee(t){var r;return y.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==t.length){i.next=1;break}return o.uppy.log("[Tus] No files to upload"),i.abrupt("return");case 1:return 0===o.opts.limit&&o.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),o.uppy.log("[Tus] Uploading..."),r=o.uppy.getFilesByIds(t),i.next=2,lib_classPrivateFieldLooseBase(o,$)[$](r);case 2:case"end":return i.stop()}},_callee)})),function value(_x){return c.apply(this,arguments)})}),o.type="uploader",o.id=o.opts.id||"Tus",void 0===(null==r?void 0:r.allowedMetaFields)&&"metaFields"in o.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in r)throw new Error("The `autoRetry` option was deprecated and has been removed.");return o.requests=null!=(i=o.opts.rateLimitedQueue)?i:new K(o.opts.limit),lib_classPrivateFieldLooseBase(o,M)[M]=null==(u=o.opts.retryDelays)?void 0:u.values(),o.uploaders=Object.create(null),o.uploaderEvents=Object.create(null),o.handleResetProgress=o.handleResetProgress.bind(o),o}return(0,h.A)(Tus,t),(0,c.A)(Tus,[{key:"handleResetProgress",value:function handleResetProgress(){var t=_objectSpread({},this.uppy.getState().files);Object.keys(t).forEach(function(r){var o;if(null!=(o=t[r])&&null!=(o=o.tus)&&o.uploadUrl){var i=_objectSpread({},t[r].tus);delete i.uploadUrl,t[r]=_objectSpread(_objectSpread({},t[r]),{},{tus:i})}}),this.uppy.setState({files:t})}},{key:"resetUploaderReferences",value:function resetUploaderReferences(t,r){var o=this.uploaders[t];o&&(o.abort(),null!=r&&r.abort&&o.abort(!0),this.uploaders[t]=null),this.uploaderEvents[t]&&(this.uploaderEvents[t].remove(),this.uploaderEvents[t]=null)}},{key:"onReceiveUploadUrl",value:function onReceiveUploadUrl(t,r){var o=this.uppy.getFile(t.id);o&&(o.tus&&o.tus.uploadUrl===r||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(o.id,{tus:_objectSpread(_objectSpread({},o.tus),{},{uploadUrl:r})})))}},{key:"install",value:function install(){this.uppy.setState({capabilities:_objectSpread(_objectSpread({},this.uppy.getState().capabilities),{},{resumableUploads:!0})}),this.uppy.addUploader(lib_classPrivateFieldLooseBase(this,Y)[Y]),this.uppy.on("reset-progress",this.handleResetProgress)}},{key:"uninstall",value:function uninstall(){this.uppy.setState({capabilities:_objectSpread(_objectSpread({},this.uppy.getState().capabilities),{},{resumableUploads:!1})}),this.uppy.removeUploader(lib_classPrivateFieldLooseBase(this,Y)[Y])}}])}(v.A);function _uploadLocalFile2(t){var r=this,o=this;return this.resetUploaderReferences(t.id),new Promise(function(u,l){var c,p,d,h=_objectSpread(_objectSpread({},r.opts),t.tus||{});"function"==typeof h.headers&&(h.headers=h.headers(t));var v=h.onShouldRetry,_=h.onBeforeRequest,b=(0,i.A)(h,Q),g=_objectSpread(_objectSpread({},H),b);g.fingerprint=getFingerprint(t),g.onBeforeRequest=function(){var o=(0,a.A)(y.mark(function _callee2(o){var i,a,u;return y.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o.getUnderlyingObject().withCredentials=!!h.withCredentials,"function"==typeof _&&(i=_(o,t)),!has(c,"shouldBeRequeued")){l.next=3;break}if(c.shouldBeRequeued){l.next=1;break}return l.abrupt("return",Promise.reject());case 1:return u=new Promise(function(t){a=t}),c=r.requests.run(function(){return t.isPaused&&c.abort(),a(),function(){}}),l.next=2,Promise.all([u,i]);case 2:return l.abrupt("return",void 0);case 3:return l.abrupt("return",i);case 4:case"end":return l.stop()}},_callee2)}));return function(t){return o.apply(this,arguments)}}(),g.onError=function(o){var i;r.uppy.log(o);var a=null!=o.originalRequest?o.originalRequest.getUnderlyingObject():null;R(a)&&(o=new P(o,a)),r.resetUploaderReferences(t.id),null==(i=c)||i.abort(),r.uppy.emit("upload-error",t,o),"function"==typeof h.onError&&h.onError(o),l(o)},g.onProgress=function(o,i){r.onReceiveUploadUrl(t,d.url),"function"==typeof h.onProgress&&h.onProgress(o,i),r.uppy.emit("upload-progress",r.uppy.getFile(t.id),{uploader:r,bytesUploaded:o,bytesTotal:i})},g.onSuccess=function(){var o,i={uploadURL:null!=(o=d.url)?o:void 0,status:200,body:{}};if(r.resetUploaderReferences(t.id),c.done(),r.uppy.emit("upload-success",r.uppy.getFile(t.id),i),d.url){var a=d.file.name;r.uppy.log("Download ".concat(a," from ").concat(d.url))}"function"==typeof h.onSuccess&&h.onSuccess(),u(d)};var w=function defaultOnShouldRetry(t){var o,i=null==t||null==(o=t.originalResponse)?void 0:o.getStatus();if(429===i){if(!r.requests.isPaused){var a,u=null==(a=lib_classPrivateFieldLooseBase(r,M)[M])?void 0:a.next();if(null==u||u.done)return!1;r.requests.rateLimit(u.value)}}else{if(null!=i&&i>400&&i<500&&409!==i&&423!==i)return!1;"undefined"!=typeof navigator&&!1===navigator.onLine&&(r.requests.isPaused||(r.requests.pause(),window.addEventListener("online",function(){r.requests.resume()},{once:!0})))}return c.abort(),c={shouldBeRequeued:!0,abort:function abort(){this.shouldBeRequeued=!1},done:function done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn:function fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};g.onShouldRetry=null!=v?function(t,r){return v(t,r,h,w)}:w;var L=function copyProp(t,r,o){has(t,r)&&!has(t,o)&&(t[o]=t[r])},O={};(Array.isArray(h.allowedMetaFields)?h.allowedMetaFields:Object.keys(t.meta)).forEach(function(r){O[r]=String(t.meta[r])}),L(O,"type","filetype"),L(O,"name","filename"),g.metadata=O,d=new m.Upload(t.data,g),r.uploaders[t.id]=d;var U=new S(r.uppy);r.uploaderEvents[t.id]=U,p=function qRequest(){return t.isPaused||d.start(),function(){}},d.findPreviousUploads().then(function(o){var i=o[0];i&&(r.uppy.log("[Tus] Resuming upload of ".concat(t.id," started at ").concat(i.creationTime)),d.resumeFromPreviousUpload(i))}),c=r.requests.run(p),U.onFileRemove(t.id,function(o){c.abort(),r.resetUploaderReferences(t.id,{abort:!!d.url}),u("upload ".concat(o," was removed"))}),U.onPause(t.id,function(t){c.abort(),t?d.abort():c=r.requests.run(p)}),U.onPauseAll(t.id,function(){c.abort(),d.abort()}),U.onCancelAll(t.id,function(r){"user"===(void 0===r?{}:r).reason&&(c.abort(),o.resetUploaderReferences(t.id,{abort:!!d.url})),u("upload ".concat(t.id," was canceled"))}),U.onResumeAll(t.id,function(){c.abort(),t.error&&d.abort(),c=r.requests.run(p)})}).catch(function(o){throw r.uppy.emit("upload-error",t,o),o})}function _getCompanionClientArgs2(t){var r,o=_objectSpread({},this.opts);return t.tus&&Object.assign(o,t.tus),_objectSpread(_objectSpread({},null==(r=t.remote)?void 0:r.body),{},{endpoint:o.endpoint,uploadUrl:o.uploadUrl,protocol:"tus",size:t.data.size,headers:o.headers,metadata:t.meta})}function _uploadFiles2(t){return _uploadFiles3.apply(this,arguments)}function _uploadFiles3(){return(_uploadFiles3=(0,a.A)(y.mark(function _callee3(t){var r,o,i=this;return y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=filterNonFailedFiles(t),o=filterFilesToEmitUploadStarted(r),this.uppy.emit("upload-start",o),a.next=1,Promise.allSettled(r.map(function(t){if(t.isRemote){var r=new AbortController,o=function removedHandler(o){o.id===t.id&&r.abort()};i.uppy.on("file-removed",o);var a=i.uppy.getRequestClientForFile(t).uploadRemoteFile(t,lib_classPrivateFieldLooseBase(i,X)[X](t),{signal:r.signal,getQueue:function getQueue(){return i.requests}});return i.requests.wrapSyncFunction(function(){i.uppy.off("file-removed",o)},{priority:-1})(),a}return lib_classPrivateFieldLooseBase(i,W)[W](t)}));case 1:case"end":return a.stop()}},_callee3,this)}))).apply(this,arguments)}J.VERSION="3.5.4"},31073:(t,r,o)=>{o(70511)("split")},32744:(t,r,o)=>{o.d(r,{A:()=>c});o(52675),o(2008),o(51629),o(44114),o(67945),o(84185),o(83851),o(81278),o(79432),o(26099),o(98992),o(54520),o(3949),o(23500);var i=o(51531),a=o(58237),u=o(84285),l=(o(16280),o(76918),o(94170),o(54024));function ownKeys(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(o),!0).forEach(function(r){(0,i.A)(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}var c=function(){return(0,u.A)(function BasePlugin(t,r){(0,a.A)(this,BasePlugin),this.uppy=t,this.opts=null!=r?r:{}},[{key:"getPluginState",value:function getPluginState(){var t=this.uppy.getState().plugins;return(null==t?void 0:t[this.id])||{}}},{key:"setPluginState",value:function setPluginState(t){if(t){var r=this.uppy.getState().plugins;this.uppy.setState({plugins:_objectSpread(_objectSpread({},r),{},(0,i.A)({},this.id,_objectSpread(_objectSpread({},r[this.id]),t)))})}}},{key:"setOptions",value:function setOptions(t){this.opts=_objectSpread(_objectSpread({},this.opts),t),this.setPluginState(void 0),this.i18nInit()}},{key:"i18nInit",value:function i18nInit(){var t=new l.A([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}},{key:"addTarget",value:function addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}},{key:"install",value:function install(){}},{key:"uninstall",value:function uninstall(){}},{key:"update",value:function update(t){}},{key:"afterUpdate",value:function afterUpdate(){}}])}()},33111:(t,r,o)=>{o.r(r),o.d(r,{DefaultHttpStack:()=>x,DetailedError:()=>g,Upload:()=>K,canStoreURLs:()=>j,defaultOptions:()=>N,enableDebugLog:()=>enableDebugLog,isSupported:()=>G});o(52675),o(89463),o(2259),o(45700),o(16280),o(76918),o(2008),o(51629),o(23792),o(44114),o(34782),o(89572),o(94170),o(2892),o(59904),o(67945),o(84185),o(83851),o(81278),o(40875),o(79432),o(63548),o(10287),o(26099),o(60825),o(15472),o(47764),o(98992),o(54520),o(3949),o(23500),o(62953),o(28706),o(23418),o(64346),o(48598),o(62062),o(94490),o(23288),o(62010),o(40150),o(5506),o(58940),o(3362),o(27495),o(90906),o(38781),o(81454),o(76031);const i="function"==typeof btoa,a="function"==typeof Buffer,u=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),l=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=((t=>{let r={};t.forEach((t,o)=>r[t]=o)})(l),String.fromCharCode.bind(String)),p=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_")),btoaPolyfill=t=>{let r,o,i,a,u="";const c=t.length%3;for(let c=0;c<t.length;){if((o=t.charCodeAt(c++))>255||(i=t.charCodeAt(c++))>255||(a=t.charCodeAt(c++))>255)throw new TypeError("invalid character found");r=o<<16|i<<8|a,u+=l[r>>18&63]+l[r>>12&63]+l[r>>6&63]+l[63&r]}return c?u.slice(0,c-3)+"===".substring(c):u},d=i?t=>btoa(t):a?t=>Buffer.from(t,"binary").toString("base64"):btoaPolyfill,h=a?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let o=0,i=t.length;o<i;o+=4096)r.push(c.apply(null,t.subarray(o,o+4096)));return d(r.join(""))},cb_utob=t=>{if(t.length<2)return(r=t.charCodeAt(0))<128?t:r<2048?c(192|r>>>6)+c(128|63&r):c(224|r>>>12&15)+c(128|r>>>6&63)+c(128|63&r);var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|r>>>18&7)+c(128|r>>>12&63)+c(128|r>>>6&63)+c(128|63&r)},y=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=t=>t.replace(y,cb_utob),v=a?t=>Buffer.from(t,"utf8").toString("base64"):u?t=>h(u.encode(t)):t=>d(utob(t)),encode=(t,r=!1)=>r?p(v(t)):v(t),m=encode;var _=o(244),b=o.n(_);o(25276),o(36033);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _createSuper(t){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var o,i=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(r){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(t,r,o){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(t,r,o){var i=[null];i.push.apply(i,r);var a=new(Function.bind.apply(t,i));return o&&_setPrototypeOf(a,o.prototype),a},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}const g=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(DetailedError,t);var r=_createSuper(DetailedError);function DetailedError(t){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DetailedError),(o=r.call(this,t)).originalRequest=a,o.originalResponse=u,o.causingError=i,null!=i&&(t+=", caused by ".concat(i.toString())),null!=a){var l=a.getHeader("X-Request-ID")||"n/a",c=a.getMethod(),p=a.getURL(),d=u?u.getStatus():"n/a",h=u?u.getBody()||"":"n/a";t+=", originated from request (method: ".concat(c,", url: ").concat(p,", response code: ").concat(d,", response text: ").concat(h,", request id: ").concat(l,")")}return o.message=t,o}return function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(DetailedError)}(_wrapNativeSuper(Error));var w=!1;function enableDebugLog(){w=!0}function log(t){w&&console.log(t)}o(25440);function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return r};var t,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,o){t[r]=o.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",p=u.toStringTag||"@@toStringTag";function define(t,r,o){return Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,o){return t[r]=o}}function wrap(t,r,o,i){var u=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(u.prototype),c=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(t,o,c)}),l}function tryCatch(t,r,o){try{return{type:"normal",arg:t.call(r,o)}}catch(t){return{type:"throw",arg:t}}}r.wrap=wrap;var d="suspendedStart",h="suspendedYield",y="executing",v="completed",m={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var _={};define(_,l,function(){return this});var b=Object.getPrototypeOf,g=b&&b(b(values([])));g&&g!==o&&i.call(g,l)&&(_=g);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(_);function defineIteratorMethods(t){["next","throw","return"].forEach(function(r){define(t,r,function(t){return this._invoke(r,t)})})}function AsyncIterator(t,r){function invoke(o,a,u,l){var c=tryCatch(t[o],t,a);if("throw"!==c.type){var p=c.arg,d=p.value;return d&&"object"==upload_typeof(d)&&i.call(d,"__await")?r.resolve(d.__await).then(function(t){invoke("next",t,u,l)},function(t){invoke("throw",t,u,l)}):r.resolve(d).then(function(t){p.value=t,u(p)},function(t){return invoke("throw",t,u,l)})}l(c.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r(function(r,o){invoke(t,i,r,o)})}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(r,o,i){var a=d;return function(u,l){if(a===y)throw new Error("Generator is already running");if(a===v){if("throw"===u)throw l;return{value:t,done:!0}}for(i.method=u,i.arg=l;;){var c=i.delegate;if(c){var p=maybeInvokeDelegate(c,i);if(p){if(p===m)continue;return p}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===d)throw a=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=y;var _=tryCatch(r,o,i);if("normal"===_.type){if(a=i.done?v:h,_.arg===m)continue;return{value:_.arg,done:i.done}}"throw"===_.type&&(a=v,i.method="throw",i.arg=_.arg)}}}function maybeInvokeDelegate(r,o){var i=o.method,a=r.iterator[i];if(a===t)return o.delegate=null,"throw"===i&&r.iterator.return&&(o.method="return",o.arg=t,maybeInvokeDelegate(r,o),"throw"===o.method)||"return"!==i&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var u=tryCatch(a,r.iterator,o.arg);if("throw"===u.type)return o.method="throw",o.arg=u.arg,o.delegate=null,m;var l=u.arg;return l?l.done?(o[r.resultName]=l.value,o.next=r.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,m):l:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,m)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(r){if(r||""===r){var o=r[l];if(o)return o.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,u=function next(){for(;++a<r.length;)if(i.call(r,a))return next.value=r[a],next.done=!1,next;return next.value=t,next.done=!0,next};return u.next=u}}throw new TypeError(upload_typeof(r)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,p,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,p,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this}),r.AsyncIterator=AsyncIterator,r.async=function(t,o,i,a,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(t,o,i,a),u);return r.isGeneratorFunction(o)?l:l.next().then(function(t){return t.done?t.value:l.next()})},defineIteratorMethods(w),define(w,p,"Generator"),define(w,l,function(){return this}),define(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var r=Object(t),o=[];for(var i in r)o.push(i);return o.reverse(),function next(){for(;o.length;){var t=o.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},r.values=values,Context.prototype={constructor:Context,reset:function reset(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!r)for(var o in this)"t"===o.charAt(0)&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(r){if(this.done)throw r;var o=this;function handle(i,a){return l.type="throw",l.arg=r,o.next=i,a&&(o.method="next",o.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],l=u.completion;if("root"===u.tryLoc)return handle("end");if(u.tryLoc<=this.prev){var c=i.call(u,"catchLoc"),p=i.call(u,"finallyLoc");if(c&&p){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0);if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var u=a;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,m):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),m}},"catch":function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc===t){var i=o.completion;if("throw"===i.type){var a=i.arg;resetTryEntry(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(r,o,i){return this.delegate={iterator:values(r),resultName:o,nextLoc:i},"next"===this.method&&(this.arg=t),m}},r}function asyncGeneratorStep(t,r,o,i,a,u,l){try{var c=t[u](l),p=c.value}catch(t){return void o(t)}c.done?r(p):Promise.resolve(p).then(i,a)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var i,a,u,l,c=[],p=!0,d=!1;try{if(u=(o=o.call(t)).next,0===r){if(Object(o)!==o)return;p=!1}else for(;!(p=(i=u.call(o)).done)&&(c.push(i.value),c.length!==r);p=!0);}catch(t){d=!0,a=t}finally{try{if(!p&&null!=o.return&&(l=o.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function upload_typeof(t){return upload_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},upload_typeof(t)}function ownKeys(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(o),!0).forEach(function(r){_defineProperty(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}function _defineProperty(t,r,o){return(r=upload_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function upload_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,upload_toPropertyKey(i.key),i)}}function upload_toPropertyKey(t){var r=function upload_toPrimitive(t,r){if("object"!==upload_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==upload_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===upload_typeof(r)?r:String(r)}var S={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:defaultOnShouldRetry,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},P=function(){function BaseUpload(t,r){!function upload_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseUpload),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return function upload_createClass(t,r,o){return r&&upload_defineProperties(t.prototype,r),o&&upload_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(BaseUpload,[{key:"findPreviousUploads",value:function findPreviousUploads(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(r){return t._urlStorage.findUploadsByFingerprint(r)})}},{key:"resumeFromPreviousUpload",value:function resumeFromPreviousUpload(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function start(){var t=this,r=this.file;if(r)if(this.options.endpoint||this.options.uploadUrl||this.url){var o=this.options.retryDelays;if(null==o||"[object Array]"===Object.prototype.toString.call(o)){if(this.options.parallelUploads>1)for(var i=0,a=["uploadUrl","uploadSize","uploadLengthDeferred"];i<a.length;i++){var u=a[i];if(this.options[u])return void this._emitError(new Error("tus: cannot use the ".concat(u," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(r,this.options).then(function(o){return log(null==o?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(o)),t._fingerprint=o,t._source?t._source:t.options.fileReader.openFile(r,t.options.chunkSize)}).then(function(r){if(t._source=r,t.options.uploadLengthDeferred)t._size=null;else if(null!=t.options.uploadSize){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size))return void t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(t._size=t._source.size,null==t._size)return void t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()}).catch(function(r){t._emitError(r)})}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function _startParallelUpload(){var t,r=this,o=this._size,i=0;this._parallelUploads=[];var a=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,u=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function splitSizeIntoParts(t,r){for(var o=Math.floor(t/r),i=[],a=0;a<r;a++)i.push({start:o*a,end:o*(a+1)});return i[r-1].end=t,i}(this._source.size,a);this._parallelUploadUrls&&u.forEach(function(t,o){t.uploadUrl=r._parallelUploadUrls[o]||null}),this._parallelUploadUrls=new Array(u.length);var l,c=u.map(function(t,a){var l=0;return r._source.slice(t.start,t.end).then(function(c){var p=c.value;return new Promise(function(c,d){var h=_objectSpread(_objectSpread({},r.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:_objectSpread(_objectSpread({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:c,onError:d,onProgress:function onProgress(t){i=i-l+t,l=t,r._emitProgress(i,o)},onUploadUrlAvailable:function onUploadUrlAvailable(){r._parallelUploadUrls[a]=y.url,r._parallelUploadUrls.filter(function(t){return Boolean(t)}).length===u.length&&r._saveUploadInUrlStorage()}}),y=new BaseUpload(p,h);y.start(),r._parallelUploads.push(y)})})});Promise.all(c).then(function(){(l=r._openRequest("POST",r.options.endpoint)).setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var t=encodeMetadata(r.options.metadata);return""!==t&&l.setHeader("Upload-Metadata",t),r._sendRequest(l,null)}).then(function(t){if(inStatusCategory(t.getStatus(),200)){var o=t.getHeader("Location");null!=o?(r.url=resolveUrl(r.options.endpoint,o),log("Created upload at ".concat(r.url)),r._emitSuccess()):r._emitHttpError(l,t,"tus: invalid or missing Location header")}else r._emitHttpError(l,t,"tus: unexpected response while creating upload")}).catch(function(t){r._emitError(t)})}},{key:"_startSingleUpload",value:function _startSingleUpload(){return this._aborted=!1,null!=this.url?(log("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(log("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(log("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function abort(t){var r=this;return null!=this._parallelUploads&&this._parallelUploads.forEach(function(r){r.abort(t)}),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?BaseUpload.terminate(this.url,this.options).then(function(){return r._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function _emitHttpError(t,r,o,i){this._emitError(new g(o,i,t,r))}},{key:"_emitError",value:function _emitError(t){var r=this;if(!this._aborted){if(null!=this.options.retryDelays)if(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),shouldRetry(t,this._retryAttempt,this.options)){var o=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout(function(){r.start()},o))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function _emitSuccess(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function _emitProgress(t,r){"function"==typeof this.options.onProgress&&this.options.onProgress(t,r)}},{key:"_emitChunkComplete",value:function _emitChunkComplete(t,r,o){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,r,o)}},{key:"_createUpload",value:function _createUpload(){var t=this;if(this.options.endpoint){var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length",1):r.setHeader("Upload-Length",this._size);var o,i=encodeMetadata(this.options.metadata);""!==i&&r.setHeader("Upload-Metadata",i),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,o=this._addChunkToRequest(r)):o=this._sendRequest(r,null),o.then(function(o){if(inStatusCategory(o.getStatus(),200)){var i=o.getHeader("Location");if(null!=i){if(t.url=resolveUrl(t.options.endpoint,i),log("Created upload at ".concat(t.url)),"function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),0===t._size)return t._emitSuccess(),void t._source.close();t._saveUploadInUrlStorage().then(function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(r,o):(t._offset=0,t._performUpload())})}else t._emitHttpError(r,o,"tus: invalid or missing Location header")}else t._emitHttpError(r,o,"tus: unexpected response while creating upload")}).catch(function(o){t._emitHttpError(r,null,"tus: failed to create upload",o)})}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function _resumeUpload(){var t=this,r=this._openRequest("HEAD",this.url);this._sendRequest(r,null).then(function(o){var i=o.getStatus();if(!inStatusCategory(i,200))return 423===i?void t._emitHttpError(r,o,"tus: upload is currently locked; retry later"):(inStatusCategory(i,400)&&t._removeFromUrlStorage(),t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(r,o,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var a=parseInt(o.getHeader("Upload-Offset"),10);if(Number.isNaN(a))t._emitHttpError(r,o,"tus: invalid or missing offset value");else{var u=parseInt(o.getHeader("Upload-Length"),10);!Number.isNaN(u)||t.options.uploadLengthDeferred?("function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(a===u)return t._emitProgress(u,u),void t._emitSuccess();t._offset=a,t._performUpload()})):t._emitHttpError(r,o,"tus: invalid or missing length value")}}).catch(function(o){t._emitHttpError(r,null,"tus: failed to resume upload",o)})}},{key:"_performUpload",value:function _performUpload(){var t,r=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then(function(o){inStatusCategory(o.getStatus(),200)?r._handleUploadResponse(t,o):r._emitHttpError(t,o,"tus: unexpected response while uploading chunk")}).catch(function(o){r._aborted||r._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(r._offset),o)}))}},{key:"_addChunkToRequest",value:function _addChunkToRequest(t){var r=this,o=this._offset,i=this._offset+this.options.chunkSize;return t.setProgressHandler(function(t){r._emitProgress(o+t,r._size)}),t.setHeader("Content-Type","application/offset+octet-stream"),(i===1/0||i>this._size)&&!this.options.uploadLengthDeferred&&(i=this._size),this._source.slice(o,i).then(function(o){var i=o.value,a=o.done,u=i&&i.size?i.size:0;r.options.uploadLengthDeferred&&a&&(r._size=r._offset+u,t.setHeader("Upload-Length",r._size));var l=r._offset+u;return!r.options.uploadLengthDeferred&&a&&l!==r._size?Promise.reject(new Error("upload was configured with a size of ".concat(r._size," bytes, but the source is done after ").concat(l," bytes"))):null===i?r._sendRequest(t):(r._emitProgress(r._offset,r._size),r._sendRequest(t,i))})}},{key:"_handleUploadResponse",value:function _handleUploadResponse(t,r){var o=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(o))this._emitHttpError(t,r,"tus: invalid or missing offset value");else{if(this._emitProgress(o,this._size),this._emitChunkComplete(o-this._offset,o,this._size),this._offset=o,o===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function _openRequest(t,r){var o=openRequest(t,r,this.options);return this._req=o,o}},{key:"_removeFromUrlStorage",value:function _removeFromUrlStorage(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(r){t._emitError(r)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function _saveUploadInUrlStorage(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var r={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?r.parallelUploadUrls=this._parallelUploadUrls:r.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,r).then(function(r){t._urlStorageKey=r})}},{key:"_sendRequest",value:function _sendRequest(t){return sendRequest(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],[{key:"terminate",value:function terminate(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=openRequest("DELETE",t,r);return sendRequest(o,null,r).then(function(t){if(204!==t.getStatus())throw new g("tus: unexpected response while terminating upload",null,o,t)}).catch(function(i){if(i instanceof g||(i=new g("tus: failed to terminate upload",i,o,null)),!shouldRetry(i,0,r))throw i;var a=r.retryDelays[0],u=r.retryDelays.slice(1),l=_objectSpread(_objectSpread({},r),{},{retryDelays:u});return new Promise(function(t){return setTimeout(t,a)}).then(function(){return BaseUpload.terminate(t,l)})})}}]),BaseUpload}();function encodeMetadata(t){return Object.entries(t).map(function(t){var r=_slicedToArray(t,2),o=r[0],i=r[1];return"".concat(o," ").concat(m(String(i)))}).join(",")}function inStatusCategory(t,r){return t>=r&&t<r+100}function openRequest(t,r,o){var i=o.httpStack.createRequest(t,r);i.setHeader("Tus-Resumable","1.0.0");var a=o.headers||{};if(Object.entries(a).forEach(function(t){var r=_slicedToArray(t,2),o=r[0],a=r[1];i.setHeader(o,a)}),o.addRequestId){var u=function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=16*Math.random()|0;return("x"===t?r:3&r|8).toString(16)})}();i.setHeader("X-Request-ID",u)}return i}function sendRequest(_x,t,r){return _sendRequest2.apply(this,arguments)}function _sendRequest2(){return _sendRequest2=function _asyncToGenerator(t){return function(){var r=this,o=arguments;return new Promise(function(i,a){var u=t.apply(r,o);function _next(t){asyncGeneratorStep(u,i,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,i,a,_next,_throw,"throw",t)}_next(void 0)})}}(_regeneratorRuntime().mark(function _callee(t,r,o){var i;return _regeneratorRuntime().wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if("function"!=typeof o.onBeforeRequest){a.next=3;break}return a.next=3,o.onBeforeRequest(t);case 3:return a.next=5,t.send(r);case 5:if(i=a.sent,"function"!=typeof o.onAfterResponse){a.next=9;break}return a.next=9,o.onAfterResponse(t,i);case 9:return a.abrupt("return",i);case 10:case"end":return a.stop()}},_callee)})),_sendRequest2.apply(this,arguments)}function shouldRetry(t,r,o){return!(null==o.retryDelays||r>=o.retryDelays.length||null==t.originalRequest)&&(o&&"function"==typeof o.onShouldRetry?o.onShouldRetry(t,r,o):defaultOnShouldRetry(t))}function defaultOnShouldRetry(t){var r=t.originalResponse?t.originalResponse.getStatus():0;return(!inStatusCategory(r,400)||409===r||423===r)&&function isOnline(){var t=!0;return"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(t=!1),t}()}function resolveUrl(t,r){return new(b())(r,t).toString()}P.defaultOptions=S;const R=P;function noopUrlStorage_typeof(t){return noopUrlStorage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},noopUrlStorage_typeof(t)}function noopUrlStorage_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,noopUrlStorage_toPropertyKey(i.key),i)}}function noopUrlStorage_toPropertyKey(t){var r=function noopUrlStorage_toPrimitive(t,r){if("object"!==noopUrlStorage_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==noopUrlStorage_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===noopUrlStorage_typeof(r)?r:String(r)}var L=function(){function NoopUrlStorage(){!function noopUrlStorage_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,NoopUrlStorage)}return function noopUrlStorage_createClass(t,r,o){return r&&noopUrlStorage_defineProperties(t.prototype,r),o&&noopUrlStorage_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(NoopUrlStorage,[{key:"listAllUploads",value:function listAllUploads(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function findUploadsByFingerprint(t){return Promise.resolve([])}},{key:"removeUpload",value:function removeUpload(t){return Promise.resolve()}},{key:"addUpload",value:function addUpload(t,r){return Promise.resolve(null)}}]),NoopUrlStorage}();o(60739),o(33110);function urlStorage_typeof(t){return urlStorage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},urlStorage_typeof(t)}function urlStorage_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,urlStorage_toPropertyKey(i.key),i)}}function urlStorage_toPropertyKey(t){var r=function urlStorage_toPrimitive(t,r){if("object"!==urlStorage_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==urlStorage_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===urlStorage_typeof(r)?r:String(r)}var O=!1;try{O="localStorage"in window;var U="tusSupport",k=localStorage.getItem(U);localStorage.setItem(U,k),null===k&&localStorage.removeItem(U)}catch(t){if(t.code!==t.SECURITY_ERR&&t.code!==t.QUOTA_EXCEEDED_ERR)throw t;O=!1}var j=O,E=function(){function WebStorageUrlStorage(){!function urlStorage_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WebStorageUrlStorage)}return function urlStorage_createClass(t,r,o){return r&&urlStorage_defineProperties(t.prototype,r),o&&urlStorage_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(WebStorageUrlStorage,[{key:"findAllUploads",value:function findAllUploads(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function findUploadsByFingerprint(t){var r=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(r)}},{key:"removeUpload",value:function removeUpload(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function addUpload(t,r){var o=Math.round(1e12*Math.random()),i="tus::".concat(t,"::").concat(o);return localStorage.setItem(i,JSON.stringify(r)),Promise.resolve(i)}},{key:"_findEntries",value:function _findEntries(t){for(var r=[],o=0;o<localStorage.length;o++){var i=localStorage.key(o);if(0===i.indexOf(t))try{var a=JSON.parse(localStorage.getItem(i));a.urlStorageKey=i,r.push(a)}catch(t){}}return r}}]),WebStorageUrlStorage}();function httpStack_typeof(t){return httpStack_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},httpStack_typeof(t)}function httpStack_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function httpStack_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,httpStack_toPropertyKey(i.key),i)}}function httpStack_createClass(t,r,o){return r&&httpStack_defineProperties(t.prototype,r),o&&httpStack_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function httpStack_toPropertyKey(t){var r=function httpStack_toPrimitive(t,r){if("object"!==httpStack_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==httpStack_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===httpStack_typeof(r)?r:String(r)}var x=function(){function XHRHttpStack(){httpStack_classCallCheck(this,XHRHttpStack)}return httpStack_createClass(XHRHttpStack,[{key:"createRequest",value:function createRequest(t,r){return new C(t,r)}},{key:"getName",value:function getName(){return"XHRHttpStack"}}]),XHRHttpStack}(),C=function(){function Request(t,r){httpStack_classCallCheck(this,Request),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return httpStack_createClass(Request,[{key:"getMethod",value:function getMethod(){return this._method}},{key:"getURL",value:function getURL(){return this._url}},{key:"setHeader",value:function setHeader(t,r){this._xhr.setRequestHeader(t,r),this._headers[t]=r}},{key:"getHeader",value:function getHeader(t){return this._headers[t]}},{key:"setProgressHandler",value:function setProgressHandler(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(r){r.lengthComputable&&t(r.loaded)})}},{key:"send",value:function send(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(o,i){t._xhr.onload=function(){o(new A(t._xhr))},t._xhr.onerror=function(t){i(t)},t._xhr.send(r)})}},{key:"abort",value:function abort(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function getUnderlyingObject(){return this._xhr}}]),Request}(),A=function(){function Response(t){httpStack_classCallCheck(this,Response),this._xhr=t}return httpStack_createClass(Response,[{key:"getStatus",value:function getStatus(){return this._xhr.status}},{key:"getHeader",value:function getHeader(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function getBody(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function getUnderlyingObject(){return this._xhr}}]),Response}();o(25428);const B=function isReactNative(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function uriToBlob(t){return new Promise(function(r,o){var i=new XMLHttpRequest;i.responseType="blob",i.onload=function(){var t=i.response;r(t)},i.onerror=function(t){o(t)},i.open("GET",t),i.send()})}const T=function isCordova(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};o(54743),o(11745),o(38309),o(21489),o(48140),o(81630),o(72170),o(75044),o(69539),o(31694),o(89955),o(21903),o(91134),o(33206),o(44496),o(66651),o(12887),o(19369),o(66812),o(8995),o(31575),o(36072),o(88747),o(28845),o(29423),o(57301),o(373),o(86614),o(41405),o(33684),o(43250),o(10149),o(24082);function FileSource_typeof(t){return FileSource_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FileSource_typeof(t)}function FileSource_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,FileSource_toPropertyKey(i.key),i)}}function FileSource_toPropertyKey(t){var r=function FileSource_toPrimitive(t,r){if("object"!==FileSource_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==FileSource_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===FileSource_typeof(r)?r:String(r)}var q=function(){function FileSource(t){!function FileSource_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FileSource),this._file=t,this.size=t.size}return function FileSource_createClass(t,r,o){return r&&FileSource_defineProperties(t.prototype,r),o&&FileSource_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(FileSource,[{key:"slice",value:function slice(t,r){if(T())return function readAsByteArray(t){return new Promise(function(r,o){var i=new FileReader;i.onload=function(){var t=new Uint8Array(i.result);r({value:t})},i.onerror=function(t){o(t)},i.readAsArrayBuffer(t)})}(this._file.slice(t,r));var o=this._file.slice(t,r),i=r>=this.size;return Promise.resolve({value:o,done:i})}},{key:"close",value:function close(){}}]),FileSource}();function StreamSource_typeof(t){return StreamSource_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},StreamSource_typeof(t)}function StreamSource_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,StreamSource_toPropertyKey(i.key),i)}}function StreamSource_toPropertyKey(t){var r=function StreamSource_toPrimitive(t,r){if("object"!==StreamSource_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==StreamSource_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===StreamSource_typeof(r)?r:String(r)}function len(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var I=function(){function StreamSource(t){!function StreamSource_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,StreamSource),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return function StreamSource_createClass(t,r,o){return r&&StreamSource_defineProperties(t.prototype,r),o&&StreamSource_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(StreamSource,[{key:"slice",value:function slice(t,r){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,r)}},{key:"_readUntilEnoughDataOrDone",value:function _readUntilEnoughDataOrDone(t,r){var o=this,i=r<=this._bufferOffset+len(this._buffer);if(this._done||i){var a=this._getDataFromBuffer(t,r),u=null==a&&this._done;return Promise.resolve({value:a,done:u})}return this._reader.read().then(function(i){var a=i.value;return i.done?o._done=!0:void 0===o._buffer?o._buffer=a:o._buffer=function concat(t,r){if(t.concat)return t.concat(r);if(t instanceof Blob)return new Blob([t,r],{type:t.type});if(t.set){var o=new t.constructor(t.length+r.length);return o.set(t),o.set(r,t.length),o}throw new Error("Unknown data type")}(o._buffer,a),o._readUntilEnoughDataOrDone(t,r)})}},{key:"_getDataFromBuffer",value:function _getDataFromBuffer(t,r){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var o=0===len(this._buffer);return this._done&&o?null:this._buffer.slice(0,r-t)}},{key:"close",value:function close(){this._reader.cancel&&this._reader.cancel()}}]),StreamSource}();function fileReader_typeof(t){return fileReader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fileReader_typeof(t)}function fileReader_regeneratorRuntime(){fileReader_regeneratorRuntime=function _regeneratorRuntime(){return r};var t,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,o){t[r]=o.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",p=u.toStringTag||"@@toStringTag";function define(t,r,o){return Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,o){return t[r]=o}}function wrap(t,r,o,i){var u=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(u.prototype),c=new Context(i||[]);return a(l,"_invoke",{value:makeInvokeMethod(t,o,c)}),l}function tryCatch(t,r,o){try{return{type:"normal",arg:t.call(r,o)}}catch(t){return{type:"throw",arg:t}}}r.wrap=wrap;var d="suspendedStart",h="suspendedYield",y="executing",v="completed",m={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var _={};define(_,l,function(){return this});var b=Object.getPrototypeOf,g=b&&b(b(values([])));g&&g!==o&&i.call(g,l)&&(_=g);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(_);function defineIteratorMethods(t){["next","throw","return"].forEach(function(r){define(t,r,function(t){return this._invoke(r,t)})})}function AsyncIterator(t,r){function invoke(o,a,u,l){var c=tryCatch(t[o],t,a);if("throw"!==c.type){var p=c.arg,d=p.value;return d&&"object"==fileReader_typeof(d)&&i.call(d,"__await")?r.resolve(d.__await).then(function(t){invoke("next",t,u,l)},function(t){invoke("throw",t,u,l)}):r.resolve(d).then(function(t){p.value=t,u(p)},function(t){return invoke("throw",t,u,l)})}l(c.arg)}var o;a(this,"_invoke",{value:function value(t,i){function callInvokeWithMethodAndArg(){return new r(function(r,o){invoke(t,i,r,o)})}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(r,o,i){var a=d;return function(u,l){if(a===y)throw new Error("Generator is already running");if(a===v){if("throw"===u)throw l;return{value:t,done:!0}}for(i.method=u,i.arg=l;;){var c=i.delegate;if(c){var p=maybeInvokeDelegate(c,i);if(p){if(p===m)continue;return p}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===d)throw a=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=y;var _=tryCatch(r,o,i);if("normal"===_.type){if(a=i.done?v:h,_.arg===m)continue;return{value:_.arg,done:i.done}}"throw"===_.type&&(a=v,i.method="throw",i.arg=_.arg)}}}function maybeInvokeDelegate(r,o){var i=o.method,a=r.iterator[i];if(a===t)return o.delegate=null,"throw"===i&&r.iterator.return&&(o.method="return",o.arg=t,maybeInvokeDelegate(r,o),"throw"===o.method)||"return"!==i&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var u=tryCatch(a,r.iterator,o.arg);if("throw"===u.type)return o.method="throw",o.arg=u.arg,o.delegate=null,m;var l=u.arg;return l?l.done?(o[r.resultName]=l.value,o.next=r.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,m):l:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,m)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(r){if(r||""===r){var o=r[l];if(o)return o.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,u=function next(){for(;++a<r.length;)if(i.call(r,a))return next.value=r[a],next.done=!1,next;return next.value=t,next.done=!0,next};return u.next=u}}throw new TypeError(fileReader_typeof(r)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,p,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,p,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this}),r.AsyncIterator=AsyncIterator,r.async=function(t,o,i,a,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(t,o,i,a),u);return r.isGeneratorFunction(o)?l:l.next().then(function(t){return t.done?t.value:l.next()})},defineIteratorMethods(w),define(w,p,"Generator"),define(w,l,function(){return this}),define(w,"toString",function(){return"[object Generator]"}),r.keys=function(t){var r=Object(t),o=[];for(var i in r)o.push(i);return o.reverse(),function next(){for(;o.length;){var t=o.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},r.values=values,Context.prototype={constructor:Context,reset:function reset(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!r)for(var o in this)"t"===o.charAt(0)&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(r){if(this.done)throw r;var o=this;function handle(i,a){return l.type="throw",l.arg=r,o.next=i,a&&(o.method="next",o.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],l=u.completion;if("root"===u.tryLoc)return handle("end");if(u.tryLoc<=this.prev){var c=i.call(u,"catchLoc"),p=i.call(u,"finallyLoc");if(c&&p){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0);if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var u=a;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=t,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,m):this.complete(l)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),m}},"catch":function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc===t){var i=o.completion;if("throw"===i.type){var a=i.arg;resetTryEntry(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(r,o,i){return this.delegate={iterator:values(r),resultName:o,nextLoc:i},"next"===this.method&&(this.arg=t),m}},r}function fileReader_asyncGeneratorStep(t,r,o,i,a,u,l){try{var c=t[u](l),p=c.value}catch(t){return void o(t)}c.done?r(p):Promise.resolve(p).then(i,a)}function fileReader_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fileReader_toPropertyKey(i.key),i)}}function fileReader_toPropertyKey(t){var r=function fileReader_toPrimitive(t,r){if("object"!==fileReader_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==fileReader_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===fileReader_typeof(r)?r:String(r)}var D=function(){function FileReader(){!function fileReader_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FileReader)}var t;return function fileReader_createClass(t,r,o){return r&&fileReader_defineProperties(t.prototype,r),o&&fileReader_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(FileReader,[{key:"openFile",value:(t=function fileReader_asyncToGenerator(t){return function(){var r=this,o=arguments;return new Promise(function(i,a){var u=t.apply(r,o);function _next(t){fileReader_asyncGeneratorStep(u,i,a,_next,_throw,"next",t)}function _throw(t){fileReader_asyncGeneratorStep(u,i,a,_next,_throw,"throw",t)}_next(void 0)})}}(fileReader_regeneratorRuntime().mark(function _callee(t,r){var o;return fileReader_regeneratorRuntime().wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!B()||!t||void 0===t.uri){i.next=11;break}return i.prev=1,i.next=4,uriToBlob(t.uri);case 4:return o=i.sent,i.abrupt("return",new q(o));case 8:throw i.prev=8,i.t0=i.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(i.t0));case 11:if("function"!=typeof t.slice||void 0===t.size){i.next=13;break}return i.abrupt("return",Promise.resolve(new q(t)));case 13:if("function"!=typeof t.read){i.next=18;break}if(r=Number(r),Number.isFinite(r)){i.next=17;break}return i.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return i.abrupt("return",Promise.resolve(new I(t,r)));case 18:return i.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return i.stop()}},_callee,null,[[1,8]])})),function openFile(_x,r){return t.apply(this,arguments)})}]),FileReader}();function browser_typeof(t){return browser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},browser_typeof(t)}function browser_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,browser_toPropertyKey(i.key),i)}}function browser_setPrototypeOf(t,r){return browser_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},browser_setPrototypeOf(t,r)}function browser_createSuper(t){var r=function browser_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=browser_getPrototypeOf(t);if(r){var a=browser_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function browser_possibleConstructorReturn(t,r){if(r&&("object"===browser_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function browser_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function browser_getPrototypeOf(t){return browser_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},browser_getPrototypeOf(t)}function browser_ownKeys(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,i)}return o}function browser_objectSpread(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?browser_ownKeys(Object(o),!0).forEach(function(r){browser_defineProperty(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):browser_ownKeys(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}function browser_defineProperty(t,r,o){return(r=browser_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function browser_toPropertyKey(t){var r=function browser_toPrimitive(t,r){if("object"!==browser_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==browser_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===browser_typeof(r)?r:String(r)}var N=browser_objectSpread(browser_objectSpread({},R.defaultOptions),{},{httpStack:new x,fileReader:new D,urlStorage:j?new E:new L,fingerprint:function fingerprint(t,r){return B()?Promise.resolve(function reactNativeFingerprint(t,r){var o=t.exif?function hashCode(t){var r=0;if(0===t.length)return r;for(var o=0;o<t.length;o++){r=(r<<5)-r+t.charCodeAt(o),r&=r}return r}(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",o,r.endpoint].join("/")}(t,r)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,r.endpoint].join("-"))}}),K=function(t){!function browser_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&browser_setPrototypeOf(t,r)}(Upload,t);var r=browser_createSuper(Upload);function Upload(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function browser_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Upload),o=browser_objectSpread(browser_objectSpread({},N),o),r.call(this,t,o)}return function browser_createClass(t,r,o){return r&&browser_defineProperties(t.prototype,r),o&&browser_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Upload,null,[{key:"terminate",value:function terminate(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=browser_objectSpread(browser_objectSpread({},N),r),R.terminate(t,r)}}]),Upload}(R),Q=window,z=Q.XMLHttpRequest,H=Q.Blob,G=z&&H&&"function"==typeof H.prototype.slice},48892:(t,r,o)=>{o(48598),o(44114),o(27495),o(25440);var i=Object.prototype.hasOwnProperty;function decode(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function encode(t){try{return encodeURIComponent(t)}catch(t){return null}}r.stringify=function querystringify(t,r){r=r||"";var o,a,u=[];for(a in"string"!=typeof r&&(r="?"),t)if(i.call(t,a)){if((o=t[a])||null!=o&&!isNaN(o)||(o=""),a=encode(a),o=encode(o),null===a||null===o)continue;u.push(a+"="+o)}return u.length?r+u.join("&"):""},r.parse=function querystring(t){for(var r,o=/([^=?#&]+)=?([^&]*)/g,i={};r=o.exec(t);){var a=decode(r[1]),u=decode(r[2]);null===a||null===u||a in i||(i[a]=u)}return i}},54024:(t,r,o)=>{o.d(r,{A:()=>y});var i=o(51531),a=o(18180),u=o(58237),l=o(84285);o(52675),o(83237),o(31073),o(16280),o(76918),o(2008),o(51629),o(64346),o(48598),o(44114),o(69085),o(67945),o(84185),o(83851),o(81278),o(79432),o(26099),o(84864),o(57465),o(27495),o(87745),o(38781),o(25440),o(90744),o(98992),o(54520),o(3949),o(23500);function ownKeys(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(o),!0).forEach(function(r){(0,i.A)(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}function _classPrivateFieldLooseBase(t,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw new TypeError("attempted to use private field on non-instance");return t}var c=0;function _classPrivateFieldLooseKey(t){return"__private_"+c+++"_"+t}function insertReplacement(t,r,o){var i=[];return t.forEach(function(t){return"string"!=typeof t?i.push(t):r[Symbol.split](t).forEach(function(t,r,a){""!==t&&i.push(t),r<a.length-1&&i.push(o)})}),i}function interpolate(t,r){var o=/\$/g,i=[t];if(null==r)return i;for(var a=0,u=Object.keys(r);a<u.length;a++){var l=u[a];if("_"!==l){var c=r[l];"string"==typeof c&&(c=o[Symbol.replace](c,"$$$$")),i=insertReplacement(i,new RegExp("%\\{".concat(l,"\\}"),"g"),c)}}return i}var p=function defaultOnMissingKey(t){throw new Error("missing string: ".concat(t))},d=_classPrivateFieldLooseKey("onMissingKey"),h=_classPrivateFieldLooseKey("apply"),y=function(){return(0,l.A)(function Translator(t,r){(0,u.A)(this,Translator);var o=(void 0===r?{}:r).onMissingKey,i=void 0===o?p:o;Object.defineProperty(this,h,{value:_apply2}),Object.defineProperty(this,d,{writable:!0,value:void 0}),this.locale={strings:{},pluralize:function pluralize(t){return 1===t?0:1}},Array.isArray(t)?t.forEach(_classPrivateFieldLooseBase(this,h)[h],this):_classPrivateFieldLooseBase(this,h)[h](t),_classPrivateFieldLooseBase(this,d)[d]=i},[{key:"translate",value:function translate(t,r){return this.translateArray(t,r).join("")}},{key:"translateArray",value:function translateArray(t,r){var o=this.locale.strings[t];if(null==o&&(_classPrivateFieldLooseBase(this,d)[d](t),o=t),"object"===(0,a.A)(o)){if(r&&void 0!==r.smart_count)return interpolate(o[this.locale.pluralize(r.smart_count)],r);throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof o)throw new Error("string was not a string");return interpolate(o,r)}}])}();function _apply2(t){if(null!=t&&t.strings){var r=this.locale;Object.assign(this.locale,{strings:_objectSpread(_objectSpread({},r.strings),t.strings),pluralize:t.pluralize||r.pluralize})}}},59067:t=>{t.exports=function required(t,r){if(r=r.split(":")[0],!(t=+t))return!1;switch(r){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},83237:(t,r,o)=>{o(70511)("replace")},96167:(t,r,o)=>{var i=o(46518),a=o(69565),u=o(79306),l=o(36043),c=o(1103),p=o(72652);i({target:"Promise",stat:!0,forced:o(90537)},{allSettled:function allSettled(t){var r=this,o=l.f(r),i=o.resolve,d=o.reject,h=c(function(){var o=u(r.resolve),l=[],c=0,d=1;p(t,function(t){var u=c++,p=!1;d++,a(o,r,t).then(function(t){p||(p=!0,l[u]={status:"fulfilled",value:t},--d||i(l))},function(t){p||(p=!0,l[u]={status:"rejected",reason:t},--d||i(l))})}),--d||i(l)});return h.error&&d(h.value),o.promise}})}}]);
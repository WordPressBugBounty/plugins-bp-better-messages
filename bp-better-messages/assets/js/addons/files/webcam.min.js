/*! For license information please see webcam.min.js.LICENSE.txt */
"use strict";(this.webpackChunkBetterMessages=this.webpackChunkBetterMessages||[]).push([["uppy-webcam"],{10362:(t,n,o)=>{o(25276),o(27495),o(90906),t.exports=isMobile,t.exports.isMobile=isMobile,t.exports.default=isMobile;var i=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,a=/android|ipad|playbook|silk/i;function isMobile(t){t||(t={});var n=t.ua;if(n||"undefined"==typeof navigator||(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),"string"!=typeof n)return!1;var o=i.test(n)&&!r.test(n)||!!t.tablet&&a.test(n);return!o&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==n.indexOf("Macintosh")&&-1!==n.indexOf("Safari")&&(o=!0),o}},23677:(t,n,o)=>{o.d(n,{A:()=>R});var i=o(58237),r=o(84285),a=o(68119),s=o(36858),c=o(31061),l=o(46983),u=(o(16280),o(76918),o(28706),o(84185),o(26099),o(3362),o(60825),o(36480)),p=o(18180);const h=function findDOMElement(t,n){return void 0===n&&(n=document),"string"==typeof t?n.querySelector(t):function isDOMElement(t){return"object"===(0,p.A)(t)&&null!==t&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}(t)?t:null};const f=function getTextDirection(t){for(var n;t&&!t.dir;)t=t.parentNode;return null==(n=t)?void 0:n.dir};var v=o(32744);function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _classPrivateFieldLooseBase(t,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw new TypeError("attempted to use private field on non-instance");return t}var y=0;function _classPrivateFieldLooseKey(t){return"__private_"+y+++"_"+t}var w=_classPrivateFieldLooseKey("updateUI");const R=function(t){function UIPlugin(){var t;return(0,i.A)(this,UIPlugin),t=function _callSuper(t,n,o){return n=(0,s.A)(n),(0,a.A)(t,_isNativeReflectConstruct()?Reflect.construct(n,o||[],(0,s.A)(t).constructor):n.apply(t,o))}(this,UIPlugin,arguments),Object.defineProperty(t,w,{writable:!0,value:void 0}),t}return(0,c.A)(UIPlugin,t),(0,r.A)(UIPlugin,[{key:"getTargetPlugin",value:function getTargetPlugin(t){var n;if("function"==typeof(null==t?void 0:t.addTarget))(n=t)instanceof UIPlugin||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin}}));else if("function"==typeof t){var o=t;this.uppy.iteratePlugins(function(t){t instanceof o&&(n=t)})}return n}},{key:"mount",value:function mount(t,n){var o=this,i=n.id,r=h(t);if(r){this.isTargetDOMEl=!0;var a=document.createElement("div");return a.classList.add("uppy-Root"),_classPrivateFieldLooseBase(this,w)[w]=function debounce(t){var n,o=null;return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=r,o||(o=Promise.resolve().then(function(){return o=null,t.apply(void 0,(0,l.A)(n))})),o}}(function(t){o.uppy.getPlugin(o.id)&&((0,u.XX)(o.render(t),a),o.afterUpdate())}),this.uppy.log("Installing ".concat(i," to a DOM element '").concat(t,"'")),this.opts.replaceTargetContent&&(r.innerHTML=""),(0,u.XX)(this.render(this.uppy.getState()),a),this.el=a,r.appendChild(a),a.dir=this.opts.direction||f(a)||"ltr",this.onMount(),this.el}var s=this.getTargetPlugin(t);if(s)return this.uppy.log("Installing ".concat(i," to ").concat(s.id)),this.parent=s,this.el=s.addTarget(n),this.onMount(),this.el;this.uppy.log("Not installing ".concat(i));var c="Invalid target option given to ".concat(i,".");throw c+="function"==typeof t?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(c)}},{key:"render",value:function render(t){throw new Error("Extend the render method to add your plugin to a DOM element")}},{key:"update",value:function update(t){var n,o;null!=this.el&&(null==(n=(o=_classPrivateFieldLooseBase(this,w))[w])||n.call(o,t))}},{key:"unmount",value:function unmount(){var t;this.isTargetDOMEl&&(null==(t=this.el)||t.remove());this.onUnmount()}},{key:"onMount",value:function onMount(){}},{key:"onUnmount",value:function onUnmount(){}}])}(v.A)},31073:(t,n,o)=>{o(70511)("split")},32744:(t,n,o)=>{o.d(n,{A:()=>c});o(52675),o(2008),o(51629),o(44114),o(67945),o(84185),o(83851),o(81278),o(79432),o(26099),o(98992),o(54520),o(3949),o(23500);var i=o(51531),r=o(58237),a=o(84285),s=(o(16280),o(76918),o(94170),o(54024));function ownKeys(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(o),!0).forEach(function(n){(0,i.A)(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}var c=function(){return(0,a.A)(function BasePlugin(t,n){(0,r.A)(this,BasePlugin),this.uppy=t,this.opts=null!=n?n:{}},[{key:"getPluginState",value:function getPluginState(){var t=this.uppy.getState().plugins;return(null==t?void 0:t[this.id])||{}}},{key:"setPluginState",value:function setPluginState(t){if(t){var n=this.uppy.getState().plugins;this.uppy.setState({plugins:_objectSpread(_objectSpread({},n),{},(0,i.A)({},this.id,_objectSpread(_objectSpread({},n[this.id]),t)))})}}},{key:"setOptions",value:function setOptions(t){this.opts=_objectSpread(_objectSpread({},this.opts),t),this.setPluginState(void 0),this.i18nInit()}},{key:"i18nInit",value:function i18nInit(){var t=new s.A([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}},{key:"addTarget",value:function addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}},{key:"install",value:function install(){}},{key:"uninstall",value:function uninstall(){}},{key:"update",value:function update(t){}},{key:"afterUpdate",value:function afterUpdate(){}}])}()},36480:(t,n,o)=>{o.d(n,{FK:()=>k,Ob:()=>K,XX:()=>G,_3:()=>b,fF:()=>r,h:()=>_,uA:()=>x,v2:()=>H});var i,r,a,s,c,l,u,p,h,f,v,y=o(18180),w=(o(51629),o(25276),o(64346),o(23792),o(62062),o(44114),o(34782),o(15086),o(26910),o(94170),o(62010),o(26099),o(3362),o(27495),o(90906),o(31415),o(47764),o(25440),o(48718),o(98992),o(3949),o(81454),o(37550),o(23500),o(62953),o(76031),{}),R=[],W=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,U=Array.isArray;function d(t,n){for(var o in n)t[o]=n[o];return t}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function _(t,n,o){var r,a,s,c={};for(s in n)"key"==s?r=n[s]:"ref"==s?a=n[s]:c[s]=n[s];if(arguments.length>2&&(c.children=arguments.length>3?i.call(arguments,2):o),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===c[s]&&(c[s]=t.defaultProps[s]);return m(t,c,r,a,null)}function m(t,n,o,i,s){var c={type:t,props:n,key:o,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==s?++a:s,__i:-1,__u:0};return null==s&&null!=r.vnode&&r.vnode(c),c}function b(){return{current:null}}function k(t){return t.children}function x(t,n){this.props=t,this.context=n}function S(t,n){if(null==n)return t.__?S(t.__,t.__i+1):null;for(var o;n<t.__k.length;n++)if(null!=(o=t.__k[n])&&null!=o.__e)return o.__e;return"function"==typeof t.type?S(t):null}function C(t){var n,o;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(o=t.__k[n])&&null!=o.__e){t.__e=t.__c.base=o.__e;break}return C(t)}}function M(t){(!t.__d&&(t.__d=!0)&&s.push(t)&&!$.__r++||c!=r.debounceRendering)&&((c=r.debounceRendering)||l)($)}function $(){for(var t,n,o,i,a,c,l,p=1;s.length;)s.length>p&&s.sort(u),t=s.shift(),p=s.length,t.__d&&(o=void 0,a=(i=(n=t).__v).__e,c=[],l=[],n.__P&&((o=d({},i)).__v=i.__v+1,r.vnode&&r.vnode(o),O(n.__P,o,i,n.__n,n.__P.namespaceURI,32&i.__u?[a]:null,c,null==a?S(i):a,!!(32&i.__u),l),o.__v=i.__v,o.__.__k[o.__i]=o,N(c,o,l),o.__e!=a&&C(o)));$.__r=0}function I(t,n,o,i,r,a,s,c,l,u,p){var h,f,v,y,W,U,X=i&&i.__k||R,J=n.length;for(l=P(o,n,X,l,J),h=0;h<J;h++)null!=(v=o.__k[h])&&(f=-1==v.__i?w:X[v.__i]||w,v.__i=h,U=O(t,v,f,r,a,s,c,l,u,p),y=v.__e,v.ref&&f.ref!=v.ref&&(f.ref&&B(f.ref,null,v),p.push(v.ref,v.__c||y,v)),null==W&&null!=y&&(W=y),4&v.__u||f.__k===v.__k?l=A(v,l,t):"function"==typeof v.type&&void 0!==U?l=U:y&&(l=y.nextSibling),v.__u&=-7);return o.__e=W,l}function P(t,n,o,i,r){var a,s,c,l,u,p=o.length,h=p,f=0;for(t.__k=new Array(r),a=0;a<r;a++)null!=(s=n[a])&&"boolean"!=typeof s&&"function"!=typeof s?(l=a+f,(s=t.__k[a]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?m(null,s,null,null,null):U(s)?m(k,{children:s},null,null,null):null==s.constructor&&s.__b>0?m(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,c=null,-1!=(u=s.__i=L(s,o,l,h))&&(h--,(c=o[u])&&(c.__u|=2)),null==c||null==c.__v?(-1==u&&(r>p?f--:r<p&&f++),"function"!=typeof s.type&&(s.__u|=4)):u!=l&&(u==l-1?f--:u==l+1?f++:(u>l?f--:f++,s.__u|=4))):t.__k[a]=null;if(h)for(a=0;a<p;a++)null!=(c=o[a])&&!(2&c.__u)&&(c.__e==i&&(i=S(c)),D(c,c));return i}function A(t,n,o){var i,r;if("function"==typeof t.type){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,n=A(i[r],n,o));return n}t.__e!=n&&(n&&t.type&&!o.contains(n)&&(n=S(t)),o.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}function H(t,n){return n=n||[],null==t||"boolean"==typeof t||(U(t)?t.some(function(t){H(t,n)}):n.push(t)),n}function L(t,n,o,i){var r,a,s,c=t.key,l=t.type,u=n[o],p=null!=u&&!(2&u.__u);if(null===u&&null==t.key||p&&c==u.key&&l==u.type)return o;if(i>(p?1:0))for(r=o-1,a=o+1;r>=0||a<n.length;)if(null!=(u=n[s=r>=0?r--:a++])&&!(2&u.__u)&&c==u.key&&l==u.type)return s;return-1}function T(t,n,o){"-"==n[0]?t.setProperty(n,null==o?"":o):t[n]=null==o?"":"number"!=typeof o||W.test(n)?o:o+"px"}function j(t,n,o,i,r){var a,s;e:if("style"==n)if("string"==typeof o)t.style.cssText=o;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(n in i)o&&n in o||T(t.style,n,"");if(o)for(n in o)i&&o[n]==i[n]||T(t.style,n,o[n])}else if("o"==n[0]&&"n"==n[1])a=n!=(n=n.replace(p,"$1")),s=n.toLowerCase(),n=s in t||"onFocusOut"==n||"onFocusIn"==n?s.slice(2):n.slice(2),t.l||(t.l={}),t.l[n+a]=o,o?i?o.u=i.u:(o.u=h,t.addEventListener(n,a?v:f,a)):t.removeEventListener(n,a?v:f,a);else{if("http://www.w3.org/2000/svg"==r)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=n&&"height"!=n&&"href"!=n&&"list"!=n&&"form"!=n&&"tabIndex"!=n&&"download"!=n&&"rowSpan"!=n&&"colSpan"!=n&&"role"!=n&&"popover"!=n&&n in t)try{t[n]=null==o?"":o;break e}catch(t){}"function"==typeof o||(null==o||!1===o&&"-"!=n[4]?t.removeAttribute(n):t.setAttribute(n,"popover"==n&&1==o?"":o))}}function F(t){return function(n){if(this.l){var o=this.l[n.type+t];if(null==n.t)n.t=h++;else if(n.t<o.u)return;return o(r.event?r.event(n):n)}}}function O(t,n,o,i,a,s,c,l,u,p){var h,f,v,y,w,R,W,X,J,Q,Y,Z,ee,te,ne,oe,ie,re=n.type;if(null!=n.constructor)return null;128&o.__u&&(u=!!(32&o.__u),s=[l=n.__e=o.__e]),(h=r.__b)&&h(n);e:if("function"==typeof re)try{if(X=n.props,J="prototype"in re&&re.prototype.render,Q=(h=re.contextType)&&i[h.__c],Y=h?Q?Q.props.value:h.__:i,o.__c?W=(f=n.__c=o.__c).__=f.__E:(J?n.__c=f=new re(X,Y):(n.__c=f=new x(X,Y),f.constructor=re,f.render=E),Q&&Q.sub(f),f.props=X,f.state||(f.state={}),f.context=Y,f.__n=i,v=f.__d=!0,f.__h=[],f._sb=[]),J&&null==f.__s&&(f.__s=f.state),J&&null!=re.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=d({},f.__s)),d(f.__s,re.getDerivedStateFromProps(X,f.__s))),y=f.props,w=f.state,f.__v=n,v)J&&null==re.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),J&&null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(J&&null==re.getDerivedStateFromProps&&X!==y&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(X,Y),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(X,f.__s,Y)||n.__v==o.__v){for(n.__v!=o.__v&&(f.props=X,f.state=f.__s,f.__d=!1),n.__e=o.__e,n.__k=o.__k,n.__k.some(function(t){t&&(t.__=n)}),Z=0;Z<f._sb.length;Z++)f.__h.push(f._sb[Z]);f._sb=[],f.__h.length&&c.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(X,f.__s,Y),J&&null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(y,w,R)})}if(f.context=Y,f.props=X,f.__P=t,f.__e=!1,ee=r.__r,te=0,J){for(f.state=f.__s,f.__d=!1,ee&&ee(n),h=f.render(f.props,f.state,f.context),ne=0;ne<f._sb.length;ne++)f.__h.push(f._sb[ne]);f._sb=[]}else do{f.__d=!1,ee&&ee(n),h=f.render(f.props,f.state,f.context),f.state=f.__s}while(f.__d&&++te<25);f.state=f.__s,null!=f.getChildContext&&(i=d(d({},i),f.getChildContext())),J&&!v&&null!=f.getSnapshotBeforeUpdate&&(R=f.getSnapshotBeforeUpdate(y,w)),oe=h,null!=h&&h.type===k&&null==h.key&&(oe=V(h.props.children)),l=I(t,U(oe)?oe:[oe],n,o,i,a,s,c,l,u,p),f.base=n.__e,n.__u&=-161,f.__h.length&&c.push(f),W&&(f.__E=f.__=null)}catch(t){if(n.__v=null,u||null!=s)if(t.then){for(n.__u|=u?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,n.__e=l}else{for(ie=s.length;ie--;)g(s[ie]);z(n)}else n.__e=o.__e,n.__k=o.__k,t.then||z(n);r.__e(t,n,o)}else null==s&&n.__v==o.__v?(n.__k=o.__k,n.__e=o.__e):l=n.__e=q(o.__e,n,o,i,a,s,c,u,p);return(h=r.diffed)&&h(n),128&n.__u?void 0:l}function z(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(z)}function N(t,n,o){for(var i=0;i<o.length;i++)B(o[i],o[++i],o[++i]);r.__c&&r.__c(n,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(t){t.call(n)})}catch(t){r.__e(t,n.__v)}})}function V(t){return"object"!=(0,y.A)(t)||null==t||t.__b&&t.__b>0?t:U(t)?t.map(V):d({},t)}function q(t,n,o,a,s,c,l,u,p){var h,f,v,y,R,W,X,J=o.props,Q=n.props,Y=n.type;if("svg"==Y?s="http://www.w3.org/2000/svg":"math"==Y?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=c)for(h=0;h<c.length;h++)if((R=c[h])&&"setAttribute"in R==!!Y&&(Y?R.localName==Y:3==R.nodeType)){t=R,c[h]=null;break}if(null==t){if(null==Y)return document.createTextNode(Q);t=document.createElementNS(s,Y,Q.is&&Q),u&&(r.__m&&r.__m(n,c),u=!1),c=null}if(null==Y)J===Q||u&&t.data==Q||(t.data=Q);else{if(c=c&&i.call(t.childNodes),J=o.props||w,!u&&null!=c)for(J={},h=0;h<t.attributes.length;h++)J[(R=t.attributes[h]).name]=R.value;for(h in J)if(R=J[h],"children"==h);else if("dangerouslySetInnerHTML"==h)v=R;else if(!(h in Q)){if("value"==h&&"defaultValue"in Q||"checked"==h&&"defaultChecked"in Q)continue;j(t,h,null,R,s)}for(h in Q)R=Q[h],"children"==h?y=R:"dangerouslySetInnerHTML"==h?f=R:"value"==h?W=R:"checked"==h?X=R:u&&"function"!=typeof R||J[h]===R||j(t,h,R,J[h],s);if(f)u||v&&(f.__html==v.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),n.__k=[];else if(v&&(t.innerHTML=""),I("template"==n.type?t.content:t,U(y)?y:[y],n,o,a,"foreignObject"==Y?"http://www.w3.org/1999/xhtml":s,c,l,c?c[0]:o.__k&&S(o,0),u,p),null!=c)for(h=c.length;h--;)g(c[h]);u||(h="value","progress"==Y&&null==W?t.removeAttribute("value"):null!=W&&(W!==t[h]||"progress"==Y&&!W||"option"==Y&&W!=J[h])&&j(t,h,W,J[h],s),h="checked",null!=X&&X!=t[h]&&j(t,h,X,J[h],s))}return t}function B(t,n,o){try{if("function"==typeof t){var i="function"==typeof t.__u;i&&t.__u(),i&&null==n||(t.__u=t(n))}else t.current=n}catch(t){r.__e(t,o)}}function D(t,n,o){var i,a;if(r.unmount&&r.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||B(i,null,n)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){r.__e(t,n)}i.base=i.__P=null}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&D(i[a],n,o||"function"!=typeof t.type);o||g(t.__e),t.__c=t.__=t.__e=void 0}function E(t,n,o){return this.constructor(t,o)}function G(t,n,o){var a,s,c,l;n==document&&(n=document.documentElement),r.__&&r.__(t,n),s=(a="function"==typeof o)?null:o&&o.__k||n.__k,c=[],l=[],O(n,t=(!a&&o||n).__k=_(k,null,[t]),s||w,w,n.namespaceURI,!a&&o?[o]:s?null:n.firstChild?i.call(n.childNodes):null,c,!a&&o?o:s?s.__e:n.firstChild,a,l),N(c,t,l)}function K(t,n,o){var r,a,s,c,l=d({},t.props);for(s in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),n)"key"==s?r=n[s]:"ref"==s?a=n[s]:l[s]=void 0===n[s]&&null!=c?c[s]:n[s];return arguments.length>2&&(l.children=arguments.length>3?i.call(arguments,2):o),m(t.type,l,r||t.key,a||t.ref,null)}i=R.slice,r={__e:function __e(t,n,o,i){for(var r,a,s;n=n.__;)if((r=n.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(t)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,i||{}),s=r.__d),s)return r.__E=r}catch(n){t=n}throw t}},a=0,x.prototype.setState=function(t,n){var o;o=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},o),this.props)),t&&d(o,t),null!=t&&this.__v&&(n&&this._sb.push(n),M(this))},x.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),M(this))},x.prototype.render=k,s=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function e(t,n){return t.__v.__b-n.__v.__b},$.__r=0,p=/(PointerCapture)$|Capture$/i,h=0,f=F(!1),v=F(!0)},54024:(t,n,o)=>{o.d(n,{A:()=>h});var i=o(51531),r=o(18180),a=o(58237),s=o(84285);o(52675),o(83237),o(31073),o(16280),o(76918),o(2008),o(51629),o(64346),o(48598),o(44114),o(69085),o(67945),o(84185),o(83851),o(81278),o(79432),o(26099),o(84864),o(57465),o(27495),o(87745),o(38781),o(25440),o(90744),o(98992),o(54520),o(3949),o(23500);function ownKeys(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(o),!0).forEach(function(n){(0,i.A)(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function _classPrivateFieldLooseBase(t,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw new TypeError("attempted to use private field on non-instance");return t}var c=0;function _classPrivateFieldLooseKey(t){return"__private_"+c+++"_"+t}function insertReplacement(t,n,o){var i=[];return t.forEach(function(t){return"string"!=typeof t?i.push(t):n[Symbol.split](t).forEach(function(t,n,r){""!==t&&i.push(t),n<r.length-1&&i.push(o)})}),i}function interpolate(t,n){var o=/\$/g,i=[t];if(null==n)return i;for(var r=0,a=Object.keys(n);r<a.length;r++){var s=a[r];if("_"!==s){var c=n[s];"string"==typeof c&&(c=o[Symbol.replace](c,"$$$$")),i=insertReplacement(i,new RegExp("%\\{".concat(s,"\\}"),"g"),c)}}return i}var l=function defaultOnMissingKey(t){throw new Error("missing string: ".concat(t))},u=_classPrivateFieldLooseKey("onMissingKey"),p=_classPrivateFieldLooseKey("apply"),h=function(){return(0,s.A)(function Translator(t,n){(0,a.A)(this,Translator);var o=(void 0===n?{}:n).onMissingKey,i=void 0===o?l:o;Object.defineProperty(this,p,{value:_apply2}),Object.defineProperty(this,u,{writable:!0,value:void 0}),this.locale={strings:{},pluralize:function pluralize(t){return 1===t?0:1}},Array.isArray(t)?t.forEach(_classPrivateFieldLooseBase(this,p)[p],this):_classPrivateFieldLooseBase(this,p)[p](t),_classPrivateFieldLooseBase(this,u)[u]=i},[{key:"translate",value:function translate(t,n){return this.translateArray(t,n).join("")}},{key:"translateArray",value:function translateArray(t,n){var o=this.locale.strings[t];if(null==o&&(_classPrivateFieldLooseBase(this,u)[u](t),o=t),"object"===(0,r.A)(o)){if(n&&void 0!==n.smart_count)return interpolate(o[this.locale.pluralize(n.smart_count)],n);throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof o)throw new Error("string was not a string");return interpolate(o,n)}}])}();function _apply2(t){if(null!=t&&t.strings){var n=this.locale;Object.assign(this.locale,{strings:_objectSpread(_objectSpread({},n.strings),t.strings),pluralize:t.pluralize||n.pluralize})}}},62761:(t,n,o)=>{o.r(n),o.d(n,{"default":()=>te});var i=o(18180),r=o(18443),a=o(51531),s=o(58237),c=o(84285),l=o(68119),u=o(36858),p=o(20423),h=o(31061),f=o(61792),v=(o(52675),o(16280),o(76918),o(28706),o(2008),o(50113),o(51629),o(74423),o(25276),o(23792),o(62062),o(44114),o(72712),o(34782),o(15086),o(59089),o(94170),o(69085),o(67945),o(84185),o(83851),o(81278),o(79432),o(26099),o(3362),o(60825),o(27495),o(90906),o(21699),o(47764),o(71761),o(98992),o(54520),o(72577),o(3949),o(81454),o(8872),o(37550),o(23500),o(62953),o(76031),o(3296),o(27208),o(48408),o(36480)),y=o(23677),w=o(80241),R={__proto__:null,"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};function getFileTypeExtension(t){var n=t.split(";",1);return t=(0,w.A)(n,1)[0],R[t]||null}const W={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};var U=o(10362);const CameraIcon=function(){return(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},(0,v.h)("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))},SnapshotButton=function(t){var n=t.onSnapshot,o=t.i18n;return(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:o("takePicture"),"aria-label":o("takePicture"),onClick:n,"data-uppy-super-focusable":!0},CameraIcon())};function RecordButton(t){var n=t.recording,o=t.onStartRecording,i=t.onStopRecording,r=t.i18n;return n?(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:r("stopRecording"),"aria-label":r("stopRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,v.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:r("startRecording"),"aria-label":r("startRecording"),onClick:o,"data-uppy-super-focusable":!0},(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,v.h)("circle",{cx:"50",cy:"50",r:"40"})))}o(68156);function RecordingLength(t){var n=t.recordingLengthSeconds,o=t.i18n,i=function formatSeconds(t){return"".concat(Math.floor(t/60),":").concat(String(t%60).padStart(2,0))}(n);return(0,v.h)("span",{"aria-label":o("recordingLength",{recording_length:i})},i)}const X=function SubmitButton(t){var n=t.onSubmit,o=t.i18n;return(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:o("submitRecordedFile"),"aria-label":o("submitRecordedFile"),onClick:n,"data-uppy-super-focusable":!0},(0,v.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,v.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};const J=function DiscardButton(t){var n=t.onDiscard,o=t.i18n;return(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard",type:"button",title:o("discardRecordedFile"),"aria-label":o("discardRecordedFile"),onClick:n,"data-uppy-super-focusable":!0},(0,v.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,v.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,v.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,v.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},_extends.apply(this,arguments)}function isModeAvailable(t,n){return t.includes(n)}const Q=function(t){function CameraScreen(){return(0,s.A)(this,CameraScreen),function _callSuper(t,n,o){return n=(0,u.A)(n),(0,l.A)(t,_isNativeReflectConstruct()?Reflect.construct(n,o||[],(0,u.A)(t).constructor):n.apply(t,o))}(this,CameraScreen,arguments)}return(0,h.A)(CameraScreen,t),(0,c.A)(CameraScreen,[{key:"componentDidMount",value:function componentDidMount(){(0,this.props.onFocus)()}},{key:"componentWillUnmount",value:function componentWillUnmount(){(0,this.props.onStop)()}},{key:"render",value:function render(){var t=this,n=this.props,o=n.src,i=n.recordedVideo,r=n.recording,a=n.modes,s=n.supportsRecording,c=n.videoSources,l=n.showVideoSourceDropdown,u=n.showRecordingLength,p=n.onSubmit,h=n.i18n,f=n.mirror,y=n.onSnapshot,w=n.onStartRecording,R=n.onStopRecording,W=n.onDiscardRecordedVideo,U=n.recordingLengthSeconds,Q=!!i,Y=!Q&&s&&(isModeAvailable(a,"video-only")||isModeAvailable(a,"audio-only")||isModeAvailable(a,"video-audio")),Z=!Q&&isModeAvailable(a,"picture"),ee=s&&u&&!Q,te=l&&c&&c.length>1,ne={playsinline:!0};return i?(ne.muted=!1,ne.controls=!0,ne.src=i,this.videoElement&&(this.videoElement.srcObject=void 0)):(ne.muted=!0,ne.autoplay=!0,ne.srcObject=o),(0,v.h)("div",{className:"uppy uppy-Webcam-container"},(0,v.h)("div",{className:"uppy-Webcam-videoContainer"},(0,v.h)("video",_extends({ref:function ref(n){return t.videoElement=n},className:"uppy-Webcam-video  ".concat(f?"uppy-Webcam-video--mirrored":"")},ne))),(0,v.h)("div",{className:"uppy-Webcam-footer"},(0,v.h)("div",{className:"uppy-Webcam-videoSourceContainer"},te?function(t){var n=t.currentDeviceId,o=t.videoSources,i=t.onChangeVideoSource;return(0,v.h)("div",{className:"uppy-Webcam-videoSource"},(0,v.h)("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:function onChange(t){i(t.target.value)}},o.map(function(t){return(0,v.h)("option",{key:t.deviceId,value:t.deviceId,selected:t.deviceId===n},t.label)})))}(this.props):null),(0,v.h)("div",{className:"uppy-Webcam-buttonContainer"},Z&&(0,v.h)(SnapshotButton,{onSnapshot:y,i18n:h}),Y&&(0,v.h)(RecordButton,{recording:r,onStartRecording:w,onStopRecording:R,i18n:h}),Q&&(0,v.h)(X,{onSubmit:p,i18n:h}),Q&&(0,v.h)(J,{onDiscard:W,i18n:h})),(0,v.h)("div",{className:"uppy-Webcam-recordingLength"},ee&&(0,v.h)(RecordingLength,{recordingLengthSeconds:U,i18n:h}))))}}])}(v.uA),PermissionsScreen=function(t){var n=t.icon,o=t.i18n,i=t.hasCamera;return(0,v.h)("div",{className:"uppy-Webcam-permissons"},(0,v.h)("div",{className:"uppy-Webcam-permissonsIcon"},n()),(0,v.h)("h1",{className:"uppy-Webcam-title"},o(i?"allowAccessTitle":"noCameraTitle")),(0,v.h)("p",null,o(i?"allowAccessDescription":"noCameraDescription")))},Y={strings:{pluginNameCamera:"Camera",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",recordingLength:"Recording length %{recording_length}",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}};function ownKeys(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(o),!0).forEach(function(n){(0,a.A)(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function Webcam_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Webcam_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Webcam_extends(){return Webcam_extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Webcam_extends.apply(this,arguments)}function _classPrivateFieldLooseBase(t,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw new TypeError("attempted to use private field on non-instance");return t}var Z=0;function _classPrivateFieldLooseKey(t){return"__private_"+Z+++"_"+t}function toMimeType(t){return"."===t[0]?W[t.slice(1)]:t}function isVideoMimeType(t){return/^video\/[^*]+$/.test(t)}function isImageMimeType(t){return/^image\/[^*]+$/.test(t)}function Webcam_isModeAvailable(t,n){return t.includes(n)}var ee=_classPrivateFieldLooseKey("enableMirror"),te=function(t){function Webcam(t,n){var o;(0,s.A)(this,Webcam),o=function Webcam_callSuper(t,n,o){return n=(0,u.A)(n),(0,l.A)(t,Webcam_isNativeReflectConstruct()?Reflect.construct(n,o||[],(0,u.A)(t).constructor):n.apply(t,o))}(this,Webcam,[t,n]),Object.defineProperty(o,ee,{writable:!0,value:void 0}),o.mediaDevices=function getMediaDevices(){return navigator.mediaDevices}(),o.supportsUserMedia=!!o.mediaDevices,o.protocol=location.protocol.match(/https/i)?"https":"http",o.id=o.opts.id||"Webcam",o.type="acquirer",o.capturedMediaFile=null,o.icon=function(){return(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,v.h)("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383",fillRule:"nonzero"}))},o.defaultLocale=Y;var i={onBeforeSnapshot:function onBeforeSnapshot(){return Promise.resolve()},countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,facingMode:"user",videoConstraints:void 0,preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1,mobileNativeCamera:U({tablet:!0})};return o.opts=_objectSpread(_objectSpread({},i),n),o.i18nInit(),o.title=o.i18n("pluginNameCamera"),_classPrivateFieldLooseBase(o,ee)[ee]=o.opts.mirror,o.install=o.install.bind(o),o.setPluginState=o.setPluginState.bind(o),o.render=o.render.bind(o),o.start=o.start.bind(o),o.stop=o.stop.bind(o),o.takeSnapshot=o.takeSnapshot.bind(o),o.startRecording=o.startRecording.bind(o),o.stopRecording=o.stopRecording.bind(o),o.discardRecordedVideo=o.discardRecordedVideo.bind(o),o.submit=o.submit.bind(o),o.oneTwoThreeSmile=o.oneTwoThreeSmile.bind(o),o.focus=o.focus.bind(o),o.changeVideoSource=o.changeVideoSource.bind(o),o.webcamActive=!1,o.opts.countdown&&(o.opts.onBeforeSnapshot=o.oneTwoThreeSmile),o.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null}),o}return(0,h.A)(Webcam,t),(0,c.A)(Webcam,[{key:"setOptions",value:function setOptions(t){!function _superPropGet(t,n,o,i){var r=(0,p.A)((0,u.A)(1&i?t.prototype:t),n,o);return 2&i&&"function"==typeof r?function(t){return r.apply(o,t)}:r}(Webcam,"setOptions",this,3)([_objectSpread(_objectSpread({},t),{},{videoConstraints:_objectSpread(_objectSpread({},this.opts.videoConstraints),null==t?void 0:t.videoConstraints)})])}},{key:"hasCameraCheck",value:function hasCameraCheck(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then(function(t){return t.some(function(t){return"videoinput"===t.kind})}):Promise.resolve(!1)}},{key:"isAudioOnly",value:function isAudioOnly(){return 1===this.opts.modes.length&&"audio-only"===this.opts.modes[0]}},{key:"getConstraints",value:function getConstraints(t){void 0===t&&(t=null);var n=-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),o=!this.isAudioOnly()&&(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")),i=_objectSpread(_objectSpread({},this.opts.videoConstraints||{facingMode:this.opts.facingMode}),t?{deviceId:t,facingMode:null}:{});return{audio:n,video:!!o&&i}}},{key:"start",value:function start(t){var n=this;if(void 0===t&&(t=null),!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(_classPrivateFieldLooseBase(this,ee)[ee]=!0);var o=this.getConstraints(t&&t.deviceId?t.deviceId:null);this.hasCameraCheck().then(function(i){return n.setPluginState({hasCamera:i}),n.mediaDevices.getUserMedia(o).then(function(o){n.stream=o;var i=null,r=n.isAudioOnly()?o.getAudioTracks():o.getVideoTracks();t&&t.deviceId?r.forEach(function(n){n.getSettings().deviceId===t.deviceId&&(i=n.getSettings().deviceId)}):i=r[0].getSettings().deviceId,n.updateVideoSources(),n.setPluginState({currentDeviceId:i,cameraReady:!0})}).catch(function(t){n.setPluginState({cameraReady:!1,cameraError:t}),n.uppy.info(t.message,"error")})})}},{key:"getMediaRecorderOptions",value:function getMediaRecorderOptions(){var t={};if(MediaRecorder.isTypeSupported){var n=this.uppy.opts.restrictions,o=[];this.opts.preferredVideoMimeType?o=[this.opts.preferredVideoMimeType]:n.allowedFileTypes&&(o=n.allowedFileTypes.map(toMimeType).filter(isVideoMimeType));var i=o.filter(function filterSupportedTypes(t){return MediaRecorder.isTypeSupported(t)&&getFileTypeExtension(t)});i.length>0&&(t.mimeType=i[0])}return t}},{key:"startRecording",value:function startRecording(){var t=this;this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];var n=!1;this.recorder.addEventListener("dataavailable",function(o){t.recordingChunks.push(o.data);var i=t.uppy.opts.restrictions;if(t.recordingChunks.length>1&&null!=i.maxFileSize&&!n){var r=t.recordingChunks.reduce(function(t,n){return t+n.size},0),a=3*((r-t.recordingChunks[0].size)/(t.recordingChunks.length-1));r>Math.max(0,i.maxFileSize-a)&&(n=!0,t.uppy.info(t.i18n("recordingStoppedMaxSize"),"warning",4e3),t.stopRecording())}}),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval(function(){var n=t.getPluginState().recordingLengthSeconds;t.setPluginState({recordingLengthSeconds:n+1})},1e3)),this.setPluginState({isRecording:!0})}},{key:"stopRecording",value:function stopRecording(){var t=this;return new Promise(function(n){t.recorder.addEventListener("stop",function(){n()}),t.recorder.stop(),t.opts.showRecordingLength&&(clearInterval(t.recordingLengthTimer),t.setPluginState({recordingLengthSeconds:0}))}).then(function(){return t.setPluginState({isRecording:!1}),t.getVideo()}).then(function(n){try{t.capturedMediaFile=n,t.setPluginState({recordedVideo:URL.createObjectURL(n.data)}),_classPrivateFieldLooseBase(t,ee)[ee]=!1}catch(n){n.isRestriction||t.uppy.log(n)}}).then(function(){t.recordingChunks=null,t.recorder=null},function(n){throw t.recordingChunks=null,t.recorder=null,n})}},{key:"discardRecordedVideo",value:function discardRecordedVideo(){this.setPluginState({recordedVideo:null}),this.opts.mirror&&(_classPrivateFieldLooseBase(this,ee)[ee]=!0),this.capturedMediaFile=null}},{key:"submit",value:function submit(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(t){t.isRestriction||this.uppy.log(t,"error")}}},{key:"stop",value:(n=(0,r.A)(f.mark(function _callee(){var t,n,o=this;return f.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.stream&&(t=this.stream.getAudioTracks(),n=this.stream.getVideoTracks(),t.concat(n).forEach(function(t){return t.stop()})),!this.recorder){i.next=1;break}return i.next=1,new Promise(function(t){o.recorder.addEventListener("stop",t,{once:!0}),o.recorder.stop(),o.opts.showRecordingLength&&clearInterval(o.recordingLengthTimer)});case 1:this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,isRecording:!1,recordingLengthSeconds:0});case 2:case"end":return i.stop()}},_callee,this)})),function stop(){return n.apply(this,arguments)})},{key:"getVideoElement",value:function getVideoElement(){return this.el.querySelector(".uppy-Webcam-video")}},{key:"oneTwoThreeSmile",value:function oneTwoThreeSmile(){var t=this;return new Promise(function(n,o){var i=t.opts.countdown,r=setInterval(function(){if(!t.webcamActive)return clearInterval(r),t.captureInProgress=!1,o(new Error("Webcam is not active"));i>0?(t.uppy.info("".concat(i,"..."),"warning",800),i--):(clearInterval(r),t.uppy.info(t.i18n("smile"),"success",1500),setTimeout(function(){return n()},1500))},1e3)})}},{key:"takeSnapshot",value:function takeSnapshot(){var t=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(n){var o="object"===(0,i.A)(n)?n.message:n;return t.uppy.info(o,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: ".concat(o)))}).then(function(){return t.getImage()}).then(function(n){t.captureInProgress=!1;try{t.uppy.addFile(n)}catch(n){n.isRestriction||t.uppy.log(n)}},function(n){throw t.captureInProgress=!1,n}))}},{key:"getImage",value:function getImage(){var t=this,n=this.getVideoElement();if(!n)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var o=n.videoWidth,i=n.videoHeight,r=document.createElement("canvas");r.width=o,r.height=i,r.getContext("2d").drawImage(n,0,0);var a=this.uppy.opts.restrictions,s=[];this.opts.preferredImageMimeType?s=[this.opts.preferredImageMimeType]:a.allowedFileTypes&&(s=a.allowedFileTypes.map(toMimeType).filter(isImageMimeType));var c=s[0]||"image/jpeg",l=getFileTypeExtension(c)||"jpg",u="cam-".concat(Date.now(),".").concat(l);return function canvasToBlob(t,n,o){return new Promise(function(i){t.toBlob(i,n,o)})}(r,c).then(function(n){return{source:t.id,name:u,data:new Blob([n],{type:c}),type:c}})}},{key:"getVideo",value:function getVideo(){var t=this.recordingChunks.find(function(t){var n;return(null==(n=t.type)?void 0:n.length)>0}).type,n=getFileTypeExtension(t);if(!n)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'.concat(t,'"')));var o="webcam-".concat(Date.now(),".").concat(n),i=new Blob(this.recordingChunks,{type:t}),r={source:this.id,name:o,data:new Blob([i],{type:t}),type:t};return Promise.resolve(r)}},{key:"focus",value:function focus(){var t=this;this.opts.countdown&&setTimeout(function(){t.uppy.info(t.i18n("smile"),"success",1500)},1e3)}},{key:"changeVideoSource",value:function changeVideoSource(t){this.stop(),this.start({deviceId:t})}},{key:"updateVideoSources",value:function updateVideoSources(){var t=this;this.mediaDevices.enumerateDevices().then(function(n){t.setPluginState({videoSources:n.filter(function(t){return"videoinput"===t.kind})})})}},{key:"render",value:function render(){this.webcamActive||this.start();var t=this.getPluginState();return t.cameraReady&&t.hasCamera?(0,v.h)(Q,Webcam_extends({},t,{onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedVideo:this.discardRecordedVideo,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start,recording:t.isRecording,mirror:_classPrivateFieldLooseBase(this,ee)[ee],src:this.stream})):(0,v.h)(PermissionsScreen,{icon:CameraIcon,i18n:this.i18n,hasCamera:t.hasCamera})}},{key:"install",value:function install(){var t,n=this,o=this.opts,i=o.mobileNativeCamera,r=o.modes,a=o.facingMode,s=o.videoConstraints,c=this.opts.target;i&&c?null==(t=this.getTargetPlugin(c))||t.setOptions({showNativeVideoCameraButton:Webcam_isModeAvailable(r,"video-only")||Webcam_isModeAvailable(r,"video-audio"),showNativePhotoCameraButton:Webcam_isModeAvailable(r,"picture"),nativeCameraFacingMode:(null==s?void 0:s.facingMode)||a}):(this.setPluginState({cameraReady:!1,recordingLengthSeconds:0}),c&&this.mount(c,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=function(){if(n.updateVideoSources(),n.stream){var t=!0,o=n.getPluginState(),i=o.videoSources,r=o.currentDeviceId;i.forEach(function(n){r===n.deviceId&&(t=!1)}),t&&(n.stop(),n.start())}}))}},{key:"uninstall",value:function uninstall(){this.stop(),this.unmount()}},{key:"onUnmount",value:function onUnmount(){this.stop()}}]);var n}(y.A);te.VERSION="3.3.6"},83237:(t,n,o)=>{o(70511)("replace")}}]);
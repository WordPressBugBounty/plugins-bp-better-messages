/*! For license information please see webcam.min.js.LICENSE.txt */
"use strict";(this.webpackChunkBetterMessages=this.webpackChunkBetterMessages||[]).push([["node_modules_uppy_webcam_lib_index_js"],{3296:(t,n,r)=>{r(45806)},3717:(t,n,r)=>{var i=r(79504),o=2147483647,a=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,c="Overflow: input needs wider integers to process",u=RangeError,l=i(s.exec),p=Math.floor,h=String.fromCharCode,f=i("".charCodeAt),v=i([].join),y=i([].push),w=i("".replace),R=i("".split),U=i("".toLowerCase),digitToBasic=function(t){return t+22+75*(t<26)},adapt=function(t,n,r){var i=0;for(t=r?p(t/700):t>>1,t+=p(t/n);t>455;)t=p(t/35),i+=36;return p(i+36*t/(t+38))},encode=function(t){var n=[];t=function(t){for(var n=[],r=0,i=t.length;r<i;){var o=f(t,r++);if(o>=55296&&o<=56319&&r<i){var a=f(t,r++);56320==(64512&a)?y(n,((1023&o)<<10)+(1023&a)+65536):(y(n,o),r--)}else y(n,o)}return n}(t);var r,i,a=t.length,s=128,l=0,w=72;for(r=0;r<t.length;r++)(i=t[r])<128&&y(n,h(i));var R=n.length,U=R;for(R&&y(n,"-");U<a;){var W=o;for(r=0;r<t.length;r++)(i=t[r])>=s&&i<W&&(W=i);var X=U+1;if(W-s>p((o-l)/X))throw new u(c);for(l+=(W-s)*X,s=W,r=0;r<t.length;r++){if((i=t[r])<s&&++l>o)throw new u(c);if(i===s){for(var J=l,Q=36;;){var Y=Q<=w?1:Q>=w+26?26:Q-w;if(J<Y)break;var Z=J-Y,ee=36-Y;y(n,h(digitToBasic(Y+Z%ee))),J=p(Z/ee),Q+=36}y(n,h(digitToBasic(J))),w=adapt(l,X,U===R),l=0,U++}}l++,s++}return v(n,"")};t.exports=function(t){var n,r,i=[],o=R(w(U(t),s,"."),".");for(n=0;n<o.length;n++)r=o[n],y(i,l(a,r)?"xn--"+encode(r):r);return v(i,".")}},10362:(t,n,r)=>{r(25276),r(27495),r(90906),t.exports=isMobile,t.exports.isMobile=isMobile,t.exports.default=isMobile;var i=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/CrOS/,a=/android|ipad|playbook|silk/i;function isMobile(t){t||(t={});var n=t.ua;if(n||"undefined"==typeof navigator||(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),"string"!=typeof n)return!1;var r=i.test(n)&&!o.test(n)||!!t.tablet&&a.test(n);return!r&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==n.indexOf("Macintosh")&&-1!==n.indexOf("Safari")&&(r=!0),r}},10826:(t,n,r)=>{r.d(n,{A:()=>isDOMElement});var i=r(18180);function isDOMElement(t){return"object"===(0,i.A)(t)&&null!==t&&("nodeType"in t&&t.nodeType===Node.ELEMENT_NODE)}},13656:(t,n,r)=>{r.d(n,{A:()=>h});var i=r(51531),o=r(18180),a=r(58237),s=r(84285);r(52675),r(83237),r(31073),r(16280),r(76918),r(2008),r(51629),r(64346),r(48598),r(44114),r(69085),r(67945),r(84185),r(83851),r(81278),r(79432),r(26099),r(84864),r(57465),r(27495),r(87745),r(38781),r(25440),r(90744),r(98992),r(54520),r(3949),r(23500);function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(n){(0,i.A)(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _classPrivateFieldLooseBase(t,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw new TypeError("attempted to use private field on non-instance");return t}var c=0;function _classPrivateFieldLooseKey(t){return"__private_"+c+++"_"+t}function insertReplacement(t,n,r){var i=[];return t.forEach(function(t){return"string"!=typeof t?i.push(t):n[Symbol.split](t).forEach(function(t,n,o){""!==t&&i.push(t),n<o.length-1&&i.push(r)})}),i}function interpolate(t,n){var r=/\$/g,i=[t];if(null==n)return i;for(var o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];if("_"!==s){var c=n[s];"string"==typeof c&&(c=r[Symbol.replace](c,"$$$$")),i=insertReplacement(i,new RegExp("%\\{".concat(s,"\\}"),"g"),c)}}return i}var u=function defaultOnMissingKey(t){throw new Error("missing string: ".concat(t))},l=_classPrivateFieldLooseKey("onMissingKey"),p=_classPrivateFieldLooseKey("apply"),h=function(){return(0,s.A)(function Translator(t,n){(0,a.A)(this,Translator);var r=(void 0===n?{}:n).onMissingKey,i=void 0===r?u:r;Object.defineProperty(this,p,{value:_apply2}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.locale={strings:{},pluralize:function pluralize(t){return 1===t?0:1}},Array.isArray(t)?t.forEach(_classPrivateFieldLooseBase(this,p)[p],this):_classPrivateFieldLooseBase(this,p)[p](t),_classPrivateFieldLooseBase(this,l)[l]=i},[{key:"translate",value:function translate(t,n){return this.translateArray(t,n).join("")}},{key:"translateArray",value:function translateArray(t,n){var r=this.locale.strings[t];if(null==r&&(_classPrivateFieldLooseBase(this,l)[l](t),r=t),"object"===(0,o.A)(r)){if(n&&void 0!==n.smart_count)return interpolate(r[this.locale.pluralize(n.smart_count)],n);throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof r)throw new Error("string was not a string");return interpolate(r,n)}}])}();function _apply2(t){if(null!=t&&t.strings){var n=this.locale;Object.assign(this.locale,{strings:_objectSpread(_objectSpread({},n.strings),t.strings),pluralize:t.pluralize||n.pluralize})}}},27208:(t,n,r)=>{var i=r(46518),o=r(69565);i({target:"URL",proto:!0,enumerable:!0},{toJSON:function toJSON(){return o(URL.prototype.toString,this)}})},31073:(t,n,r)=>{r(70511)("split")},32744:(t,n,r)=>{r.d(n,{A:()=>c});r(52675),r(2008),r(51629),r(44114),r(67945),r(84185),r(83851),r(81278),r(79432),r(26099),r(98992),r(54520),r(3949),r(23500);var i=r(51531),o=r(58237),a=r(84285),s=(r(16280),r(76918),r(94170),r(13656));function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(n){(0,i.A)(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var c=function(){return(0,a.A)(function BasePlugin(t,n){(0,o.A)(this,BasePlugin),this.uppy=t,this.opts=null!=n?n:{}},[{key:"getPluginState",value:function getPluginState(){var t=this.uppy.getState().plugins;return(null==t?void 0:t[this.id])||{}}},{key:"setPluginState",value:function setPluginState(t){if(t){var n=this.uppy.getState().plugins;this.uppy.setState({plugins:_objectSpread(_objectSpread({},n),{},(0,i.A)({},this.id,_objectSpread(_objectSpread({},n[this.id]),t)))})}}},{key:"setOptions",value:function setOptions(t){this.opts=_objectSpread(_objectSpread({},this.opts),t),this.setPluginState(void 0),this.i18nInit()}},{key:"i18nInit",value:function i18nInit(){var t=new s.A([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}},{key:"addTarget",value:function addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}},{key:"install",value:function install(){}},{key:"uninstall",value:function uninstall(){}},{key:"update",value:function update(t){}},{key:"afterUpdate",value:function afterUpdate(){}}])}()},36118:(t,n,r)=>{r.d(n,{A:()=>i});const i=function getTextDirection(t){for(var n;t&&!t.dir;)t=t.parentNode;return null==(n=t)?void 0:n.dir}},36480:(t,n,r)=>{r.d(n,{FK:()=>k,Ob:()=>K,XX:()=>G,_3:()=>b,fF:()=>o,h:()=>_,uA:()=>x,v2:()=>H});var i,o,a,s,c,u,l,p,h,f,v,y=r(18180),w=(r(51629),r(25276),r(64346),r(23792),r(62062),r(44114),r(34782),r(15086),r(26910),r(94170),r(62010),r(26099),r(3362),r(27495),r(90906),r(31415),r(47764),r(25440),r(48718),r(98992),r(3949),r(81454),r(37550),r(23500),r(62953),r(76031),{}),R=[],U=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,W=Array.isArray;function d(t,n){for(var r in n)t[r]=n[r];return t}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function _(t,n,r){var o,a,s,c={};for(s in n)"key"==s?o=n[s]:"ref"==s?a=n[s]:c[s]=n[s];if(arguments.length>2&&(c.children=arguments.length>3?i.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===c[s]&&(c[s]=t.defaultProps[s]);return m(t,c,o,a,null)}function m(t,n,r,i,s){var c={type:t,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==s?++a:s,__i:-1,__u:0};return null==s&&null!=o.vnode&&o.vnode(c),c}function b(){return{current:null}}function k(t){return t.children}function x(t,n){this.props=t,this.context=n}function S(t,n){if(null==n)return t.__?S(t.__,t.__i+1):null;for(var r;n<t.__k.length;n++)if(null!=(r=t.__k[n])&&null!=r.__e)return r.__e;return"function"==typeof t.type?S(t):null}function C(t){var n,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(r=t.__k[n])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return C(t)}}function M(t){(!t.__d&&(t.__d=!0)&&s.push(t)&&!$.__r++||c!=o.debounceRendering)&&((c=o.debounceRendering)||u)($)}function $(){for(var t,n,r,i,a,c,u,p=1;s.length;)s.length>p&&s.sort(l),t=s.shift(),p=s.length,t.__d&&(r=void 0,a=(i=(n=t).__v).__e,c=[],u=[],n.__P&&((r=d({},i)).__v=i.__v+1,o.vnode&&o.vnode(r),O(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[a]:null,c,null==a?S(i):a,!!(32&i.__u),u),r.__v=i.__v,r.__.__k[r.__i]=r,N(c,r,u),r.__e!=a&&C(r)));$.__r=0}function I(t,n,r,i,o,a,s,c,u,l,p){var h,f,v,y,U,W,X=i&&i.__k||R,J=n.length;for(u=P(r,n,X,u,J),h=0;h<J;h++)null!=(v=r.__k[h])&&(f=-1==v.__i?w:X[v.__i]||w,v.__i=h,W=O(t,v,f,o,a,s,c,u,l,p),y=v.__e,v.ref&&f.ref!=v.ref&&(f.ref&&B(f.ref,null,v),p.push(v.ref,v.__c||y,v)),null==U&&null!=y&&(U=y),4&v.__u||f.__k===v.__k?u=A(v,u,t):"function"==typeof v.type&&void 0!==W?u=W:y&&(u=y.nextSibling),v.__u&=-7);return r.__e=U,u}function P(t,n,r,i,o){var a,s,c,u,l,p=r.length,h=p,f=0;for(t.__k=new Array(o),a=0;a<o;a++)null!=(s=n[a])&&"boolean"!=typeof s&&"function"!=typeof s?(u=a+f,(s=t.__k[a]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?m(null,s,null,null,null):W(s)?m(k,{children:s},null,null,null):null==s.constructor&&s.__b>0?m(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,c=null,-1!=(l=s.__i=L(s,r,u,h))&&(h--,(c=r[l])&&(c.__u|=2)),null==c||null==c.__v?(-1==l&&(o>p?f--:o<p&&f++),"function"!=typeof s.type&&(s.__u|=4)):l!=u&&(l==u-1?f--:l==u+1?f++:(l>u?f--:f++,s.__u|=4))):t.__k[a]=null;if(h)for(a=0;a<p;a++)null!=(c=r[a])&&!(2&c.__u)&&(c.__e==i&&(i=S(c)),D(c,c));return i}function A(t,n,r){var i,o;if("function"==typeof t.type){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,n=A(i[o],n,r));return n}t.__e!=n&&(n&&t.type&&!r.contains(n)&&(n=S(t)),r.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}function H(t,n){return n=n||[],null==t||"boolean"==typeof t||(W(t)?t.some(function(t){H(t,n)}):n.push(t)),n}function L(t,n,r,i){var o,a,s,c=t.key,u=t.type,l=n[r],p=null!=l&&!(2&l.__u);if(null===l&&null==t.key||p&&c==l.key&&u==l.type)return r;if(i>(p?1:0))for(o=r-1,a=r+1;o>=0||a<n.length;)if(null!=(l=n[s=o>=0?o--:a++])&&!(2&l.__u)&&c==l.key&&u==l.type)return s;return-1}function T(t,n,r){"-"==n[0]?t.setProperty(n,null==r?"":r):t[n]=null==r?"":"number"!=typeof r||U.test(n)?r:r+"px"}function j(t,n,r,i,o){var a,s;e:if("style"==n)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(n in i)r&&n in r||T(t.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||T(t.style,n,r[n])}else if("o"==n[0]&&"n"==n[1])a=n!=(n=n.replace(p,"$1")),s=n.toLowerCase(),n=s in t||"onFocusOut"==n||"onFocusIn"==n?s.slice(2):n.slice(2),t.l||(t.l={}),t.l[n+a]=r,r?i?r.u=i.u:(r.u=h,t.addEventListener(n,a?v:f,a)):t.removeEventListener(n,a?v:f,a);else{if("http://www.w3.org/2000/svg"==o)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=n&&"height"!=n&&"href"!=n&&"list"!=n&&"form"!=n&&"tabIndex"!=n&&"download"!=n&&"rowSpan"!=n&&"colSpan"!=n&&"role"!=n&&"popover"!=n&&n in t)try{t[n]=null==r?"":r;break e}catch(t){}"function"==typeof r||(null==r||!1===r&&"-"!=n[4]?t.removeAttribute(n):t.setAttribute(n,"popover"==n&&1==r?"":r))}}function F(t){return function(n){if(this.l){var r=this.l[n.type+t];if(null==n.t)n.t=h++;else if(n.t<r.u)return;return r(o.event?o.event(n):n)}}}function O(t,n,r,i,a,s,c,u,l,p){var h,f,v,y,w,R,U,X,J,Q,Y,Z,ee,te,ne,re,ie,oe=n.type;if(null!=n.constructor)return null;128&r.__u&&(l=!!(32&r.__u),s=[u=n.__e=r.__e]),(h=o.__b)&&h(n);e:if("function"==typeof oe)try{if(X=n.props,J="prototype"in oe&&oe.prototype.render,Q=(h=oe.contextType)&&i[h.__c],Y=h?Q?Q.props.value:h.__:i,r.__c?U=(f=n.__c=r.__c).__=f.__E:(J?n.__c=f=new oe(X,Y):(n.__c=f=new x(X,Y),f.constructor=oe,f.render=E),Q&&Q.sub(f),f.props=X,f.state||(f.state={}),f.context=Y,f.__n=i,v=f.__d=!0,f.__h=[],f._sb=[]),J&&null==f.__s&&(f.__s=f.state),J&&null!=oe.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=d({},f.__s)),d(f.__s,oe.getDerivedStateFromProps(X,f.__s))),y=f.props,w=f.state,f.__v=n,v)J&&null==oe.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),J&&null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(J&&null==oe.getDerivedStateFromProps&&X!==y&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(X,Y),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(X,f.__s,Y)||n.__v==r.__v){for(n.__v!=r.__v&&(f.props=X,f.state=f.__s,f.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(t){t&&(t.__=n)}),Z=0;Z<f._sb.length;Z++)f.__h.push(f._sb[Z]);f._sb=[],f.__h.length&&c.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(X,f.__s,Y),J&&null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(y,w,R)})}if(f.context=Y,f.props=X,f.__P=t,f.__e=!1,ee=o.__r,te=0,J){for(f.state=f.__s,f.__d=!1,ee&&ee(n),h=f.render(f.props,f.state,f.context),ne=0;ne<f._sb.length;ne++)f.__h.push(f._sb[ne]);f._sb=[]}else do{f.__d=!1,ee&&ee(n),h=f.render(f.props,f.state,f.context),f.state=f.__s}while(f.__d&&++te<25);f.state=f.__s,null!=f.getChildContext&&(i=d(d({},i),f.getChildContext())),J&&!v&&null!=f.getSnapshotBeforeUpdate&&(R=f.getSnapshotBeforeUpdate(y,w)),re=h,null!=h&&h.type===k&&null==h.key&&(re=V(h.props.children)),u=I(t,W(re)?re:[re],n,r,i,a,s,c,u,l,p),f.base=n.__e,n.__u&=-161,f.__h.length&&c.push(f),U&&(f.__E=f.__=null)}catch(t){if(n.__v=null,l||null!=s)if(t.then){for(n.__u|=l?160:128;u&&8==u.nodeType&&u.nextSibling;)u=u.nextSibling;s[s.indexOf(u)]=null,n.__e=u}else{for(ie=s.length;ie--;)g(s[ie]);z(n)}else n.__e=r.__e,n.__k=r.__k,t.then||z(n);o.__e(t,n,r)}else null==s&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):u=n.__e=q(r.__e,n,r,i,a,s,c,l,p);return(h=o.diffed)&&h(n),128&n.__u?void 0:u}function z(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(z)}function N(t,n,r){for(var i=0;i<r.length;i++)B(r[i],r[++i],r[++i]);o.__c&&o.__c(n,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(t){t.call(n)})}catch(t){o.__e(t,n.__v)}})}function V(t){return"object"!=(0,y.A)(t)||null==t||t.__b&&t.__b>0?t:W(t)?t.map(V):d({},t)}function q(t,n,r,a,s,c,u,l,p){var h,f,v,y,R,U,X,J=r.props,Q=n.props,Y=n.type;if("svg"==Y?s="http://www.w3.org/2000/svg":"math"==Y?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=c)for(h=0;h<c.length;h++)if((R=c[h])&&"setAttribute"in R==!!Y&&(Y?R.localName==Y:3==R.nodeType)){t=R,c[h]=null;break}if(null==t){if(null==Y)return document.createTextNode(Q);t=document.createElementNS(s,Y,Q.is&&Q),l&&(o.__m&&o.__m(n,c),l=!1),c=null}if(null==Y)J===Q||l&&t.data==Q||(t.data=Q);else{if(c=c&&i.call(t.childNodes),J=r.props||w,!l&&null!=c)for(J={},h=0;h<t.attributes.length;h++)J[(R=t.attributes[h]).name]=R.value;for(h in J)if(R=J[h],"children"==h);else if("dangerouslySetInnerHTML"==h)v=R;else if(!(h in Q)){if("value"==h&&"defaultValue"in Q||"checked"==h&&"defaultChecked"in Q)continue;j(t,h,null,R,s)}for(h in Q)R=Q[h],"children"==h?y=R:"dangerouslySetInnerHTML"==h?f=R:"value"==h?U=R:"checked"==h?X=R:l&&"function"!=typeof R||J[h]===R||j(t,h,R,J[h],s);if(f)l||v&&(f.__html==v.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),n.__k=[];else if(v&&(t.innerHTML=""),I("template"==n.type?t.content:t,W(y)?y:[y],n,r,a,"foreignObject"==Y?"http://www.w3.org/1999/xhtml":s,c,u,c?c[0]:r.__k&&S(r,0),l,p),null!=c)for(h=c.length;h--;)g(c[h]);l||(h="value","progress"==Y&&null==U?t.removeAttribute("value"):null!=U&&(U!==t[h]||"progress"==Y&&!U||"option"==Y&&U!=J[h])&&j(t,h,U,J[h],s),h="checked",null!=X&&X!=t[h]&&j(t,h,X,J[h],s))}return t}function B(t,n,r){try{if("function"==typeof t){var i="function"==typeof t.__u;i&&t.__u(),i&&null==n||(t.__u=t(n))}else t.current=n}catch(t){o.__e(t,r)}}function D(t,n,r){var i,a;if(o.unmount&&o.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||B(i,null,n)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){o.__e(t,n)}i.base=i.__P=null}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&D(i[a],n,r||"function"!=typeof t.type);r||g(t.__e),t.__c=t.__=t.__e=void 0}function E(t,n,r){return this.constructor(t,r)}function G(t,n,r){var a,s,c,u;n==document&&(n=document.documentElement),o.__&&o.__(t,n),s=(a="function"==typeof r)?null:r&&r.__k||n.__k,c=[],u=[],O(n,t=(!a&&r||n).__k=_(k,null,[t]),s||w,w,n.namespaceURI,!a&&r?[r]:s?null:n.firstChild?i.call(n.childNodes):null,c,!a&&r?r:s?s.__e:n.firstChild,a,u),N(c,t,u)}function K(t,n,r){var o,a,s,c,u=d({},t.props);for(s in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),n)"key"==s?o=n[s]:"ref"==s?a=n[s]:u[s]=void 0===n[s]&&null!=c?c[s]:n[s];return arguments.length>2&&(u.children=arguments.length>3?i.call(arguments,2):r),m(t.type,u,o||t.key,a||t.ref,null)}i=R.slice,o={__e:function __e(t,n,r,i){for(var o,a,s;n=n.__;)if((o=n.__c)&&!o.__)try{if((a=o.constructor)&&null!=a.getDerivedStateFromError&&(o.setState(a.getDerivedStateFromError(t)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,i||{}),s=o.__d),s)return o.__E=o}catch(n){t=n}throw t}},a=0,x.prototype.setState=function(t,n){var r;r=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},r),this.props)),t&&d(r,t),null!=t&&this.__v&&(n&&this._sb.push(n),M(this))},x.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),M(this))},x.prototype.render=k,s=[],u="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function e(t,n){return t.__v.__b-n.__v.__b},$.__r=0,p=/(PointerCapture)$|Capture$/i,h=0,f=F(!1),v=F(!0)},45806:(t,n,r)=>{r(47764);var i,o=r(46518),a=r(43724),s=r(67416),c=r(44576),u=r(76080),l=r(79504),p=r(36840),h=r(62106),f=r(90679),v=r(39297),y=r(44213),w=r(97916),R=r(67680),U=r(68183).codeAt,W=r(3717),X=r(655),J=r(10687),Q=r(22812),Y=r(98406),Z=r(91181),ee=Z.set,te=Z.getterFor("URL"),ne=Y.URLSearchParams,re=Y.getState,ie=c.URL,oe=c.TypeError,ae=c.parseInt,se=Math.floor,ce=Math.pow,ue=l("".charAt),le=l(/./.exec),pe=l([].join),de=l(1.1.toString),he=l([].pop),fe=l([].push),me=l("".replace),ge=l([].shift),ve=l("".split),_e=l("".slice),ye=l("".toLowerCase),be=l([].unshift),we="Invalid scheme",Se="Invalid host",ke="Invalid port",Pe=/[a-z]/i,xe=/[\d+-.a-z]/i,Re=/\d/,Oe=/^0x/i,Ce=/^[0-7]+$/,Ae=/^\d+$/,Me=/^[\da-f]+$/i,Le=/[\0\t\n\r #%/:<>?@[\\\]^|]/,je=/[\0\t\n\r #/:<>?@[\\\]^|]/,Te=/^[\u0000-\u0020]+/,Be=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Ie=/[\t\n\r]/g,serializeHost=function(t){var n,r,i,o;if("number"==typeof t){for(n=[],r=0;r<4;r++)be(n,t%256),t=se(t/256);return pe(n,".")}if("object"==typeof t){for(n="",i=function(t){for(var n=null,r=1,i=null,o=0,a=0;a<8;a++)0!==t[a]?(o>r&&(n=i,r=o),i=null,o=0):(null===i&&(i=a),++o);return o>r?i:n}(t),r=0;r<8;r++)o&&0===t[r]||(o&&(o=!1),i===r?(n+=r?":":"::",o=!0):(n+=de(t[r],16),r<7&&(n+=":")));return"["+n+"]"}return t},Ue={},Ee=y({},Ue,{" ":1,'"':1,"<":1,">":1,"`":1}),De=y({},Ee,{"#":1,"?":1,"{":1,"}":1}),Fe=y({},De,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(t,n){var r=U(t,0);return r>32&&r<127&&!v(n,t)?t:encodeURIComponent(t)},Ne={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(t,n){var r;return 2===t.length&&le(Pe,ue(t,0))&&(":"===(r=ue(t,1))||!n&&"|"===r)},startsWithWindowsDriveLetter=function(t){var n;return t.length>1&&isWindowsDriveLetter(_e(t,0,2))&&(2===t.length||"/"===(n=ue(t,2))||"\\"===n||"?"===n||"#"===n)},isSingleDot=function(t){return"."===t||"%2e"===ye(t)},isDoubleDot=function(t){return".."===(t=ye(t))||"%2e."===t||".%2e"===t||"%2e%2e"===t},We={},Ve={},ze={},He={},qe={},Ke={},$e={},Xe={},Je={},Ge={},Qe={},Ye={},Ze={},et={},tt={},nt={},rt={},it={},ot={},at={},st={},URLState=function(t,n,r){var i,o,a,s=X(t);if(n){if(o=this.parse(s))throw new oe(o);this.searchParams=null}else{if(void 0!==r&&(i=new URLState(r,!0)),o=this.parse(s,null,i))throw new oe(o);(a=re(new ne)).bindURL(this),this.searchParams=a}};URLState.prototype={type:"URL",parse:function(t,n,r){var o,a,s,c,u=this,l=n||We,p=0,h="",f=!1,y=!1,U=!1;for(t=X(t),n||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=me(t,Te,""),t=me(t,Be,"$1")),t=me(t,Ie,""),o=w(t);p<=o.length;){switch(a=o[p],l){case We:if(!a||!le(Pe,a)){if(n)return we;l=ze;continue}h+=ye(a),l=Ve;break;case Ve:if(a&&(le(xe,a)||"+"===a||"-"===a||"."===a))h+=ye(a);else{if(":"!==a){if(n)return we;h="",l=ze,p=0;continue}if(n&&(u.isSpecial()!==v(Ne,h)||"file"===h&&(u.includesCredentials()||null!==u.port)||"file"===u.scheme&&!u.host))return;if(u.scheme=h,n)return void(u.isSpecial()&&Ne[u.scheme]===u.port&&(u.port=null));h="","file"===u.scheme?l=et:u.isSpecial()&&r&&r.scheme===u.scheme?l=He:u.isSpecial()?l=Xe:"/"===o[p+1]?(l=qe,p++):(u.cannotBeABaseURL=!0,fe(u.path,""),l=ot)}break;case ze:if(!r||r.cannotBeABaseURL&&"#"!==a)return we;if(r.cannotBeABaseURL&&"#"===a){u.scheme=r.scheme,u.path=R(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,l=st;break}l="file"===r.scheme?et:Ke;continue;case He:if("/"!==a||"/"!==o[p+1]){l=Ke;continue}l=Je,p++;break;case qe:if("/"===a){l=Ge;break}l=it;continue;case Ke:if(u.scheme=r.scheme,a===i)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=R(r.path),u.query=r.query;else if("/"===a||"\\"===a&&u.isSpecial())l=$e;else if("?"===a)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=R(r.path),u.query="",l=at;else{if("#"!==a){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=R(r.path),u.path.length--,l=it;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=R(r.path),u.query=r.query,u.fragment="",l=st}break;case $e:if(!u.isSpecial()||"/"!==a&&"\\"!==a){if("/"!==a){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,l=it;continue}l=Ge}else l=Je;break;case Xe:if(l=Je,"/"!==a||"/"!==ue(h,p+1))continue;p++;break;case Je:if("/"!==a&&"\\"!==a){l=Ge;continue}break;case Ge:if("@"===a){f&&(h="%40"+h),f=!0,s=w(h);for(var W=0;W<s.length;W++){var J=s[W];if(":"!==J||U){var Q=percentEncode(J,Fe);U?u.password+=Q:u.username+=Q}else U=!0}h=""}else if(a===i||"/"===a||"?"===a||"#"===a||"\\"===a&&u.isSpecial()){if(f&&""===h)return"Invalid authority";p-=w(h).length+1,h="",l=Qe}else h+=a;break;case Qe:case Ye:if(n&&"file"===u.scheme){l=nt;continue}if(":"!==a||y){if(a===i||"/"===a||"?"===a||"#"===a||"\\"===a&&u.isSpecial()){if(u.isSpecial()&&""===h)return Se;if(n&&""===h&&(u.includesCredentials()||null!==u.port))return;if(c=u.parseHost(h))return c;if(h="",l=rt,n)return;continue}"["===a?y=!0:"]"===a&&(y=!1),h+=a}else{if(""===h)return Se;if(c=u.parseHost(h))return c;if(h="",l=Ze,n===Ye)return}break;case Ze:if(!le(Re,a)){if(a===i||"/"===a||"?"===a||"#"===a||"\\"===a&&u.isSpecial()||n){if(""!==h){var Y=ae(h,10);if(Y>65535)return ke;u.port=u.isSpecial()&&Y===Ne[u.scheme]?null:Y,h=""}if(n)return;l=rt;continue}return ke}h+=a;break;case et:if(u.scheme="file","/"===a||"\\"===a)l=tt;else{if(!r||"file"!==r.scheme){l=it;continue}switch(a){case i:u.host=r.host,u.path=R(r.path),u.query=r.query;break;case"?":u.host=r.host,u.path=R(r.path),u.query="",l=at;break;case"#":u.host=r.host,u.path=R(r.path),u.query=r.query,u.fragment="",l=st;break;default:startsWithWindowsDriveLetter(pe(R(o,p),""))||(u.host=r.host,u.path=R(r.path),u.shortenPath()),l=it;continue}}break;case tt:if("/"===a||"\\"===a){l=nt;break}r&&"file"===r.scheme&&!startsWithWindowsDriveLetter(pe(R(o,p),""))&&(isWindowsDriveLetter(r.path[0],!0)?fe(u.path,r.path[0]):u.host=r.host),l=it;continue;case nt:if(a===i||"/"===a||"\\"===a||"?"===a||"#"===a){if(!n&&isWindowsDriveLetter(h))l=it;else if(""===h){if(u.host="",n)return;l=rt}else{if(c=u.parseHost(h))return c;if("localhost"===u.host&&(u.host=""),n)return;h="",l=rt}continue}h+=a;break;case rt:if(u.isSpecial()){if(l=it,"/"!==a&&"\\"!==a)continue}else if(n||"?"!==a)if(n||"#"!==a){if(a!==i&&(l=it,"/"!==a))continue}else u.fragment="",l=st;else u.query="",l=at;break;case it:if(a===i||"/"===a||"\\"===a&&u.isSpecial()||!n&&("?"===a||"#"===a)){if(isDoubleDot(h)?(u.shortenPath(),"/"===a||"\\"===a&&u.isSpecial()||fe(u.path,"")):isSingleDot(h)?"/"===a||"\\"===a&&u.isSpecial()||fe(u.path,""):("file"===u.scheme&&!u.path.length&&isWindowsDriveLetter(h)&&(u.host&&(u.host=""),h=ue(h,0)+":"),fe(u.path,h)),h="","file"===u.scheme&&(a===i||"?"===a||"#"===a))for(;u.path.length>1&&""===u.path[0];)ge(u.path);"?"===a?(u.query="",l=at):"#"===a&&(u.fragment="",l=st)}else h+=percentEncode(a,De);break;case ot:"?"===a?(u.query="",l=at):"#"===a?(u.fragment="",l=st):a!==i&&(u.path[0]+=percentEncode(a,Ue));break;case at:n||"#"!==a?a!==i&&("'"===a&&u.isSpecial()?u.query+="%27":u.query+="#"===a?"%23":percentEncode(a,Ue)):(u.fragment="",l=st);break;case st:a!==i&&(u.fragment+=percentEncode(a,Ee))}p++}},parseHost:function(t){var n,r,i;if("["===ue(t,0)){if("]"!==ue(t,t.length-1))return Se;if(n=function(t){var n,r,i,o,a,s,c,u=[0,0,0,0,0,0,0,0],l=0,p=null,h=0,chr=function(){return ue(t,h)};if(":"===chr()){if(":"!==ue(t,1))return;h+=2,p=++l}for(;chr();){if(8===l)return;if(":"!==chr()){for(n=r=0;r<4&&le(Me,chr());)n=16*n+ae(chr(),16),h++,r++;if("."===chr()){if(0===r)return;if(h-=r,l>6)return;for(i=0;chr();){if(o=null,i>0){if(!("."===chr()&&i<4))return;h++}if(!le(Re,chr()))return;for(;le(Re,chr());){if(a=ae(chr(),10),null===o)o=a;else{if(0===o)return;o=10*o+a}if(o>255)return;h++}u[l]=256*u[l]+o,2!==++i&&4!==i||l++}if(4!==i)return;break}if(":"===chr()){if(h++,!chr())return}else if(chr())return;u[l++]=n}else{if(null!==p)return;h++,p=++l}}if(null!==p)for(s=l-p,l=7;0!==l&&s>0;)c=u[l],u[l--]=u[p+s-1],u[p+--s]=c;else if(8!==l)return;return u}(_e(t,1,-1)),!n)return Se;this.host=n}else if(this.isSpecial()){if(t=W(t),le(Le,t))return Se;if(n=function(t){var n,r,i,o,a,s,c,u=ve(t,".");if(u.length&&""===u[u.length-1]&&u.length--,(n=u.length)>4)return t;for(r=[],i=0;i<n;i++){if(""===(o=u[i]))return t;if(a=10,o.length>1&&"0"===ue(o,0)&&(a=le(Oe,o)?16:8,o=_e(o,8===a?1:2)),""===o)s=0;else{if(!le(10===a?Ae:8===a?Ce:Me,o))return t;s=ae(o,a)}fe(r,s)}for(i=0;i<n;i++)if(s=r[i],i===n-1){if(s>=ce(256,5-n))return null}else if(s>255)return null;for(c=he(r),i=0;i<r.length;i++)c+=r[i]*ce(256,3-i);return c}(t),null===n)return Se;this.host=n}else{if(le(je,t))return Se;for(n="",r=w(t),i=0;i<r.length;i++)n+=percentEncode(r[i],Ue);this.host=n}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return v(Ne,this.scheme)},shortenPath:function(){var t=this.path,n=t.length;!n||"file"===this.scheme&&1===n&&isWindowsDriveLetter(t[0],!0)||t.length--},serialize:function(){var t=this,n=t.scheme,r=t.username,i=t.password,o=t.host,a=t.port,s=t.path,c=t.query,u=t.fragment,l=n+":";return null!==o?(l+="//",t.includesCredentials()&&(l+=r+(i?":"+i:"")+"@"),l+=serializeHost(o),null!==a&&(l+=":"+a)):"file"===n&&(l+="//"),l+=t.cannotBeABaseURL?s[0]:s.length?"/"+pe(s,"/"):"",null!==c&&(l+="?"+c),null!==u&&(l+="#"+u),l},setHref:function(t){var n=this.parse(t);if(n)throw new oe(n);this.searchParams.update()},getOrigin:function(){var t=this.scheme,n=this.port;if("blob"===t)try{return new ct(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+serializeHost(this.host)+(null!==n?":"+n:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(X(t)+":",We)},getUsername:function(){return this.username},setUsername:function(t){var n=w(X(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<n.length;r++)this.username+=percentEncode(n[r],Fe)}},getPassword:function(){return this.password},setPassword:function(t){var n=w(X(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<n.length;r++)this.password+=percentEncode(n[r],Fe)}},getHost:function(){var t=this.host,n=this.port;return null===t?"":null===n?serializeHost(t):serializeHost(t)+":"+n},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Qe)},getHostname:function(){var t=this.host;return null===t?"":serializeHost(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Ye)},getPort:function(){var t=this.port;return null===t?"":X(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=X(t))?this.port=null:this.parse(t,Ze))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+pe(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,rt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=X(t))?this.query=null:("?"===ue(t,0)&&(t=_e(t,1)),this.query="",this.parse(t,at)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=X(t))?("#"===ue(t,0)&&(t=_e(t,1)),this.fragment="",this.parse(t,st)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ct=function URL(t){var n=f(this,ut),r=Q(arguments.length,1)>1?arguments[1]:void 0,i=ee(n,new URLState(t,!1,r));a||(n.href=i.serialize(),n.origin=i.getOrigin(),n.protocol=i.getProtocol(),n.username=i.getUsername(),n.password=i.getPassword(),n.host=i.getHost(),n.hostname=i.getHostname(),n.port=i.getPort(),n.pathname=i.getPathname(),n.search=i.getSearch(),n.searchParams=i.getSearchParams(),n.hash=i.getHash())},ut=ct.prototype,accessorDescriptor=function(t,n){return{get:function(){return te(this)[t]()},set:n&&function(t){return te(this)[n](t)},configurable:!0,enumerable:!0}};if(a&&(h(ut,"href",accessorDescriptor("serialize","setHref")),h(ut,"origin",accessorDescriptor("getOrigin")),h(ut,"protocol",accessorDescriptor("getProtocol","setProtocol")),h(ut,"username",accessorDescriptor("getUsername","setUsername")),h(ut,"password",accessorDescriptor("getPassword","setPassword")),h(ut,"host",accessorDescriptor("getHost","setHost")),h(ut,"hostname",accessorDescriptor("getHostname","setHostname")),h(ut,"port",accessorDescriptor("getPort","setPort")),h(ut,"pathname",accessorDescriptor("getPathname","setPathname")),h(ut,"search",accessorDescriptor("getSearch","setSearch")),h(ut,"searchParams",accessorDescriptor("getSearchParams")),h(ut,"hash",accessorDescriptor("getHash","setHash"))),p(ut,"toJSON",function toJSON(){return te(this).serialize()},{enumerable:!0}),p(ut,"toString",function toString(){return te(this).serialize()},{enumerable:!0}),ie){var lt=ie.createObjectURL,pt=ie.revokeObjectURL;lt&&p(ct,"createObjectURL",u(lt,ie)),pt&&p(ct,"revokeObjectURL",u(pt,ie))}J(ct,"URL"),o({global:!0,constructor:!0,forced:!s,sham:!a},{URL:ct})},63265:(t,n,r)=>{r.d(n,{A:()=>i});const i={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},73848:(t,n,r)=>{r.d(n,{A:()=>R});var i=r(58237),o=r(84285),a=r(68119),s=r(36858),c=r(31061),u=r(46983),l=(r(16280),r(76918),r(28706),r(84185),r(26099),r(3362),r(60825),r(36480)),p=r(10826);const h=function findDOMElement(t,n){return void 0===n&&(n=document),"string"==typeof t?n.querySelector(t):(0,p.A)(t)?t:null};var f=r(36118),v=r(32744);function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _classPrivateFieldLooseBase(t,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw new TypeError("attempted to use private field on non-instance");return t}var y=0;function _classPrivateFieldLooseKey(t){return"__private_"+y+++"_"+t}var w=_classPrivateFieldLooseKey("updateUI");const R=function(t){function UIPlugin(){var t;return(0,i.A)(this,UIPlugin),t=function _callSuper(t,n,r){return n=(0,s.A)(n),(0,a.A)(t,_isNativeReflectConstruct()?Reflect.construct(n,r||[],(0,s.A)(t).constructor):n.apply(t,r))}(this,UIPlugin,arguments),Object.defineProperty(t,w,{writable:!0,value:void 0}),t}return(0,c.A)(UIPlugin,t),(0,o.A)(UIPlugin,[{key:"getTargetPlugin",value:function getTargetPlugin(t){var n;if("function"==typeof(null==t?void 0:t.addTarget))(n=t)instanceof UIPlugin||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin}}));else if("function"==typeof t){var r=t;this.uppy.iteratePlugins(function(t){t instanceof r&&(n=t)})}return n}},{key:"mount",value:function mount(t,n){var r=this,i=n.id,o=h(t);if(o){this.isTargetDOMEl=!0;var a=document.createElement("div");return a.classList.add("uppy-Root"),_classPrivateFieldLooseBase(this,w)[w]=function debounce(t){var n,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=o,r||(r=Promise.resolve().then(function(){return r=null,t.apply(void 0,(0,u.A)(n))})),r}}(function(t){r.uppy.getPlugin(r.id)&&((0,l.XX)(r.render(t),a),r.afterUpdate())}),this.uppy.log("Installing ".concat(i," to a DOM element '").concat(t,"'")),this.opts.replaceTargetContent&&(o.innerHTML=""),(0,l.XX)(this.render(this.uppy.getState()),a),this.el=a,o.appendChild(a),a.dir=this.opts.direction||(0,f.A)(a)||"ltr",this.onMount(),this.el}var s=this.getTargetPlugin(t);if(s)return this.uppy.log("Installing ".concat(i," to ").concat(s.id)),this.parent=s,this.el=s.addTarget(n),this.onMount(),this.el;this.uppy.log("Not installing ".concat(i));var c="Invalid target option given to ".concat(i,".");throw c+="function"==typeof t?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(c)}},{key:"render",value:function render(t){throw new Error("Extend the render method to add your plugin to a DOM element")}},{key:"update",value:function update(t){var n,r;null!=this.el&&(null==(n=(r=_classPrivateFieldLooseBase(this,w))[w])||n.call(r,t))}},{key:"unmount",value:function unmount(){var t;this.isTargetDOMEl&&(null==(t=this.el)||t.remove());this.onUnmount()}},{key:"onMount",value:function onMount(){}},{key:"onUnmount",value:function onUnmount(){}}])}(v.A)},73886:(t,n,r)=>{r.r(n),r.d(n,{"default":()=>te});var i=r(18180),o=r(18443),a=r(51531),s=r(58237),c=r(84285),u=r(68119),l=r(36858),p=r(20423),h=r(31061),f=r(61792),v=(r(52675),r(16280),r(76918),r(28706),r(2008),r(50113),r(51629),r(74423),r(25276),r(23792),r(62062),r(44114),r(72712),r(34782),r(15086),r(59089),r(94170),r(69085),r(67945),r(84185),r(83851),r(81278),r(79432),r(26099),r(3362),r(60825),r(27495),r(90906),r(21699),r(47764),r(71761),r(98992),r(54520),r(72577),r(3949),r(81454),r(8872),r(37550),r(23500),r(62953),r(76031),r(3296),r(27208),r(48408),r(36480)),y=r(73848),w=r(80241),R={__proto__:null,"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};function getFileTypeExtension(t){var n=t.split(";",1);return t=(0,w.A)(n,1)[0],R[t]||null}var U=r(63265),W=r(10362);const CameraIcon=function(){return(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},(0,v.h)("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))},SnapshotButton=function(t){var n=t.onSnapshot,r=t.i18n;return(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:r("takePicture"),"aria-label":r("takePicture"),onClick:n,"data-uppy-super-focusable":!0},CameraIcon())};function RecordButton(t){var n=t.recording,r=t.onStartRecording,i=t.onStopRecording,o=t.i18n;return n?(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:o("stopRecording"),"aria-label":o("stopRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,v.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:o("startRecording"),"aria-label":o("startRecording"),onClick:r,"data-uppy-super-focusable":!0},(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,v.h)("circle",{cx:"50",cy:"50",r:"40"})))}r(68156);function RecordingLength(t){var n=t.recordingLengthSeconds,r=t.i18n,i=function formatSeconds(t){return"".concat(Math.floor(t/60),":").concat(String(t%60).padStart(2,0))}(n);return(0,v.h)("span",{"aria-label":r("recordingLength",{recording_length:i})},i)}const X=function SubmitButton(t){var n=t.onSubmit,r=t.i18n;return(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:r("submitRecordedFile"),"aria-label":r("submitRecordedFile"),onClick:n,"data-uppy-super-focusable":!0},(0,v.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,v.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};const J=function DiscardButton(t){var n=t.onDiscard,r=t.i18n;return(0,v.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard",type:"button",title:r("discardRecordedFile"),"aria-label":r("discardRecordedFile"),onClick:n,"data-uppy-super-focusable":!0},(0,v.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,v.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,v.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,v.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_extends.apply(this,arguments)}function isModeAvailable(t,n){return t.includes(n)}const Q=function(t){function CameraScreen(){return(0,s.A)(this,CameraScreen),function _callSuper(t,n,r){return n=(0,l.A)(n),(0,u.A)(t,_isNativeReflectConstruct()?Reflect.construct(n,r||[],(0,l.A)(t).constructor):n.apply(t,r))}(this,CameraScreen,arguments)}return(0,h.A)(CameraScreen,t),(0,c.A)(CameraScreen,[{key:"componentDidMount",value:function componentDidMount(){(0,this.props.onFocus)()}},{key:"componentWillUnmount",value:function componentWillUnmount(){(0,this.props.onStop)()}},{key:"render",value:function render(){var t=this,n=this.props,r=n.src,i=n.recordedVideo,o=n.recording,a=n.modes,s=n.supportsRecording,c=n.videoSources,u=n.showVideoSourceDropdown,l=n.showRecordingLength,p=n.onSubmit,h=n.i18n,f=n.mirror,y=n.onSnapshot,w=n.onStartRecording,R=n.onStopRecording,U=n.onDiscardRecordedVideo,W=n.recordingLengthSeconds,Q=!!i,Y=!Q&&s&&(isModeAvailable(a,"video-only")||isModeAvailable(a,"audio-only")||isModeAvailable(a,"video-audio")),Z=!Q&&isModeAvailable(a,"picture"),ee=s&&l&&!Q,te=u&&c&&c.length>1,ne={playsinline:!0};return i?(ne.muted=!1,ne.controls=!0,ne.src=i,this.videoElement&&(this.videoElement.srcObject=void 0)):(ne.muted=!0,ne.autoplay=!0,ne.srcObject=r),(0,v.h)("div",{className:"uppy uppy-Webcam-container"},(0,v.h)("div",{className:"uppy-Webcam-videoContainer"},(0,v.h)("video",_extends({ref:function ref(n){return t.videoElement=n},className:"uppy-Webcam-video  ".concat(f?"uppy-Webcam-video--mirrored":"")},ne))),(0,v.h)("div",{className:"uppy-Webcam-footer"},(0,v.h)("div",{className:"uppy-Webcam-videoSourceContainer"},te?function(t){var n=t.currentDeviceId,r=t.videoSources,i=t.onChangeVideoSource;return(0,v.h)("div",{className:"uppy-Webcam-videoSource"},(0,v.h)("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:function onChange(t){i(t.target.value)}},r.map(function(t){return(0,v.h)("option",{key:t.deviceId,value:t.deviceId,selected:t.deviceId===n},t.label)})))}(this.props):null),(0,v.h)("div",{className:"uppy-Webcam-buttonContainer"},Z&&(0,v.h)(SnapshotButton,{onSnapshot:y,i18n:h}),Y&&(0,v.h)(RecordButton,{recording:o,onStartRecording:w,onStopRecording:R,i18n:h}),Q&&(0,v.h)(X,{onSubmit:p,i18n:h}),Q&&(0,v.h)(J,{onDiscard:U,i18n:h})),(0,v.h)("div",{className:"uppy-Webcam-recordingLength"},ee&&(0,v.h)(RecordingLength,{recordingLengthSeconds:W,i18n:h}))))}}])}(v.uA),PermissionsScreen=function(t){var n=t.icon,r=t.i18n,i=t.hasCamera;return(0,v.h)("div",{className:"uppy-Webcam-permissons"},(0,v.h)("div",{className:"uppy-Webcam-permissonsIcon"},n()),(0,v.h)("h1",{className:"uppy-Webcam-title"},r(i?"allowAccessTitle":"noCameraTitle")),(0,v.h)("p",null,r(i?"allowAccessDescription":"noCameraDescription")))},Y={strings:{pluginNameCamera:"Camera",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",recordingLength:"Recording length %{recording_length}",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}};function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(n){(0,a.A)(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Webcam_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Webcam_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Webcam_extends(){return Webcam_extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Webcam_extends.apply(this,arguments)}function _classPrivateFieldLooseBase(t,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw new TypeError("attempted to use private field on non-instance");return t}var Z=0;function _classPrivateFieldLooseKey(t){return"__private_"+Z+++"_"+t}function toMimeType(t){return"."===t[0]?U.A[t.slice(1)]:t}function isVideoMimeType(t){return/^video\/[^*]+$/.test(t)}function isImageMimeType(t){return/^image\/[^*]+$/.test(t)}function Webcam_isModeAvailable(t,n){return t.includes(n)}var ee=_classPrivateFieldLooseKey("enableMirror"),te=function(t){function Webcam(t,n){var r;(0,s.A)(this,Webcam),r=function Webcam_callSuper(t,n,r){return n=(0,l.A)(n),(0,u.A)(t,Webcam_isNativeReflectConstruct()?Reflect.construct(n,r||[],(0,l.A)(t).constructor):n.apply(t,r))}(this,Webcam,[t,n]),Object.defineProperty(r,ee,{writable:!0,value:void 0}),r.mediaDevices=function getMediaDevices(){return navigator.mediaDevices}(),r.supportsUserMedia=!!r.mediaDevices,r.protocol=location.protocol.match(/https/i)?"https":"http",r.id=r.opts.id||"Webcam",r.type="acquirer",r.capturedMediaFile=null,r.icon=function(){return(0,v.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,v.h)("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383",fillRule:"nonzero"}))},r.defaultLocale=Y;var i={onBeforeSnapshot:function onBeforeSnapshot(){return Promise.resolve()},countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,facingMode:"user",videoConstraints:void 0,preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1,mobileNativeCamera:W({tablet:!0})};return r.opts=_objectSpread(_objectSpread({},i),n),r.i18nInit(),r.title=r.i18n("pluginNameCamera"),_classPrivateFieldLooseBase(r,ee)[ee]=r.opts.mirror,r.install=r.install.bind(r),r.setPluginState=r.setPluginState.bind(r),r.render=r.render.bind(r),r.start=r.start.bind(r),r.stop=r.stop.bind(r),r.takeSnapshot=r.takeSnapshot.bind(r),r.startRecording=r.startRecording.bind(r),r.stopRecording=r.stopRecording.bind(r),r.discardRecordedVideo=r.discardRecordedVideo.bind(r),r.submit=r.submit.bind(r),r.oneTwoThreeSmile=r.oneTwoThreeSmile.bind(r),r.focus=r.focus.bind(r),r.changeVideoSource=r.changeVideoSource.bind(r),r.webcamActive=!1,r.opts.countdown&&(r.opts.onBeforeSnapshot=r.oneTwoThreeSmile),r.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null}),r}return(0,h.A)(Webcam,t),(0,c.A)(Webcam,[{key:"setOptions",value:function setOptions(t){!function _superPropGet(t,n,r,i){var o=(0,p.A)((0,l.A)(1&i?t.prototype:t),n,r);return 2&i&&"function"==typeof o?function(t){return o.apply(r,t)}:o}(Webcam,"setOptions",this,3)([_objectSpread(_objectSpread({},t),{},{videoConstraints:_objectSpread(_objectSpread({},this.opts.videoConstraints),null==t?void 0:t.videoConstraints)})])}},{key:"hasCameraCheck",value:function hasCameraCheck(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then(function(t){return t.some(function(t){return"videoinput"===t.kind})}):Promise.resolve(!1)}},{key:"isAudioOnly",value:function isAudioOnly(){return 1===this.opts.modes.length&&"audio-only"===this.opts.modes[0]}},{key:"getConstraints",value:function getConstraints(t){void 0===t&&(t=null);var n=-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),r=!this.isAudioOnly()&&(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")),i=_objectSpread(_objectSpread({},this.opts.videoConstraints||{facingMode:this.opts.facingMode}),t?{deviceId:t,facingMode:null}:{});return{audio:n,video:!!r&&i}}},{key:"start",value:function start(t){var n=this;if(void 0===t&&(t=null),!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(_classPrivateFieldLooseBase(this,ee)[ee]=!0);var r=this.getConstraints(t&&t.deviceId?t.deviceId:null);this.hasCameraCheck().then(function(i){return n.setPluginState({hasCamera:i}),n.mediaDevices.getUserMedia(r).then(function(r){n.stream=r;var i=null,o=n.isAudioOnly()?r.getAudioTracks():r.getVideoTracks();t&&t.deviceId?o.forEach(function(n){n.getSettings().deviceId===t.deviceId&&(i=n.getSettings().deviceId)}):i=o[0].getSettings().deviceId,n.updateVideoSources(),n.setPluginState({currentDeviceId:i,cameraReady:!0})}).catch(function(t){n.setPluginState({cameraReady:!1,cameraError:t}),n.uppy.info(t.message,"error")})})}},{key:"getMediaRecorderOptions",value:function getMediaRecorderOptions(){var t={};if(MediaRecorder.isTypeSupported){var n=this.uppy.opts.restrictions,r=[];this.opts.preferredVideoMimeType?r=[this.opts.preferredVideoMimeType]:n.allowedFileTypes&&(r=n.allowedFileTypes.map(toMimeType).filter(isVideoMimeType));var i=r.filter(function filterSupportedTypes(t){return MediaRecorder.isTypeSupported(t)&&getFileTypeExtension(t)});i.length>0&&(t.mimeType=i[0])}return t}},{key:"startRecording",value:function startRecording(){var t=this;this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];var n=!1;this.recorder.addEventListener("dataavailable",function(r){t.recordingChunks.push(r.data);var i=t.uppy.opts.restrictions;if(t.recordingChunks.length>1&&null!=i.maxFileSize&&!n){var o=t.recordingChunks.reduce(function(t,n){return t+n.size},0),a=3*((o-t.recordingChunks[0].size)/(t.recordingChunks.length-1));o>Math.max(0,i.maxFileSize-a)&&(n=!0,t.uppy.info(t.i18n("recordingStoppedMaxSize"),"warning",4e3),t.stopRecording())}}),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval(function(){var n=t.getPluginState().recordingLengthSeconds;t.setPluginState({recordingLengthSeconds:n+1})},1e3)),this.setPluginState({isRecording:!0})}},{key:"stopRecording",value:function stopRecording(){var t=this;return new Promise(function(n){t.recorder.addEventListener("stop",function(){n()}),t.recorder.stop(),t.opts.showRecordingLength&&(clearInterval(t.recordingLengthTimer),t.setPluginState({recordingLengthSeconds:0}))}).then(function(){return t.setPluginState({isRecording:!1}),t.getVideo()}).then(function(n){try{t.capturedMediaFile=n,t.setPluginState({recordedVideo:URL.createObjectURL(n.data)}),_classPrivateFieldLooseBase(t,ee)[ee]=!1}catch(n){n.isRestriction||t.uppy.log(n)}}).then(function(){t.recordingChunks=null,t.recorder=null},function(n){throw t.recordingChunks=null,t.recorder=null,n})}},{key:"discardRecordedVideo",value:function discardRecordedVideo(){this.setPluginState({recordedVideo:null}),this.opts.mirror&&(_classPrivateFieldLooseBase(this,ee)[ee]=!0),this.capturedMediaFile=null}},{key:"submit",value:function submit(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(t){t.isRestriction||this.uppy.log(t,"error")}}},{key:"stop",value:(n=(0,o.A)(f.mark(function _callee(){var t,n,r=this;return f.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.stream&&(t=this.stream.getAudioTracks(),n=this.stream.getVideoTracks(),t.concat(n).forEach(function(t){return t.stop()})),!this.recorder){i.next=1;break}return i.next=1,new Promise(function(t){r.recorder.addEventListener("stop",t,{once:!0}),r.recorder.stop(),r.opts.showRecordingLength&&clearInterval(r.recordingLengthTimer)});case 1:this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,isRecording:!1,recordingLengthSeconds:0});case 2:case"end":return i.stop()}},_callee,this)})),function stop(){return n.apply(this,arguments)})},{key:"getVideoElement",value:function getVideoElement(){return this.el.querySelector(".uppy-Webcam-video")}},{key:"oneTwoThreeSmile",value:function oneTwoThreeSmile(){var t=this;return new Promise(function(n,r){var i=t.opts.countdown,o=setInterval(function(){if(!t.webcamActive)return clearInterval(o),t.captureInProgress=!1,r(new Error("Webcam is not active"));i>0?(t.uppy.info("".concat(i,"..."),"warning",800),i--):(clearInterval(o),t.uppy.info(t.i18n("smile"),"success",1500),setTimeout(function(){return n()},1500))},1e3)})}},{key:"takeSnapshot",value:function takeSnapshot(){var t=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(n){var r="object"===(0,i.A)(n)?n.message:n;return t.uppy.info(r,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: ".concat(r)))}).then(function(){return t.getImage()}).then(function(n){t.captureInProgress=!1;try{t.uppy.addFile(n)}catch(n){n.isRestriction||t.uppy.log(n)}},function(n){throw t.captureInProgress=!1,n}))}},{key:"getImage",value:function getImage(){var t=this,n=this.getVideoElement();if(!n)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var r=n.videoWidth,i=n.videoHeight,o=document.createElement("canvas");o.width=r,o.height=i,o.getContext("2d").drawImage(n,0,0);var a=this.uppy.opts.restrictions,s=[];this.opts.preferredImageMimeType?s=[this.opts.preferredImageMimeType]:a.allowedFileTypes&&(s=a.allowedFileTypes.map(toMimeType).filter(isImageMimeType));var c=s[0]||"image/jpeg",u=getFileTypeExtension(c)||"jpg",l="cam-".concat(Date.now(),".").concat(u);return function canvasToBlob(t,n,r){return new Promise(function(i){t.toBlob(i,n,r)})}(o,c).then(function(n){return{source:t.id,name:l,data:new Blob([n],{type:c}),type:c}})}},{key:"getVideo",value:function getVideo(){var t=this.recordingChunks.find(function(t){var n;return(null==(n=t.type)?void 0:n.length)>0}).type,n=getFileTypeExtension(t);if(!n)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'.concat(t,'"')));var r="webcam-".concat(Date.now(),".").concat(n),i=new Blob(this.recordingChunks,{type:t}),o={source:this.id,name:r,data:new Blob([i],{type:t}),type:t};return Promise.resolve(o)}},{key:"focus",value:function focus(){var t=this;this.opts.countdown&&setTimeout(function(){t.uppy.info(t.i18n("smile"),"success",1500)},1e3)}},{key:"changeVideoSource",value:function changeVideoSource(t){this.stop(),this.start({deviceId:t})}},{key:"updateVideoSources",value:function updateVideoSources(){var t=this;this.mediaDevices.enumerateDevices().then(function(n){t.setPluginState({videoSources:n.filter(function(t){return"videoinput"===t.kind})})})}},{key:"render",value:function render(){this.webcamActive||this.start();var t=this.getPluginState();return t.cameraReady&&t.hasCamera?(0,v.h)(Q,Webcam_extends({},t,{onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedVideo:this.discardRecordedVideo,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start,recording:t.isRecording,mirror:_classPrivateFieldLooseBase(this,ee)[ee],src:this.stream})):(0,v.h)(PermissionsScreen,{icon:CameraIcon,i18n:this.i18n,hasCamera:t.hasCamera})}},{key:"install",value:function install(){var t,n=this,r=this.opts,i=r.mobileNativeCamera,o=r.modes,a=r.facingMode,s=r.videoConstraints,c=this.opts.target;i&&c?null==(t=this.getTargetPlugin(c))||t.setOptions({showNativeVideoCameraButton:Webcam_isModeAvailable(o,"video-only")||Webcam_isModeAvailable(o,"video-audio"),showNativePhotoCameraButton:Webcam_isModeAvailable(o,"picture"),nativeCameraFacingMode:(null==s?void 0:s.facingMode)||a}):(this.setPluginState({cameraReady:!1,recordingLengthSeconds:0}),c&&this.mount(c,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=function(){if(n.updateVideoSources(),n.stream){var t=!0,r=n.getPluginState(),i=r.videoSources,o=r.currentDeviceId;i.forEach(function(n){o===n.deviceId&&(t=!1)}),t&&(n.stop(),n.start())}}))}},{key:"uninstall",value:function uninstall(){this.stop(),this.unmount()}},{key:"onUnmount",value:function onUnmount(){this.stop()}}]);var n}(y.A);te.VERSION="3.3.6"},83237:(t,n,r)=>{r(70511)("replace")}}]);